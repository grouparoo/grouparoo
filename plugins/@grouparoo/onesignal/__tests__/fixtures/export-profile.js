const nock = require("nock");

nock("https://onesignal.com:443", { encodedQueryParams: true })
  .delete("/api/v1/players/null")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(400, { errors: ["No user with this id found"] }, [
    "Date",
    "Thu, 11 Mar 2021 14:48:41 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d4a8faf0fa266dce676182ce0d1d88c921615474121; expires=Sat, 10-Apr-21 14:48:41 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "400 Bad Request",
    "cache-control",
    "no-cache",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "1c6c5b7f-a5c6-474a-82d0-13f356784b12",
    "access-control-allow-headers",
    "SDK-Version",
    "x-runtime",
    "0.009097",
    "x-frame-options",
    "SAMEORIGIN",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 6.0.4",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35bf4b20000f3452414e000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e595cdee80f345-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .post("/api/v1/players", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    external_user_id: "grouparoo",
    device_type: 11,
    identifier: "grouparoo@demo.com",
  })
  .once()
  .reply(200, { success: true, id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe" }, [
    "Date",
    "Thu, 11 Mar 2021 14:48:42 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dfe949732bc2d1418d316b2283cc056251615474122; expires=Sat, 10-Apr-21 14:48:42 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "200 OK",
    "cache-control",
    "max-age=0, private, must-revalidate",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "b6f1e7aa-1767-4dca-b109-423f908d9b87",
    "access-control-allow-headers",
    "SDK-Version",
    "etag",
    'W/"d383ef05c5c1e57817905a3017e6acf8"',
    "x-frame-options",
    "SAMEORIGIN",
    "x-runtime",
    "0.249863",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 6.0.4",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35bf5ed00005eaa171c0000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e595cfea4d5eaa-TPA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put(
    "/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/thisdoesnotexist",
    { app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31", tags: {} }
  )
  .once()
  .reply(404, { errors: ["No users with this external_id found"] }, [
    "Date",
    "Thu, 11 Mar 2021 14:48:42 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "51",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d00de83943cdb94826a68cf6e018609601615474122; expires=Sat, 10-Apr-21 14:48:42 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35bf7df00005e688185d000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e595d2fe1d5e68-TPA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: { first_name: "Joe" },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:48:43 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dc8133d413d37703ffd39aa4dfbe8c77a1615474123; expires=Sat, 10-Apr-21 14:48:43 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35bf9060000ef26f9b7b000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e595d4da1aef26-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "Joe" },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:48:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=dc8d186d5652960f310cc2c1294e3304d1615474133; expires=Sat, 10-Apr-21 14:48:53 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "63b1e462-2e9c-43d0-8074-f43cc41ae595",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"369402d969bee443550e4ae6f2fffbe5"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.012617",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35c21550000572b6494b000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e596155917572b-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      last_name: "Doe",
      last_active_at: 1614034983,
      play_count: 10,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:48:53 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dae53f72e75fd22565e3a0b62388380731615474133; expires=Sat, 10-Apr-21 14:48:53 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35c226c0000ec19cf895000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e596171e9eec19-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        last_name: "Doe",
        first_name: "John",
        play_count: "10",
        last_active_at: "1614034983",
      },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:49:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=dec92a03cea95f3de62f6484b987f24e91615474144; expires=Sat, 10-Apr-21 14:49:04 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "99928b66-5e1b-4ec1-90cd-5a1fe1014cf7",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"ac7c1b3b2211a072f83978ff49db7b68"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.007957",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35c4c4e000012737d399000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e5965a1bd61273-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      last_name: null,
      last_active_at: null,
      play_count: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:49:05 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dd6266607a659587c9b4f83cfc93204bc1615474145; expires=Sat, 10-Apr-21 14:49:05 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35c4f22000007befe04a000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e5965e982b07be-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John" },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:49:15 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d0661ab82ce6f933e194d828c8810d17a1615474155; expires=Sat, 10-Apr-21 14:49:15 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "7a1ce8b0-ba97-4472-adbc-c19d4523b2e7",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"ef0ff2980714bc4b537beb5747302772"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009037",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35c77890000d509ffae1000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e5969f4ea8d509-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: { first_name: "John", in_high_value: 1, in_spanish_speakers: 1 },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:49:15 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=da1cae47b2011ce0d089110f88db846a31615474155; expires=Sat, 10-Apr-21 14:49:15 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35c786e00001189fbbf5000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e596a0acc51189-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "1",
        in_spanish_speakers: "1",
      },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:49:25 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d104ce7931efcdefda7ebfce0bc7c6ca61615474165; expires=Sat, 10-Apr-21 14:49:25 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "e6e2bb50-2dd2-4521-a99b-92570df294f7",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"c1a65533e622f22f536dbc28946097a2"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.008940",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35ca0970000370db1891000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e596e0fc19370d-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: { first_name: "John", in_high_value: 1, in_spanish_speakers: null },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:49:26 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d8f3aa800971df2fa37d85ed26047c99f1615474166; expires=Sat, 10-Apr-21 14:49:26 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35ca18e0000118d7215f000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e596e27f0e118d-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John", in_high_value: "1" },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:49:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d915014f2a0cf705aebecd46cfbc76acd1615474176; expires=Sat, 10-Apr-21 14:49:36 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "45e02e9a-ce00-4bee-a7e3-1cd86dca8a12",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"55cfc694411d35f5cee3ef1eb42caf22"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.007587",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35cc9aa0000c86b7c167000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e59722aad9c86b-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      my_weird_tag_name: "test",
      in_high_value: 1,
      in___high_value____: 1,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:49:36 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=db21ec9a287b644e12969608c360e5a211615474176; expires=Sat, 10-Apr-21 14:49:36 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35cca8e0000370eb102a000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e597241e9d370e-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "1",
        my_weird_tag_name: "test",
        in___high_value____: "1",
      },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:49:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d14413a75916882c10e49ec7144419cc61615474187; expires=Sat, 10-Apr-21 14:49:47 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "ba70337e-b8e6-4a02-b865-b81720472f9d",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"87253b0114d7c5ab0a70efd2a7936cc1"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.008411",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35cf31200005e8c96331000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e59764e8e05e8c-TPA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      my_weird_tag_name: "test",
      in_high_value: null,
      in___high_value____: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:49:47 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d8470df862513a4c530e8d5a7fdeda1971615474187; expires=Sat, 10-Apr-21 14:49:47 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35cf43b000037179f952000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e59766cf173717-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "59fe1319-d0d8-4ff3-949b-4840fd3135fe",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John", my_weird_tag_name: "test" },
      last_active: 1615474122,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615474122,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 14:49:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d8308716270cbb47a3e9cb7cfac4c9d291615474197; expires=Sat, 10-Apr-21 14:49:57 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "c18a9e78-cc75-44d7-ba98-efc64efad1cf",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"fed2f0d92c5106cccd08d70eb3573496"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009155",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c35d1c930000d31c12b4c000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e597a75d63d31c-ATL",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .delete("/api/v1/players/59fe1319-d0d8-4ff3-949b-4840fd3135fe")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(200, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 14:49:58 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d87c33a9d066720606f44074e5f176c501615474197; expires=Sat, 10-Apr-21 14:49:57 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "200 OK",
    "cache-control",
    "max-age=0, private, must-revalidate",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "7d40aabd-c232-4fff-8d2d-e9708c95b45b",
    "access-control-allow-headers",
    "SDK-Version",
    "etag",
    'W/"c955e57777ec0d73639dca6748560d00"',
    "x-frame-options",
    "SAMEORIGIN",
    "x-runtime",
    "0.014268",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 6.0.4",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c35d1db40000d4fd39075000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e597a91b21d4fd-MIA",
  ]);
