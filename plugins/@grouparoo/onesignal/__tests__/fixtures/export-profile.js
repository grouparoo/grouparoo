const nock = require("nock");

nock("https://onesignal.com:443", { encodedQueryParams: true })
  .delete("/api/v1/players/null")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(400, { errors: ["No user with this id found"] }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:01 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=df904e55eeb54ccf330f51dcf1da22e921615494961; expires=Sat, 10-Apr-21 20:36:01 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "400 Bad Request",
    "cache-control",
    "no-cache",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "4476627d-f3de-4232-9820-426a018d696d",
    "access-control-allow-headers",
    "SDK-Version",
    "x-runtime",
    "0.007515",
    "x-frame-options",
    "SAMEORIGIN",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 5.3.7",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c499f2ac0000e77b349db000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e792977fdce77b-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .post("/api/v1/players", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    external_user_id: "grouparoo",
    device_type: 11,
    identifier: "grouparoo@demo.com",
  })
  .once()
  .reply(200, { success: true, id: "bee7b99c-33d4-4947-b964-433cbd48533c" }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:02 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=db5aa081d9862c558432e42719fdba7e71615494962; expires=Sat, 10-Apr-21 20:36:02 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "200 OK",
    "cache-control",
    "max-age=0, private, must-revalidate",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "f2de254b-2b9e-4ac7-ab2f-cfcaa5f83525",
    "access-control-allow-headers",
    "SDK-Version",
    "etag",
    'W/"3b9836f8b01f8acba91ae63e845d00ef"',
    "x-frame-options",
    "SAMEORIGIN",
    "x-runtime",
    "0.026714",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 6.0.4",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c499f3a50000f32dec998000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e792990967f32d-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put(
    "/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/thisdoesnotexist",
    { app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31", tags: {} }
  )
  .once()
  .reply(404, { errors: ["No users with this external_id found"] }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:02 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "51",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d157646d0d39bc6408de9abea228b5bc51615494962; expires=Sat, 10-Apr-21 20:36:02 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c499f4cd00005e80a0928000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e7929ae8b75e80-TPA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: { first_name: "Joe" },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:02 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dedcd28d861575db3e2845a4a9ccbb7e71615494962; expires=Sat, 10-Apr-21 20:36:02 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c499f615000011adb2b13000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e7929cecea11ad-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "Joe" },
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:36:13 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=dbad17f0e53df682a2ce43d7904b6582c1615494972; expires=Sat, 10-Apr-21 20:36:12 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "20260f5e-9a34-4fb0-a9aa-271c959399fc",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"99cc572c24323cedd1eeb94a72b387dd"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.008430",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49a1e45000011a5d50d0000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e792dd3b2c11a5-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      last_name: "Doe",
      last_active_at: 1614034983,
      play_count: 10,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:13 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dfc6216c7cfa456bc46da5d4a9df3a67c1615494973; expires=Sat, 10-Apr-21 20:36:13 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49a1f3a000007c2fc041000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e792decca007c2-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        last_name: "Doe",
        first_name: "John",
        play_count: "10",
        last_active_at: "1614034983",
      },
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:36:23 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=dfd10d2cc9da3f20ba342fee5a9f60a721615494983; expires=Sat, 10-Apr-21 20:36:23 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "cf16fe1b-eb30-43ee-ac4b-dee9f029e7ad",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"43488794032c3bbb9c9014796dc9667d"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.008415",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49a47ab0000e944cf1f5000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e7931f79cae944-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      last_name: null,
      last_active_at: null,
      play_count: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:23 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dc1fbc4e2eab6208af2c57a6ce24688501615494983; expires=Sat, 10-Apr-21 20:36:23 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49a48e50000f345ad0f5000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e793216d43f345-ATL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John" },
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:36:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=dbbe999ebdf7f35657c348e2369c176b51615494994; expires=Sat, 10-Apr-21 20:36:34 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "fcf2b0b1-c33e-428f-a7a8-7285f31fe535",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"1d07fc225e038f5e666f42a3a2d929d2"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009286",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49a71620000129fa4263000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e793623a40129f-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      in_high_value: true,
      in_spanish_speakers: true,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:34 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=daea21672d027eace31056de109a5fc671615494994; expires=Sat, 10-Apr-21 20:36:34 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49a72ae00005e9e78317000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e793644aa05e9e-TPA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "true",
        in_spanish_speakers: "true",
      },
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:36:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=ddfc368d27ee8f19c779ed392cb77a2901615495004; expires=Sat, 10-Apr-21 20:36:44 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "0fd77a08-9e9b-4445-868f-9d494de4a6ad",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"c4940b35cf0de89405bbff4c729acb2f"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.008773",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49a9b300000572a72965000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e793a51d78572a-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      in_high_value: true,
      in_spanish_speakers: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:45 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dec253413a5c5426a4a71e3afc8a846211615495005; expires=Sat, 10-Apr-21 20:36:45 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49a9c160000572ba3a7a000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e793a68efa572b-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John", in_high_value: "true" },
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:36:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d3ed958ebb1cd268762e45c9b3c83345d1615495015; expires=Sat, 10-Apr-21 20:36:55 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "1178532e-c2a8-48c4-8b4b-cf3633d8dac4",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"50f337d482bda4ab80c149d1abed6273"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.010292",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49ac44b000011757f2ce000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e793e6d9871175-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      my_weird_tag_name: "test",
      in_high_value: true,
      in___high_value____: true,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:36:55 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d64fbbe46f8d3dd825e370ee880f0096e1615495015; expires=Sat, 10-Apr-21 20:36:55 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49ac5360000ef161f8e9000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e793e85be0ef16-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "true",
        my_weird_tag_name: "test",
        in___high_value____: "true",
      },
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:37:06 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d8c4ef979ad467de487e022bcea68dad81615495026; expires=Sat, 10-Apr-21 20:37:06 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "44d413e1-fb0f-4119-b05c-8a4a4625ace2",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"b250f2756027b2d3d17eb6b2344ea40e"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009258",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49aed770000e964430f5000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e79428bb04e964-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: null,
      my_weird_tag_name: null,
      some_new_tag: null,
      in_high_value: null,
      in___high_value____: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:37:06 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d7f0013d31797c8e7536d407525df06551615495026; expires=Sat, 10-Apr-21 20:37:06 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49aee820000041c89b1f000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e7942a6db8041c-MIA",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "bee7b99c-33d4-4947-b964-433cbd48533c",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {},
      last_active: 1615494962,
      playtime: 0,
      amount_spent: 0,
      created_at: 1615494962,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "148.101.142.23",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Thu, 11 Mar 2021 20:37:16 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d2aa4114eb0b9a81501889be4fef4d4a91615495036; expires=Sat, 10-Apr-21 20:37:16 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "45fbc2fe-7110-4c4d-9fe2-775157d4ec9a",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"d43a8b3be5555f576d56d7fdda867fe7"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009791",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "08c49b180000005730b3a8d000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "62e7946ccb895730-MIA",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .delete("/api/v1/players/bee7b99c-33d4-4947-b964-433cbd48533c")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(200, { success: true }, [
    "Date",
    "Thu, 11 Mar 2021 20:37:18 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d0c774a63a427e917d8a8c451569869701615495038; expires=Sat, 10-Apr-21 20:37:18 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "200 OK",
    "cache-control",
    "max-age=0, private, must-revalidate",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "b2b98f6a-ceda-4799-bfec-478bb8689826",
    "access-control-allow-headers",
    "SDK-Version",
    "etag",
    'W/"c955e57777ec0d73639dca6748560d00"',
    "x-frame-options",
    "SAMEORIGIN",
    "x-runtime",
    "0.006533",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 6.0.4",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "08c49b1d830000d511e3358000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "62e794759ce9d511-MIA",
  ]);
