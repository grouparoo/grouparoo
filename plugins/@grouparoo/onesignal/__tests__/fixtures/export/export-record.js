const nock = require("nock");

nock("https://onesignal.com:443", { encodedQueryParams: true })
  .delete("/api/v1/players/null")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(400, { errors: ["No user with this id found"] }, [
    "Date",
    "Tue, 04 May 2021 17:53:17 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d64729c952d326b522d086302832445d61620150797; expires=Thu, 03-Jun-21 17:53:17 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "400 Bad Request",
    "cache-control",
    "no-cache",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "bb3936c7-3daf-4ca7-b572-f00372904df7",
    "access-control-allow-headers",
    "SDK-Version",
    "x-runtime",
    "0.013357",
    "x-frame-options",
    "SAMEORIGIN",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 5.3.7",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1c5def0000cf8e71a7c000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a396764dbacf8e-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .post("/api/v1/players", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    external_user_id: "grouparoo",
    device_type: 11,
    identifier: "grouparoo@demo.com",
  })
  .once()
  .reply(200, { success: true, id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54" }, [
    "Date",
    "Tue, 04 May 2021 17:53:18 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dd61939fff0184e8e6a7eb876d203ccd11620150798; expires=Thu, 03-Jun-21 17:53:18 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "200 OK",
    "cache-control",
    "max-age=0, private, must-revalidate",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "164862bc-6b6b-4aed-8414-d0e486b40676",
    "access-control-allow-headers",
    "SDK-Version",
    "etag",
    'W/"9f9cd9abbb2f847e7b04e181b1db932c"',
    "x-frame-options",
    "SAMEORIGIN",
    "x-runtime",
    "0.018739",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 5.3.7",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1c5eb30000cf923cb10000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a3967788e7cf92-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put(
    "/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/thisdoesnotexist",
    { app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31", tags: {} }
  )
  .once()
  .reply(404, { errors: ["No users with this external_id found"] }, [
    "Date",
    "Tue, 04 May 2021 17:53:18 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "51",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d7786a2234ce30eba514aafd8673070891620150798; expires=Thu, 03-Jun-21 17:53:18 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1c5f6f0000e0801f971000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a39678be34e080-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {},
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:53:28 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d95534edd8959b989d5aa80601d1962571620150808; expires=Thu, 03-Jun-21 17:53:28 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "0c0dbdba-fb5d-4a0d-8f1d-9a46a6d83413",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"0ca671dbd9ff8f3d08f611ec3fcc5fcd"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.011711",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1c88ac0000cfc3148e4000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a396baae38cfc3-SCL",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: { first_name: "Joe" },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:53:29 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d7fa936899a5ab6429ce65362072c8bd51620150809; expires=Thu, 03-Jun-21 17:53:29 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1c89e90000e07cad9c2000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a396bcaa7ee07c-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "Joe" },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:53:39 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d357aa1a677c3025e2fb4e97398d3eee21620150819; expires=Thu, 03-Jun-21 17:53:39 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "12966995-00c1-474d-965f-d78c852813ae",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"69466f3fb4cc6a07fe5bdf3624e804ad"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009984",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1cb1da0000cf961f985000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a396fc8a02cf96-FOR",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      last_name: "Doe",
      last_active_at: 1614034983,
      play_count: 10,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:53:39 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d1f37fba3c417418f636ee62e480893341620150819; expires=Thu, 03-Jun-21 17:53:39 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1cb2a40000e080f9b7e000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a396fddd28e080-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        last_name: "Doe",
        first_name: "John",
        play_count: "10",
        last_active_at: "1614034983",
      },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:53:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d3a879794e6b58e8b12cbb775b54709e91620150829; expires=Thu, 03-Jun-21 17:53:49 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "27a2a34a-b82f-4087-9491-d32f79df2571",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"00111fdf6537b99ab49a0908994bf357"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.010955",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1cdabd0000cf9e2b2b6000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a3973dc96ccf9e-FOR",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      last_name: null,
      last_active_at: null,
      play_count: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:53:50 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d2f6b76dbb5a64f2a2cb64931963d24d51620150830; expires=Thu, 03-Jun-21 17:53:50 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1cdb9d0000e078e111c000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a3973f6cf4e078-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John" },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:54:00 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=ddb315b1fc29d1b324c8c8532a2b4d6011620150840; expires=Thu, 03-Jun-21 17:54:00 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "f839925a-909a-4e41-8764-5b529a3a2ff2",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"5e43bf375e8f76dd6f7e4352f28cee1d"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.010172",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1d03990000cf9e4327b000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a3977f5e60cf9e-FOR",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      in_high_value: true,
      in_spanish_speakers: true,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:54:00 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=deaf7745b6286c0b49b15a6c4c72f57fd1620150840; expires=Thu, 03-Jun-21 17:54:00 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1d043f0000e0848e893000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a397806c5ce084-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "true",
        in_spanish_speakers: "true",
      },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:54:10 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d2129d13015841f25c6d612248ec8afda1620150850; expires=Thu, 03-Jun-21 17:54:10 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "6c624c13-b059-471a-9913-7b48bb927858",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"730f3268ed17c0ebea14e1f9dded0c83"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009136",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1d2c380000cf8e528b2000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a397c059fecf8e-FOR",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      in_high_value: true,
      in_spanish_speakers: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:54:11 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=dc3bc315ab414ccb2b286728ebb665e3b1620150851; expires=Thu, 03-Jun-21 17:54:11 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1d2e450000fde1723a8000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a397c3a83afde1-SCL",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: { first_name: "John", in_high_value: "true" },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:54:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=dd48a8f9aaa08922e0b787ed1655d06ae1620150861; expires=Thu, 03-Jun-21 17:54:21 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "25cb773e-a8b4-442b-a978-12a10938a0ad",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"306738829c559b7004a6f728befad942"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009001",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1d57610000cfa3b79b1000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a398056be6cfa3-SCL",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: "John",
      my_weird_tag_name: "test",
      in_high_value: true,
      in___high_value____: true,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:54:22 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d501f31c308e4d5a40eccfee69b4ce1a31620150861; expires=Thu, 03-Jun-21 17:54:21 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1d587e0000cf9a17ad8000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a3980729d9cf9a-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "true",
        my_weird_tag_name: "test",
        in___high_value____: "true",
      },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:54:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d51f2dd75aad22eb0dc213bf0efcb4ad21620150872; expires=Thu, 03-Jun-21 17:54:32 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "8f338ac1-2c9d-4450-a680-4ab1a53d84da",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"ebc891792de19b2f96c87fb9e8542332"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009965",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1d80df0000e07445245000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a39847cab0e074-FOR",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {
        first_name: "John",
        in_high_value: "true",
        my_weird_tag_name: "test",
        in___high_value____: "true",
      },
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:54:42 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=d1544e9aab11f95ed11311e2fc123e7dd1620150882; expires=Thu, 03-Jun-21 17:54:42 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "7a61bcb7-b182-469f-8f1a-c78b5a298603",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"ebc891792de19b2f96c87fb9e8542332"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009162",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 6.0.4",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1da8b30000cf8a82031000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a398878ef9cf8a-FOR",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .put("/api/v1/apps/c2a9750d-41ef-8cef96b99-127be5aaeb31/users/grouparoo", {
    app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31",
    tags: {
      first_name: null,
      my_weird_tag_name: null,
      some_new_tag: null,
      in_high_value: null,
      in___high_value____: null,
    },
  })
  .once()
  .reply(202, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:54:42 GMT",
    "Content-Type",
    "application/json",
    "Content-Length",
    "16",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d17e42ecacec9009f204a6468a81eee9f1620150882; expires=Thu, 03-Jun-21 17:54:42 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "access-control-allow-origin",
    "*",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1da96f0000e084da8f7000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a39888be13e084-FOR",
  ]);
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .get("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(
    200,
    {
      id: "6acf0477-b0d0-4bf7-9961-2521dd8fbd54",
      identifier: "grouparoo@demo.com",
      session_count: 1,
      language: "en",
      timezone: null,
      game_version: null,
      device_os: null,
      device_type: 11,
      device_model: null,
      ad_id: null,
      tags: {},
      last_active: 1620150798,
      playtime: 0,
      amount_spent: 0,
      created_at: 1620150798,
      invalid_identifier: false,
      badge_count: 0,
      sdk: null,
      test_type: null,
      ip: "191.253.18.59",
      external_user_id: "grouparoo",
    },
    [
      "Date",
      "Tue, 04 May 2021 17:54:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Set-Cookie",
      "__cfduid=db163149b72687570bf24b59f43d8b8b91620150893; expires=Thu, 03-Jun-21 17:54:53 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
      "status",
      "200 OK",
      "cache-control",
      "max-age=0, private, must-revalidate",
      "access-control-allow-origin",
      "*",
      "referrer-policy",
      "strict-origin-when-cross-origin",
      "x-xss-protection",
      "1; mode=block",
      "x-request-id",
      "563af9d7-9e85-4a9c-8351-bf3cf19f1bbf",
      "access-control-allow-headers",
      "SDK-Version",
      "etag",
      'W/"0ca671dbd9ff8f3d08f611ec3fcc5fcd"',
      "x-frame-options",
      "SAMEORIGIN",
      "x-runtime",
      "0.009248",
      "x-content-type-options",
      "nosniff",
      "x-powered-by",
      "Phusion Passenger 5.3.7",
      "CF-Cache-Status",
      "DYNAMIC",
      "cf-request-id",
      "09da1dd2b10000cfbf19a52000000001",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Server",
      "cloudflare",
      "CF-RAY",
      "64a398cab895cfbf-SCL",
    ]
  );
nock("https://onesignal.com:443", { encodedQueryParams: true })
  .delete("/api/v1/players/6acf0477-b0d0-4bf7-9961-2521dd8fbd54")
  .query({ app_id: "c2a9750d-41ef-8cef96b99-127be5aaeb31" })
  .once()
  .reply(200, { success: true }, [
    "Date",
    "Tue, 04 May 2021 17:54:53 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Set-Cookie",
    "__cfduid=d771589ede76b35359c435a3ecd47a3291620150893; expires=Thu, 03-Jun-21 17:54:53 GMT; path=/; domain=.onesignal.com; HttpOnly; SameSite=Lax",
    "status",
    "200 OK",
    "cache-control",
    "max-age=0, private, must-revalidate",
    "access-control-allow-origin",
    "*",
    "referrer-policy",
    "strict-origin-when-cross-origin",
    "x-xss-protection",
    "1; mode=block",
    "x-request-id",
    "5d31cad9-a6a2-415e-aca4-e946af2983c5",
    "access-control-allow-headers",
    "SDK-Version",
    "etag",
    'W/"c955e57777ec0d73639dca6748560d00"',
    "x-frame-options",
    "SAMEORIGIN",
    "x-runtime",
    "0.036278",
    "x-content-type-options",
    "nosniff",
    "x-powered-by",
    "Phusion Passenger 6.0.4",
    "CF-Cache-Status",
    "DYNAMIC",
    "cf-request-id",
    "09da1dd3ce0000e07cb399a000000001",
    "Expect-CT",
    'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
    "Server",
    "cloudflare",
    "CF-RAY",
    "64a398cc7e1be07c-FOR",
  ]);
