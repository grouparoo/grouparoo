const nock = require("nock");

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3b2090f1b8821ad77b899",
          workspace_id: "l4wp0knn",
          external_id: "testuser5872767248",
          role: "user",
          email: "testuser5872767248@demo.com",
          phone: null,
          name: "New Email",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609806345,
          updated_at: 1609806731,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff3b2090f1b8821ad77b899/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3b2090f1b8821ad77b899/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3b2090f1b8821ad77b899/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "5ff3b29309517d5c589e0d73",
          workspace_id: "l4wp0knn",
          external_id: "testuser6050069621",
          role: "user",
          email: "testuser6050069621@demo.com",
          phone: null,
          name: "Sally",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609806483,
          updated_at: 1609806484,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ff3b29309517d5c589e0d73/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3b29309517d5c589e0d73/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3b29309517d5c589e0d73/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "5ff3b2d16f0d52f4f8d33815",
          workspace_id: "l4wp0knn",
          external_id: "88a88c29-dd15-40a4-a0a7-ab48e337f9d4",
          role: "lead",
          email: "testuser4873347805@demo.com",
          phone: null,
          name: "Allison",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609806545,
          updated_at: 1609806607,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ff3b2d16f0d52f4f8d33815/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3b2d16f0d52f4f8d33815/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3b2d16f0d52f4f8d33815/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 3,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:15 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0099hds6t137iusnpa1g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"abc7b926d7c5b4327005f2063b50545a"',
      "X-Runtime",
      "0.110788",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3b2090f1b8821ad77b899/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff3b2090f1b8821ad77b899", object: "contact", archived: true },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:16 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098lrktlvnojq5c6fjg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"5f4fed1e29db647344d499b80586077c"',
      "X-Runtime",
      "0.161597",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=81c63bb5-25f2-4edd-8c0f-29f50c88fd7d; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3b29309517d5c589e0d73/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff3b29309517d5c589e0d73", object: "contact", archived: true },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098sn10p9o18gfqfef0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9ea77538eeed3ddb22dacc2747ae0d4a"',
      "X-Runtime",
      "0.190073",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=61fefaaa-1208-4a7c-bae2-6359273a0d99; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3b2d16f0d52f4f8d33815/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff3b2d16f0d52f4f8d33815", object: "contact", archived: true },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0007dso6qmumib4s3mrg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3254275b3b3af5aafa8e421555efeba3"',
      "X-Runtime",
      "0.142580",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=82b0712d-73d9-4bb7-a7ab-601a9ca8cd0d; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: { field: "external_id", operator: "=", value: "testuser4885935125" },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098old2d0umn87nfecg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.138976",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        { field: "email", operator: "=", value: "testuser4885935125@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000ai226e7b64i9ecu20",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.131759",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser4885935125",
    email: "testuser4885935125@demo.com",
    name: "Brian",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: null,
      name: "Brian",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810098,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:28:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810100",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098oljjs3v6jr7o7ba0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"65ede619aefa4c8430baa031c95d3897"',
      "X-Runtime",
      "0.287088",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=675a62ed-0fae-4f67-9ebc-7826e2c2e6f0; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: { field: "external_id", operator: "=", value: "testuser4885935125" },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810160",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009aof18fa63mulap9r0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.104408",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: null,
      name: "Brian",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810098,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810160",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0099htfjvslhgp02okj0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"65ede619aefa4c8430baa031c95d3897"',
      "X-Runtime",
      "0.058818",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        { field: "email", operator: "=", value: "testuser4885935125@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:20 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0099hti6pac3sj54r9f0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.110538",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: "testuser4885935125@demo.com",
    name: "John",
    phone: "+16505551234",
    custom_attributes: { text_field: "testing here", date_field: 1597870204 },
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: "+16505551234",
      name: "John",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810160,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:20 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c31sbs8q45qaos8n0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"413b6852d1ee942217385d1c79abf35d"',
      "X-Runtime",
      "0.113133",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: "+16505551234",
      name: "John",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810160,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098p4q6o3k6702o717g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"413b6852d1ee942217385d1c79abf35d"',
      "X-Runtime",
      "0.094777",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        { field: "email", operator: "=", value: "testuser4885935125@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c4e0jh0508gqnm620",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.099231",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: "testuser4885935125@demo.com",
    name: "Evan",
    phone: null,
    custom_attributes: {
      text_field: "testing here change",
      date_field: null,
      boolean_field: true,
      number_field: 13,
      decimal_field: 3.14,
    },
    unknown_junk: "ok",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: null,
      name: "Evan",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810161,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        text_field: "testing here change",
        date_field: null,
        boolean_field: true,
        number_field: 13,
        decimal_field: 3.14,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c77ncprg8soh6igug",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"42773719e3165f4af2ee0c51608ffed8"',
      "X-Runtime",
      "0.110164",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: null,
      name: "Evan",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810161,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: true,
        date_field: null,
        decimal_field: 3.14,
        number_field: 13,
        text_field: "testing here change",
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098nlldnsm4gpp6mpqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"25dac6fcfa9b1cbd26cee7375434b78b"',
      "X-Runtime",
      "0.093930",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        { field: "email", operator: "=", value: "testuser4885935125@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098rq5bqqqfdqhagd70",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.141296",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: null,
    name: null,
    custom_attributes: {
      text_field: null,
      boolean_field: null,
      number_field: null,
      decimal_field: null,
      date_field: null,
    },
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810163,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:23 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098jj3kde1psh8tnl6g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6a5c066c9fb96bf6e30d96c63c77f611"',
      "X-Runtime",
      "0.117109",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=a0072166-696b-42dd-a029-0e4aa00d20f6; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810163,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:23 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098mc2atil19qqredd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6a5c066c9fb96bf6e30d96c63c77f611"',
      "X-Runtime",
      "0.089841",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:23 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "158",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098kvfctulivsi1prc0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.092560",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810163,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:24 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "157",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009b2ej4rqp1ulef5irg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6a5c066c9fb96bf6e30d96c63c77f611"',
      "X-Runtime",
      "0.063217",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:24 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "156",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098jjfgboo6a03p6p1g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.052140",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:25 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810170",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "155",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "00016o3c8udog4q5ge60",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.108425",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=ecd29350-8c17-4ca2-9eb9-b0269602ddca; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:25 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810170",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "154",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "009b2ervukqtbjiddaog",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.152517",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=69759990-c09c-4309-87b2-600882082a21; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:26 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "153",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098p60tuu40i24eg9ug",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9cf8b743d07db59e76125573f1b1d6bc"',
      "X-Runtime",
      "0.072618",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:26 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "152",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009a3oehgh8j0font570",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.104986",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810165,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:26 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "151",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009ca0itubmrknunvne0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0563a26712860d9acec0263e6485d06e"',
      "X-Runtime",
      "0.064813",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:27 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "150",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098l099pcltfeuqlms0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.067110",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:27 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810170",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "149",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "00016oo4jvr7g1j4tpug",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.124959",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=cf161ce3-4a4b-43e4-9008-2acf2d4e1f69; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:28 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "148",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00016ori4iof0av54ksg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.067297",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:28 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "147",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098jkcvrkpsj14k2ri0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.054133",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags", { id: "4919479" })
  .once()
  .reply(200, { type: "tag", id: "4919479", name: "outside_grouparoo" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:28 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810170",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "146",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "009a3p0bumas6alju5m0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"2d8536c866a7bd059fc5a09808050343"',
    "X-Runtime",
    "0.148605",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=a1585c4d-b850-454b-8ce6-5db06e59cf73; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:29 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "145",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009a3p3uhjrficae2k4g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.136992",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810168,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919479", type: "tag", url: "/tags/4919479" },
        ],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:29 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "144",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098p6tbq29oj18s0g20",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f92f9f0a9fee4c679d4813dc3b6efcf7"',
      "X-Runtime",
      "0.087681",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:30 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810170",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "143",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000aijhuji0kjmjbiqvg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.041390",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags", { id: "4919480" })
  .once()
  .reply(200, { type: "tag", id: "4919480", name: "New_one" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:30 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810180",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "167",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "0098t8usghteta1tgc3g",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"7bc41f66d6759da20052f13584d84305"',
    "X-Runtime",
    "0.199020",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=ff27965a-2bf6-4957-b2e5-4eb3897240a2; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919472", name: "Test Group X" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4919480", name: "New_one" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098l154abp510tlhdhg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"023e6aa176a15af936b712a1c4554cff"',
      "X-Runtime",
      "0.261096",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009ca1mdbotfvcp9eit0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.128885",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810170,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [
          { id: "4919480", type: "tag", url: "/tags/4919480" },
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919479", type: "tag", url: "/tags/4919479" },
        ],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 3,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009b2gdcus3f31a1mqmg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6b6e0e1821b709959c860208da12fc11"',
      "X-Runtime",
      "0.080248",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009a3pqqjmbqf9sia1c0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.045835",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags/4919472")
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:32 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810180",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "162",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "009c7aagqlh9hrmh5keg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.145764",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=ec2df5cd-c83d-4447-a881-564b2fdc2053; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags/4919480")
  .once()
  .reply(200, { type: "tag", id: "4919480", name: "New_one" }, [
    "Date",
    "Tue, 05 Jan 2021 01:29:33 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810180",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "009c4gqmu21imd44ke60",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"7bc41f66d6759da20052f13584d84305"',
    "X-Runtime",
    "0.165312",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=584726e3-f761-42ef-84f9-6482f1c8dc78; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919479", name: "outside_grouparoo" }],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098l1pggn3mai0v1rb0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"c7b4786856087bdf67d08f63bbd5a561"',
      "X-Runtime",
      "0.072307",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser3503122683" },
        { field: "external_id", operator: "=", value: "testuser4885935125" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810098,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000aikfbp7g2ge8toag0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f84e4e2fd241f4a1eef031b3306745ad"',
      "X-Runtime",
      "0.118560",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser3503122683",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser3503122683",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810174,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:29:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810180",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "158",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098mel8r5o9qs0uajd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4d76c7895fbb76040eea76e6823f91b8"',
      "X-Runtime",
      "0.116910",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=7594439b-4b18-4cd2-8c19-9d22ee912f35; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser3503122683",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810174,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:30:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810240",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098o7b4lov1ish8h4kg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4d76c7895fbb76040eea76e6823f91b8"',
      "X-Runtime",
      "0.072467",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919479", name: "outside_grouparoo" }],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:30:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810240",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00017969epgvgpc1gfdg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"c7b4786856087bdf67d08f63bbd5a561"',
      "X-Runtime",
      "0.051877",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: { field: "external_id", operator: "=", value: "testuser7970226393" },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:30:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810240",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098lgtfi731agfe1e3g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.110120",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser7970226393" },
        { field: "email", operator: "=", value: "testuser7970226393@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:30:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810240",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0099ig15pe269gupneu0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.111468",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser7970226393",
    email: "testuser7970226393@demo.com",
    name: "Sally",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c13ce82a259bacb863ca",
      workspace_id: "l4wp0knn",
      external_id: "testuser7970226393",
      role: "user",
      email: "testuser7970226393@demo.com",
      phone: null,
      name: "Sally",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810236,
      updated_at: 1609810236,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:30:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810240",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009ap1oqt9io71ecs4pg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"36131f59513c6c56771dad547c1ea31f"',
      "X-Runtime",
      "0.208708",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=d5e27514-52c5-4cee-9800-1d7b3b245d34; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:30:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810240",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0099ig7usa73p7ushih0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.040402",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3c13ce82a259bacb863ca/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Tue, 05 Jan 2021 01:30:37 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810240",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "009b30b8oe4k4o8sg1jg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.125106",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=8b9f4aec-7272-457e-94e7-cbc46ff972be; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: { field: "external_id", operator: "=", value: "testuser7970226393" },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c13ce82a259bacb863ca",
          workspace_id: "l4wp0knn",
          external_id: "testuser7970226393",
          role: "user",
          email: "testuser7970226393@demo.com",
          phone: null,
          name: "Sally",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810236,
          updated_at: 1609810237,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ff3c13ce82a259bacb863ca/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c13ce82a259bacb863ca/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c13ce82a259bacb863ca/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:31:37 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810300",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000ajimgqd685f17jq2g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"5fa1e3d44ebde7d5f0c815b642e17be7"',
      "X-Runtime",
      "0.122410",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c13ce82a259bacb863ca")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c13ce82a259bacb863ca",
      workspace_id: "l4wp0knn",
      external_id: "testuser7970226393",
      role: "user",
      email: "testuser7970226393@demo.com",
      phone: null,
      name: "Sally",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810236,
      updated_at: 1609810237,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ff3c13ce82a259bacb863ca/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:31:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810300",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098m06l33imdrtse8r0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"07c9827842a8cd9edb402e9a4d6ab05b"',
      "X-Runtime",
      "0.190364",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c13ce82a259bacb863ca/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:31:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810300",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c43i3suha1scev3f0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.048552",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    role: "lead",
    email: "testuser8502159605@demo.com",
    name: "Alan",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c17acc2261256915dff9",
      workspace_id: "l4wp0knn",
      external_id: "c3c3978a-c9a5-482e-9607-2c400862dc3b",
      role: "lead",
      email: "testuser8502159605@demo.com",
      phone: null,
      name: "Alan",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810298,
      updated_at: 1609810298,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:31:39 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810300",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00017opjvrrh8itdpkn0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b3420f6f9ee06260a1c845fcd5d3cbed"',
      "X-Runtime",
      "0.205980",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=01fe9755-6a08-49ac-8cec-3e86ced43ca0; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "email", operator: "=", value: "testuser8502159605@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c17acc2261256915dff9",
          workspace_id: "l4wp0knn",
          external_id: "c3c3978a-c9a5-482e-9607-2c400862dc3b",
          role: "lead",
          email: "testuser8502159605@demo.com",
          phone: null,
          name: "Alan",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810298,
          updated_at: 1609810298,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c17acc2261256915dff9/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c17acc2261256915dff9/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c17acc2261256915dff9/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:40 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009cbfqnm36vt1tvo6bg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cbb354a8db2ce4163ac661d31540f489"',
      "X-Runtime",
      "0.120071",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c17acc2261256915dff9", {
    external_id: null,
    email: "testuser8502159605@demo.com",
    name: "Allison",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c17acc2261256915dff9",
      workspace_id: "l4wp0knn",
      external_id: "c3c3978a-c9a5-482e-9607-2c400862dc3b",
      role: "lead",
      email: "testuser8502159605@demo.com",
      phone: null,
      name: "Allison",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810298,
      updated_at: 1609810361,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:41 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098tameucdclmtd3nv0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"79b2aa40afbd773dc1b0c5e1b891b45c"',
      "X-Runtime",
      "0.103769",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:42 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c5v6jkadeaoj28t10",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.045826",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff3c17acc2261256915dff9/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Tue, 05 Jan 2021 01:32:44 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609810370",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "164",
    "X-Intercom-Version",
    "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "009cbgmhu8od3ej4utag",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.125868",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=9f0894c3-ef7c-4033-b7c0-1304b27cf03a; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c17acc2261256915dff9")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c17acc2261256915dff9",
      workspace_id: "l4wp0knn",
      external_id: "c3c3978a-c9a5-482e-9607-2c400862dc3b",
      role: "lead",
      email: "testuser8502159605@demo.com",
      phone: null,
      name: "Allison",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810298,
      updated_at: 1609810363,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ff3c17acc2261256915dff9/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c17acc2261256915dff9/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009a592nu2l01o0m8dh0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"c98a52d3ff69bba8470d2d88a2db0c64"',
      "X-Runtime",
      "0.075940",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c13ce82a259bacb863ca/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:46 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009b3vvksi8spoo9k2pg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.053697",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        { field: "external_id", operator: "=", value: "testuser3503122683" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser3503122683",
          role: "user",
          email: null,
          phone: null,
          name: null,
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810174,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098qn80fbra0nq7sorg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a0fb2509a65f7011500299bf8afe6198"',
      "X-Runtime",
      "0.172876",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810368,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:32:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810370",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c4kieq6dv13abprr0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"94610463444b709bb5e01d5a03e55cd1"',
      "X-Runtime",
      "0.093185",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=31f78f8d-efa2-4266-bb09-033091e35a2c; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810368,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:33:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810430",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000akinu57plg1rcft8g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"94610463444b709bb5e01d5a03e55cd1"',
      "X-Runtime",
      "0.053969",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        {
          field: "email",
          operator: "=",
          value: "testother3503122683@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: null,
          phone: null,
          name: null,
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810368,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:33:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810430",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098r68nbdm7i9ig64jg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e9547eb665e20891803d46a45ef10a0b"',
      "X-Runtime",
      "0.124208",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: null,
    email: "testother3503122683@demo.com",
    name: "No Ext",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testother3503122683@demo.com",
      phone: null,
      name: "No Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810429,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:33:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810430",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0099jvastodtieuj9no0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8ffa057f425882ca95613e41ed9b8445"',
      "X-Runtime",
      "0.143690",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=7b6c4920-4251-4a3a-8553-a992e6a57c67; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testother3503122683@demo.com",
      phone: null,
      name: "No Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810429,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:34:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810500",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009aqvobtkdjovua9qd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8ffa057f425882ca95613e41ed9b8445"',
      "X-Runtime",
      "0.058206",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "email", operator: "=", value: "testuser4885935125@demo.com" },
        {
          field: "email",
          operator: "=",
          value: "testother3503122683@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testother3503122683@demo.com",
          phone: null,
          name: "No Ext",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810429,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:34:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810500",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098nf659fnet9cdu4t0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"dd4bb8bf9f0785ec510a9094c6f4b7b6"',
      "X-Runtime",
      "0.117357",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: null,
    email: "testuser4885935125@demo.com",
    name: "New Email",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: null,
      name: "New Email",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810490,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:34:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810500",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009a67kbt48qg1lipsd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7e5225554bbadc83c1c04487deacc0b7"',
      "X-Runtime",
      "0.158575",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=46d76cc7-2758-4760-b4d5-251e7cd4b143; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser4885935125@demo.com",
      phone: null,
      name: "New Email",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810490,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:35:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810560",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098panc1l2icoh889d0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7e5225554bbadc83c1c04487deacc0b7"',
      "X-Runtime",
      "0.082530",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser4885935125" },
        { field: "email", operator: "=", value: "testuser7970226393@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c0b2b9b5d2b6fbe634fb",
          workspace_id: "l4wp0knn",
          external_id: "testuser4885935125",
          role: "user",
          email: "testuser4885935125@demo.com",
          phone: null,
          name: "New Email",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810098,
          updated_at: 1609810490,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "5ff3c13ce82a259bacb863ca",
          workspace_id: "l4wp0knn",
          external_id: "testuser7970226393",
          role: "user",
          email: "testuser7970226393@demo.com",
          phone: null,
          name: "Sally",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810236,
          updated_at: 1609810237,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ff3c13ce82a259bacb863ca/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c13ce82a259bacb863ca/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c13ce82a259bacb863ca/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 2,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:35:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810560",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098mhujqad85ldkvj5g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"fa9d73ef6672a00a36ba44f8f51ddcd1"',
      "X-Runtime",
      "0.126751",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff3c0b2b9b5d2b6fbe634fb", {
    external_id: "testuser4885935125",
    email: "testuser7970226393@demo.com",
    name: "Conflict",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser7970226393@demo.com",
      phone: null,
      name: "Conflict",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810552,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:35:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810560",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c7dc682dr8mhq6ga0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f44721aa839bc26b44ce560bd1ab5f82"',
      "X-Runtime",
      "0.166401",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=e81c7d46-e06e-4cee-b5b0-bd87f61c61b3; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c13ce82a259bacb863ca")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c13ce82a259bacb863ca",
      workspace_id: "l4wp0knn",
      external_id: "testuser7970226393",
      role: "user",
      email: "testuser7970226393@demo.com",
      phone: null,
      name: "Sally",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810236,
      updated_at: 1609810237,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ff3c13ce82a259bacb863ca/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c13ce82a259bacb863ca/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:36:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810620",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098r3jcs7olh34alkng",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"07c9827842a8cd9edb402e9a4d6ab05b"',
      "X-Runtime",
      "0.082091",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff3c0b2b9b5d2b6fbe634fb")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff3c0b2b9b5d2b6fbe634fb",
      workspace_id: "l4wp0knn",
      external_id: "testuser4885935125",
      role: "user",
      email: "testuser7970226393@demo.com",
      phone: null,
      name: "Conflict",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609810098,
      updated_at: 1609810552,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff3c0b2b9b5d2b6fbe634fb/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:36:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810620",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098ppp4j2vkue1odn40",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f44721aa839bc26b44ce560bd1ab5f82"',
      "X-Runtime",
      "0.074340",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser7970226393" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff3c13ce82a259bacb863ca",
          workspace_id: "l4wp0knn",
          external_id: "testuser7970226393",
          role: "user",
          email: "testuser7970226393@demo.com",
          phone: null,
          name: "Sally",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609810236,
          updated_at: 1609810237,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ff3c13ce82a259bacb863ca/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c13ce82a259bacb863ca/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff3c13ce82a259bacb863ca/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:36:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810620",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "009c6gcdib9d3qud8g80",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"5fa1e3d44ebde7d5f0c815b642e17be7"',
      "X-Runtime",
      "0.121788",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "5ff3c13ce82a259bacb863ca",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Tue, 05 Jan 2021 01:37:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609810680",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "e27f83f4d69c7019b6b9ba5eca06404b1ec933bb",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0098t204uotq93rpajk0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.081579",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
