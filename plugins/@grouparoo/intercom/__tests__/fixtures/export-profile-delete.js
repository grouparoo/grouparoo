const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[5499886571,1423196321,7513546239,174748749,4647395251,1143764777,8365575957,1473432699,3445463979,9739912173,5476550074,8569709872,2454380288,1627671476,3735288720,7645965467,807539860,6265168745,8413442,106219811,2223888907,9345160523,261671325,3981630263,2898209287,6146008607,1231916886,4534310059,2457464138,9091232577,6234252795,3310578036,7194686472,8496139297,6303351823,9762972001,8321527901,7784843349,3174019171,8038300702,6878634898,4342686025,8188965387,8111237813,8066112773,5474243824,3697722092,2961153505,5703941021,4273975736,119883997,4844341363,7630831879,549778571,9272992795,8805092411,7773794880,887509811,521746710,6854015236,6015171090,6694967289,2394644095,4181927428,7928099169,2506570675,827276259,6599383344,3657791467,141354756,8851716203,872447450,3048594867,5223492224,971635372,2669161377,4058908500,7170190308,510800915,446006888,523406318,6440350574,4097894138,3387293342,1893361872,3299768206,8562935288,8115204874,6443481074,1205949138,4268398095,4309710402,8852848864,9543610180,6968446543,3940333290,8778660547,8413948206,5974654774,4611652165]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db2ece063b9319ed80793",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.3460679863",
          role: "user",
          email: "testuser2.3460679863@demo.com",
          phone: null,
          name: "Back User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611510508,
          updated_at: 1611511001,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
            url: "/contacts/600db2ece063b9319ed80793/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db2ece063b9319ed80793/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db2ece063b9319ed80793/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "600db45ca17d55127b7f4c26",
          workspace_id: "l4wp0knn",
          external_id: "45b370f1-fa1e-4497-8540-5a225705f266",
          role: "lead",
          email: "testuser1.3186560474@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611510876,
          updated_at: 1611510876,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600db45ca17d55127b7f4c26/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db45ca17d55127b7f4c26/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db45ca17d55127b7f4c26/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 2,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:46 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002auuagd3sso6irtnrg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4adfee1cde13377e9c6fefc16b96513a"',
      "X-Runtime",
      "0.299674",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600db2ece063b9319ed80793/archive", {})
  .once()
  .reply(
    200,
    { id: "600db2ece063b9319ed80793", object: "contact", archived: true },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002a7fnjra8m0evfhreg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"46d0a3f575f6f1c94192ba3bc27472de"',
      "X-Runtime",
      "0.066166",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600db45ca17d55127b7f4c26/archive", {})
  .once()
  .reply(
    200,
    { id: "600db45ca17d55127b7f4c26", object: "contact", archived: true },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002aptlsl7jvfgpf7d1g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b1f292f4301853f919ecfaaa34f98684"',
      "X-Runtime",
      "0.056107",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.4844341363@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "158",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002a2poupvati8vmbreg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.344013",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.4844341363@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "157",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ac57hmgq0lt5pm8bg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.067568",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "156",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0007keicg35cn74i9jj0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.128308",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.4844341363@demo.com",
    name: "A Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600db559d680348c91c892b0",
      workspace_id: "l4wp0knn",
      external_id: "6ed4a38e-3ab0-4c60-a572-c65b46a990a1",
      role: "lead",
      email: "testuser1.4844341363@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611511129,
      updated_at: 1611511129,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600db559d680348c91c892b0/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600db559d680348c91c892b0/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600db559d680348c91c892b0/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "155",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002auv05qtf9b69jmk70",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"df2c488fafda7d62c57c9c808c8a1780"',
      "X-Runtime",
      "0.194003",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=0918e5d1-d84c-456a-b747-03f76f207a52; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 17:58:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511132",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "154",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002a2q8huvkiq7oe09ig",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.050881",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600db559d680348c91c892b0/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Sun, 24 Jan 2021 17:58:50 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611511142",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "167",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "0007kesuiike7ng654eg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.112012",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=79d66a51-8c43-4b3e-a05b-133c99a24393; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600db559d680348c91c892b0/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Sun, 24 Jan 2021 17:58:50 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611511142",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "166",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "0007kf00jo1imusjivn0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.210777",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=80826c5d-8a87-4922-b18b-2716b9668682; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.4844341363@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db559d680348c91c892b0",
          workspace_id: "l4wp0knn",
          external_id: "6ed4a38e-3ab0-4c60-a572-c65b46a990a1",
          role: "lead",
          email: "testuser1.4844341363@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611511129,
          updated_at: 1611511130,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/600db559d680348c91c892b0/tags",
            total_count: 2,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db559d680348c91c892b0/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db559d680348c91c892b0/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00046h71u57h0c5ic4v0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f1a5a400329e0ca2b555739b7014a791"',
      "X-Runtime",
      "0.109122",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db559d680348c91c892b0")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600db559d680348c91c892b0",
      workspace_id: "l4wp0knn",
      external_id: "6ed4a38e-3ab0-4c60-a572-c65b46a990a1",
      role: "lead",
      email: "testuser1.4844341363@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611511129,
      updated_at: 1611511130,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/600db559d680348c91c892b0/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600db559d680348c91c892b0/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600db559d680348c91c892b0/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002bikn6fjj21a0h07e0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8f9923f4d561ec3382f1db75de2915b9"',
      "X-Runtime",
      "0.070331",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db559d680348c91c892b0/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029q9b1n2mm09ncjco0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9cf8b743d07db59e76125573f1b1d6bc"',
      "X-Runtime",
      "0.075179",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.7630831879@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029q9eijrhrs8t9am5g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.090565",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.7630831879" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.7630831879@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029qc7bb0qpjmmpe6rg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.111663",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ahnsevcvcf8edn39g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.165244",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.7630831879",
    email: "testuser2.7630831879@demo.com",
    name: "A User",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600db5d5d680341d74d08786",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.7630831879",
      role: "user",
      email: "testuser2.7630831879@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611511253,
      updated_at: 1611511253,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600db5d5d680341d74d08786/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600db5d5d680341d74d08786/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600db5d5d680341d74d08786/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:00:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002avtc3upca1uefn590",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"07ed2e7c4d08e6c9495df92c5723166f"',
      "X-Runtime",
      "0.222214",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=673c0089-e8db-48ad-aa37-8c84ce913ea9; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.7630831879@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db5d5d680341d74d08786",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.7630831879",
          role: "user",
          email: "testuser2.7630831879@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611511253,
          updated_at: 1611511253,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600db5d5d680341d74d08786/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db5d5d680341d74d08786/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db5d5d680341d74d08786/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:02:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511382",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002bjil3f4vd6nts8aeg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f8b0d86d800854b1888c9b75944d5a2e"',
      "X-Runtime",
      "0.101133",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db5d5d680341d74d08786")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600db5d5d680341d74d08786",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.7630831879",
      role: "user",
      email: "testuser2.7630831879@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611511253,
      updated_at: 1611511253,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600db5d5d680341d74d08786/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600db5d5d680341d74d08786/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600db5d5d680341d74d08786/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:02:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511382",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029vusodkeg8e612ck0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"07ed2e7c4d08e6c9495df92c5723166f"',
      "X-Runtime",
      "0.182623",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db5d5d680341d74d08786/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Sun, 24 Jan 2021 18:02:55 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611511382",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "165",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002a9c8sot278cojk5eg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.059467",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.7630831879" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.7630831879@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db5d5d680341d74d08786",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.7630831879",
          role: "user",
          email: "testuser2.7630831879@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611511253,
          updated_at: 1611511253,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600db5d5d680341d74d08786/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db5d5d680341d74d08786/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db5d5d680341d74d08786/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:02:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511382",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ae1gmrb6ndem95aag",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f8b0d86d800854b1888c9b75944d5a2e"',
      "X-Runtime",
      "0.084129",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:02:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511382",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ba5pac6mbhgnsb2s0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.051929",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600db5d5d680341d74d08786")
  .once()
  .reply(
    200,
    { id: "600db5d5d680341d74d08786", object: "contact", deleted: true },
    [
      "Date",
      "Sun, 24 Jan 2021 18:02:56 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511382",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002b0r8vpkq3d0oh80b0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4732da12b3914d9ddce2b16c643b6d8c"',
      "X-Runtime",
      "0.307711",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=b8788d57-e2c7-42fe-b140-5f556c1a3689; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db5d5d680341d74d08786")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "002bfonvtkm7oc6nrdvg",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:04:56 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511502",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002bfonvtkm7oc6nrdvg",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.048710",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.7630831879@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:04:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511502",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002a0sqes2gg8tvhfkug",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.134903",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.7630831879",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:04:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511502",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002b1othhkhrvf0tke20",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.100099",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testother1b.6854015236@demo.com",
        },
        {
          field: "email",
          operator: "=",
          value: "testuser1.4844341363@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db559d680348c91c892b0",
          workspace_id: "l4wp0knn",
          external_id: "6ed4a38e-3ab0-4c60-a572-c65b46a990a1",
          role: "lead",
          email: "testuser1.4844341363@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611511129,
          updated_at: 1611511130,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/600db559d680348c91c892b0/tags",
            total_count: 2,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db559d680348c91c892b0/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db559d680348c91c892b0/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:04:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511502",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002b6em6srij3u24b6d0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f1a5a400329e0ca2b555739b7014a791"',
      "X-Runtime",
      "0.084728",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:04:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511502",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002b6eovpni3c5okb5p0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.050346",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600db559d680348c91c892b0/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Sun, 24 Jan 2021 18:04:58 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611511502",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "162",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002a0t6icdc984fu8kug",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.165356",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=deadda0e-2c12-4dd2-9ec6-008b5ad36007; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600db559d680348c91c892b0/tags/4919472")
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Sun, 24 Jan 2021 18:04:59 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611511502",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002a0takbs86s68g8n10",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.169699",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=b777feee-9a92-431e-bbb2-0e0f5b72393c; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600db559d680348c91c892b0")
  .once()
  .reply(
    200,
    { id: "600db559d680348c91c892b0", object: "contact", deleted: true },
    [
      "Date",
      "Sun, 24 Jan 2021 18:04:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511502",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029s5qhi7hon4aqhq7g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7d19dcc04501b98b677bde424c15928b"',
      "X-Runtime",
      "0.225951",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=7494414e-7c65-4e4c-90ed-240f1777dcff; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db559d680348c91c892b0")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "002a1qsbo4tj236ilgd0",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:07:00 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002a1qsbo4tj236ilgd0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.061424",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.4844341363@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:07:00 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002bleqe837a3fer8efg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.069565",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testother1b.6854015236@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:07:00 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002bc1kj4us4vplbcdjg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.070830",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.4844341363@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:07:01 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00049bji1pnrsjh0aks0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.090168",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:07:01 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029t6agvnjs00o9dud0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.164747",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.4844341363@demo.com",
    name: "Back Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600db7469e6a712fddf8898e",
      workspace_id: "l4wp0knn",
      external_id: "ff36bdf4-503f-4caf-9461-1ae42d1dbea7",
      role: "lead",
      email: "testuser1.4844341363@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611511622,
      updated_at: 1611511622,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600db7469e6a712fddf8898e/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600db7469e6a712fddf8898e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600db7469e6a712fddf8898e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:07:02 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002blf6vc62rs4l57720",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"ddb92cb896608531bf2205c1208fb9f9"',
      "X-Runtime",
      "0.260832",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=474a2b86-e0d5-43e6-9a6c-867b91e31dbe; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.4844341363@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db7469e6a712fddf8898e",
          workspace_id: "l4wp0knn",
          external_id: "ff36bdf4-503f-4caf-9461-1ae42d1dbea7",
          role: "lead",
          email: "testuser1.4844341363@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611511622,
          updated_at: 1611511622,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600db7469e6a712fddf8898e/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db7469e6a712fddf8898e/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db7469e6a712fddf8898e/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:09:02 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002b3kpdueojusmgpsu0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"fdccb6a850457266cddb7bce2f9dc463"',
      "X-Runtime",
      "0.078586",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db7469e6a712fddf8898e")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600db7469e6a712fddf8898e",
      workspace_id: "l4wp0knn",
      external_id: "ff36bdf4-503f-4caf-9461-1ae42d1dbea7",
      role: "lead",
      email: "testuser1.4844341363@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611511622,
      updated_at: 1611511622,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600db7469e6a712fddf8898e/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600db7469e6a712fddf8898e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600db7469e6a712fddf8898e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:09:03 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0004a9agsmruonta9pe0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"ddb92cb896608531bf2205c1208fb9f9"',
      "X-Runtime",
      "0.071967",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.7630831879" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.7630831879@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:09:03 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002agrc2rr2m9k53m9o0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.201327",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:09:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029u45mhdjgfnbl5n5g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.157138",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.7630831879",
    email: "testuser2.7630831879@demo.com",
    name: "Back User",
    role: "user",
  })
  .once()
  .reply(
    409,
    {
      type: "error.list",
      request_id: "002b8arl6mvq77s8gug0",
      errors: [
        {
          code: "conflict",
          message:
            "An archived contact matching those details already exists with id=600db5d5d680341d74d08786",
        },
      ],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:09:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "409 Conflict",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002b8arl6mvq77s8gug0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.071759",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600db5d5d680341d74d08786/unarchive", {})
  .once()
  .reply(
    500,
    {
      type: "error.list",
      request_id: "0029u1lra4r9fq4pbi5g",
      errors: [{ code: "server_error", message: "Server Error" }],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:09:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "500 Internal Server Error",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029u1lra4r9fq4pbi5g",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.108055",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600db5d5d680341d74d08786")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "0029uv3afodg7a2ejb3g",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:11:05 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511872",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029uv3afodg7a2ejb3g",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.064633",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.7630831879@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:11:05 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511872",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0029v1rptdv5osf8g650",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.206089",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.7630831879",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:11:06 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511872",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ad45ojjc5v9s7v76g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.077860",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600db7469e6a712fddf8898e",
          workspace_id: "l4wp0knn",
          external_id: "ff36bdf4-503f-4caf-9461-1ae42d1dbea7",
          role: "lead",
          email: "testuser1.4844341363@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611511622,
          updated_at: 1611511622,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600db7469e6a712fddf8898e/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600db7469e6a712fddf8898e/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600db7469e6a712fddf8898e/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 24 Jan 2021 18:11:06 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511872",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002bs00guqtrl9d4c8kg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7eb55db1fbb7edcc7b2b9790aafc4d5e"',
      "X-Runtime",
      "0.078130",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600db7469e6a712fddf8898e/archive", {})
  .once()
  .reply(
    200,
    { id: "600db7469e6a712fddf8898e", object: "contact", archived: true },
    [
      "Date",
      "Sun, 24 Jan 2021 18:11:07 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611511872",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ahpghpmsqmjo50460",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"1d05276c585ec93a1decd1e77759d779"',
      "X-Runtime",
      "0.164274",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=bcf300ed-f569-4c02-862b-464ab0b2b7ef; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
