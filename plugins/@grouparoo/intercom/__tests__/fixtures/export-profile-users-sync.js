const nock = require("nock");

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c8237543ab1b767ff3bf",
          workspace_id: "l4wp0knn",
          external_id: "testuser9204097621",
          role: "user",
          email: null,
          phone: null,
          name: null,
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746467,
          updated_at: 1609746541,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff2c8237543ab1b767ff3bf/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c8237543ab1b767ff3bf/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c8237543ab1b767ff3bf/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:49:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746590",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pmoc48inqj3vfijcg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e83c39096fa17ceb6ded1166562bfb13"',
      "X-Runtime",
      "0.107276",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff2c8237543ab1b767ff3bf/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff2c8237543ab1b767ff3bf", object: "contact", archived: true },
    [
      "Date",
      "Mon, 04 Jan 2021 07:49:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746590",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008rje45n1826p6e1lt0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3159f9ce0c28372218102baac73bf43f"',
      "X-Runtime",
      "0.169252",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=3c43d5c8-fd5b-4614-a271-52523cd3eb98; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: { field: "external_id", operator: "=", value: "testuser5563248329" },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:49:46 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746590",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008po5gadpul9l6g8ff0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.104595",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
        { field: "email", operator: "=", value: "testuser5563248329@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:49:46 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746590",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pftmjrmt56uv46trg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.079126",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    role: "user",
    external_id: "testuser5563248329",
    email: "testuser5563248329@demo.com",
    name: "Brian",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "testuser5563248329@demo.com",
      phone: null,
      name: "Brian",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746587,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:49:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746590",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008t4u5ptvdsrstnlvo0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3db51bf0bfd777277f59a0172c16a1f4"',
      "X-Runtime",
      "0.282654",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=88f9d8ff-8343-4f09-bb9b-3e1223676833; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: { field: "external_id", operator: "=", value: "testuser5563248329" },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746650",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pgcjeoglsik7hicrg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.122473",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "testuser5563248329@demo.com",
      phone: null,
      name: "Brian",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746587,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746650",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008svrr3o536e6tv715g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3db51bf0bfd777277f59a0172c16a1f4"',
      "X-Runtime",
      "0.059201",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
        { field: "email", operator: "=", value: "testuser5563248329@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746650",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008rtrpcaddq7baqcq3g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.263136",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: "testuser5563248329@demo.com",
    name: "John",
    phone: "+16505551234",
    custom_attributes: { text_field: "testing here", date_field: 1597870204 },
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "testuser5563248329@demo.com",
      phone: "+16505551234",
      name: "John",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746649,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746650",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0001h0fsqg4nv42almv0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a94a90b13f97ae714adb16e51f2b6cad"',
      "X-Runtime",
      "0.104734",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "testuser5563248329@demo.com",
      phone: "+16505551234",
      name: "John",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746649,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746650",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pkj233o4ug8iic4kg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a94a90b13f97ae714adb16e51f2b6cad"',
      "X-Runtime",
      "0.084222",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
        { field: "email", operator: "=", value: "testuser5563248329@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746650",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pn83jrtgenddbrbbg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.082809",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: "testuser5563248329@demo.com",
    name: "Evan",
    phone: null,
    custom_attributes: {
      text_field: "testing here change",
      date_field: null,
      boolean_field: true,
      number_field: 13,
      decimal_field: 3.14,
    },
    unknown_junk: "ok",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "testuser5563248329@demo.com",
      phone: null,
      name: "Evan",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746650,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        text_field: "testing here change",
        date_field: null,
        boolean_field: true,
        number_field: 13,
        decimal_field: 3.14,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008svsbrv5k9iuhli2f0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"41ab5d65de53e6118c7c4624a87caefa"',
      "X-Runtime",
      "0.279659",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "testuser5563248329@demo.com",
      phone: null,
      name: "Evan",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746650,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: true,
        date_field: null,
        decimal_field: 3.14,
        number_field: 13,
        text_field: "testing here change",
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pgdbjolu9cev0jsl0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9ab16de38055d4906b74cb5dcbd8aafd"',
      "X-Runtime",
      "0.088494",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
        { field: "email", operator: "=", value: "testuser5563248329@demo.com" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008suglfom8v2bi21o1g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.079446",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: null,
    name: null,
    custom_attributes: {
      text_field: null,
      boolean_field: null,
      number_field: null,
      decimal_field: null,
      date_field: null,
    },
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746651,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008qv5sqtimmmkna9id0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b727759e640ae9688a3f7406bab04f0b"',
      "X-Runtime",
      "0.122565",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=2680eeb4-f44c-4434-873a-35a9d5dcdf01; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746651,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pkjlvjl2s7p3cv600",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b727759e640ae9688a3f7406bab04f0b"',
      "X-Runtime",
      "0.084811",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pn8o7oldccnj1p490",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.077725",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746652,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008qv664rgkouj1unrd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"5c3fd70b1feb788e23dbbfd7a27d6f3b"',
      "X-Runtime",
      "0.094892",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008rtsu6t5gva353pfr0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.047106",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff2c89b8d424c9ef353bab2/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Mon, 04 Jan 2021 07:50:53 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746660",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "159",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008suh7grlh4mt8bljfg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.131583",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=39f21c91-cdaf-447e-bf81-f95bc59f3222; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff2c89b8d424c9ef353bab2/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Mon, 04 Jan 2021 07:50:54 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746660",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "158",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008qdd55b0orf9kt4mv0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.165683",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=c909cc82-080d-4416-99d2-e0b11cce23cc; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "157",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008svtdmpf6tr6hbe2s0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9cf8b743d07db59e76125573f1b1d6bc"',
      "X-Runtime",
      "0.057426",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "156",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008qddbpv8tkcffef450",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.117592",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746655,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "155",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pn9egoq1dsebck6jg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8502e41d845bbe0f73200d2e4e4420f4"',
      "X-Runtime",
      "0.093946",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "154",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008svtmqppkvpci1e6u0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.049014",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ff2c89b8d424c9ef353bab2/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Mon, 04 Jan 2021 07:50:56 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746660",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "153",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008suhr2tkrbdm97d6g0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.172178",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=dc4ad65f-6112-4ac5-bb96-e3dcc6d9673e; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:56 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "152",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008phrdtvms9r9qrtjg0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.080604",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:56 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "151",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pkks0phnti9rs44hg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.048916",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff2c89b8d424c9ef353bab2/tags", { id: "4919479" })
  .once()
  .reply(200, { type: "tag", id: "4919479", name: "outside_grouparoo" }, [
    "Date",
    "Mon, 04 Jan 2021 07:50:57 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746660",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "150",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008svu20obloi00me7j0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"2d8536c866a7bd059fc5a09808050343"',
    "X-Runtime",
    "0.154668",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=61873286-fb28-4bae-8298-69a096917353; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "149",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008t5fd4ujgg6humb430",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.105609",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746658,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919479", type: "tag", url: "/tags/4919479" },
        ],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "148",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008qde3p9qkui8nt2h50",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8c7c6e94ac0f23ad04e5f2c85185d1a2"',
      "X-Runtime",
      "0.099831",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "147",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pf30jcuf1kh7cgvk0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.055329",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff2c89b8d424c9ef353bab2/tags", { id: "4919480" })
  .once()
  .reply(200, { type: "tag", id: "4919480", name: "New_one" }, [
    "Date",
    "Mon, 04 Jan 2021 07:50:58 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746660",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "146",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008pj5rrukvsqmp6rh10",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"7bc41f66d6759da20052f13584d84305"',
    "X-Runtime",
    "0.226534",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=7d614ab3-bae9-4355-bf6c-c7751522cbcb; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919472", name: "Test Group X" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4919480", name: "New_one" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "145",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pnacm93fiu5p24j90",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"023e6aa176a15af936b712a1c4554cff"',
      "X-Runtime",
      "0.070407",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser5563248329" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff2c89b8d424c9ef353bab2",
          workspace_id: "l4wp0knn",
          external_id: "testuser5563248329",
          role: "user",
          email: "testuser5563248329@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1609746587,
          updated_at: 1609746587,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "144",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008suilrvaukg1jestl0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7c406b49a9d36eaec8a0f7d3d64e61e5"',
      "X-Runtime",
      "0.076890",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff2c89b8d424c9ef353bab2", {
    role: "user",
    external_id: "testuser5563248329",
    email: null,
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff2c89b8d424c9ef353bab2",
      workspace_id: "l4wp0knn",
      external_id: "testuser5563248329",
      role: "user",
      email: "",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1609746587,
      updated_at: 1609746659,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {
        boolean_field: null,
        date_field: null,
        decimal_field: null,
        number_field: null,
        text_field: null,
      },
      tags: {
        type: "list",
        data: [
          { id: "4919480", type: "tag", url: "/tags/4919480" },
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919479", type: "tag", url: "/tags/4919479" },
        ],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/tags",
        total_count: 3,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff2c89b8d424c9ef353bab2/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:50:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746660",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "143",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008rtuigpcdjkt0v2thg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"89dbe00c6b4626ac682ca99ee05b9fbd"',
      "X-Runtime",
      "0.086615",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:51:00 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008pgfl2bmvspq4ul3lg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.057302",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ff2c89b8d424c9ef353bab2/tags/4919472")
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Mon, 04 Jan 2021 07:51:00 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746670",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "166",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008pklona18at69s5sng",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.350552",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=7b51c2f8-169b-4eb1-8ce9-5442728dbbfd; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ff2c89b8d424c9ef353bab2/tags/4919480")
  .once()
  .reply(200, { type: "tag", id: "4919480", name: "New_one" }, [
    "Date",
    "Mon, 04 Jan 2021 07:51:01 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1609746670",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "165",
    "X-Intercom-Version",
    "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "008rtuson3ubd3riqf00",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"7bc41f66d6759da20052f13584d84305"',
    "X-Runtime",
    "0.167157",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=ae041b09-f32e-4f1e-b1e6-a45ef2cebf1b; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0ff4c5c01112bbd61",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff2c89b8d424c9ef353bab2/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919479", name: "outside_grouparoo" }],
    },
    [
      "Date",
      "Mon, 04 Jan 2021 07:51:01 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1609746670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "93e50d2790ba8dde12db3c35cc0b0c6499b13495",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "008rtv04hm2hqu0ek71g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"c7b4786856087bdf67d08f63bbd5a561"',
      "X-Runtime",
      "0.076112",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0ff4c5c01112bbd61",
    ]
  );
