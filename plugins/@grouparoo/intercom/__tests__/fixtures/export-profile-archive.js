const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[9106176470,1909305502,3012829519,3239160995,412542918,8261948282,1254364219,67716772,2036275963,3727783462,9631543893,9453310201,4809343216,7499449507,6914797377,3788965260,6337662281,5629688886,889860563,2464450270,7966701844,2448996055,2005961863,1066292629,3269436934,6347005266,4171384102,251326332,7039828116,1261355365,3311750593,4582989224,6145975276,8881300739,3465023220,9409236064,764721314,7793919019,5413706742,1400551119,9126600328,2506846833,8721387938,8086942808,642850399,4009357363,7612101677,1841159515,4317615644,5949983419,5260570572,1242573266,6222919253,8555003829,6592147069,4132296562,7607555406,748937987,5148554230,6925306476,6669595949,3188211071,6404478963,3902431211,6876737400,4664860537,3707748174,3793534378,3517748591,6757729760,124021721,8413177097,7374184617,3723218687,2023280636,2752120694,7733008489,1342647829,8125932475,6788237539,7517476964,3041516693,6703334031,1402909483,6515082337,5030775097,1292109522,2835911406,4334505830,6385691785,4294122011,7530328101,6017014044,3695671578,8118594936,3681804905,400129089,7259274635,4168084679,7328132879]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:43:43 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ijtndnr0q6uimtij0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"41cd78d391830501a5b43fe16cdba159"',
      "X-Runtime",
      "0.071509",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.2506846833@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:43:44 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00028m9bu5baiqj3f3ug",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.068390",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.2506846833@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:43:44 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ijtt6j4v6uga0rlo0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.070476",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:43:44 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002h9ndt44nnjv9uqfpg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.131466",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.2506846833@demo.com",
    name: "A Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e30610fb2249b089b25df",
      workspace_id: "l4wp0knn",
      external_id: "23d96c3e-5497-435c-968c-6fa227064e45",
      role: "lead",
      email: "testuser1.2506846833@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611542625,
      updated_at: 1611542625,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600e30610fb2249b089b25df/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e30610fb2249b089b25df/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e30610fb2249b089b25df/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:43:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002h9nh2hia67glvg300",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"10733fa98b3f06c2fd20a307b2585464"',
      "X-Runtime",
      "0.221623",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=c28ea24d-5bd2-40c4-a6df-8a645d117558; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:43:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542632",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002if8ifhrv32h8srsv0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.048876",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30610fb2249b089b25df/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Mon, 25 Jan 2021 02:43:46 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611542632",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002h9l29ie6g6akol0dg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.140790",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=7a57e104-2ad2-4e31-a4ce-8b4782521b6e; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30610fb2249b089b25df/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Mon, 25 Jan 2021 02:43:46 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611542632",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002i13dcri3d2sfook80",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.254919",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=ff35a21d-be40-4d97-9095-07850483ab5b; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30610fb2249b089b25df/tags", { id: "4983293" })
  .once()
  .reply(200, { type: "tag", id: "4983293", name: "extra_one" }, [
    "Date",
    "Mon, 25 Jan 2021 02:43:47 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611542632",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "159",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002i5qr6oof71n7kmmp0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"3a46338296e3967a82b94b94acec9537"',
    "X-Runtime",
    "0.210948",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=5887e5d2-be7a-4a4f-8eff-2c7bfebc8fc5; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.2506846833@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e30610fb2249b089b25df",
          workspace_id: "l4wp0knn",
          external_id: "23d96c3e-5497-435c-968c-6fa227064e45",
          role: "lead",
          email: "testuser1.2506846833@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611542625,
          updated_at: 1611542627,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4983293", type: "tag", url: "/tags/4983293" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/600e30610fb2249b089b25df/tags",
            total_count: 3,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e30610fb2249b089b25df/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e30610fb2249b089b25df/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002j7jbtvp9d8ds9gd90",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"463b16587dd28ed7f6a2cabde2b6bf22"',
      "X-Runtime",
      "0.077423",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30610fb2249b089b25df")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e30610fb2249b089b25df",
      workspace_id: "l4wp0knn",
      external_id: "23d96c3e-5497-435c-968c-6fa227064e45",
      role: "lead",
      email: "testuser1.2506846833@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611542625,
      updated_at: 1611542627,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4983293", type: "tag", url: "/tags/4983293" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/600e30610fb2249b089b25df/tags",
        total_count: 3,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e30610fb2249b089b25df/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e30610fb2249b089b25df/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002htcrr1p0jdbjs1q2g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"bc115776982812e6e75d0968bf2cf4e1"',
      "X-Runtime",
      "0.058229",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30610fb2249b089b25df/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
        { type: "tag", id: "4983293", name: "extra_one" },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0001bvc5tp1mmh8beg50",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b83616c7f2d399489468e6d4f532d1a0"',
      "X-Runtime",
      "0.058448",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.8721387938@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00029kodvneho2n8uls0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.059825",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.8721387938" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.8721387938@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002htd4bjk0s5dr963t0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.066489",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542752",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00029ktkv1sbqobac1h0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.240441",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.8721387938",
    email: "testuser2.8721387938@demo.com",
    name: "A User",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e30ded68034b33aca63d7",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.8721387938",
      role: "user",
      email: "testuser2.8721387938@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611542750,
      updated_at: 1611542750,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:45:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542762",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ig6uhnc6pf3o39pc0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8454c28dabcb59dfae7fe303804502ce"',
      "X-Runtime",
      "0.224580",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=a8ff14ca-99ba-44b0-b658-d84c99cba0b4; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.8721387938@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e30ded68034b33aca63d7",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.8721387938",
          role: "user",
          email: "testuser2.8721387938@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611542750,
          updated_at: 1611542750,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:47:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542882",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002i7m9cav64ot8dmtq0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4265897df7c75817dee126fdb36358ea"',
      "X-Runtime",
      "0.084174",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30ded68034b33aca63d7")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e30ded68034b33aca63d7",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.8721387938",
      role: "user",
      email: "testuser2.8721387938@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611542750,
      updated_at: 1611542750,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:47:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542882",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ilq3uaog5grr336k0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8454c28dabcb59dfae7fe303804502ce"',
      "X-Runtime",
      "0.065570",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30ded68034b33aca63d7/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Mon, 25 Jan 2021 02:47:51 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611542882",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "165",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "0002ailftp230uk7cv80",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.053068",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.8721387938" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.8721387938@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e30ded68034b33aca63d7",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.8721387938",
          role: "user",
          email: "testuser2.8721387938@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611542750,
          updated_at: 1611542750,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:47:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542882",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hg8ksv9rt7p87dqn0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4265897df7c75817dee126fdb36358ea"',
      "X-Runtime",
      "0.096111",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:47:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542882",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hbjq59t9n0unr2nrg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.056526",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30ded68034b33aca63d7/archive", {})
  .once()
  .reply(
    200,
    { id: "600e30ded68034b33aca63d7", object: "contact", archived: true },
    [
      "Date",
      "Mon, 25 Jan 2021 02:47:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611542882",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002iv4qcn4n8k3j8lmn0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cddbdae8f45d7af5d3b064ad25b35b72"',
      "X-Runtime",
      "0.133990",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=bc064600-f1c0-4314-a579-f36a3628ce57; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30ded68034b33aca63d7")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "002hcemj2uev3fa8pca0",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:49:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543002",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hcemj2uev3fa8pca0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.051517",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.8721387938@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:49:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543002",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ircvhl8hsqlfkkg60",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.087118",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.8721387938",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:49:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543002",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hh6fgnvhg2mq9i800",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.086328",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testother1b.5949983419@demo.com",
        },
        {
          field: "email",
          operator: "=",
          value: "testuser1.2506846833@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e30610fb2249b089b25df",
          workspace_id: "l4wp0knn",
          external_id: "23d96c3e-5497-435c-968c-6fa227064e45",
          role: "lead",
          email: "testuser1.2506846833@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611542625,
          updated_at: 1611542627,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4983293", type: "tag", url: "/tags/4983293" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/600e30610fb2249b089b25df/tags",
            total_count: 3,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e30610fb2249b089b25df/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e30610fb2249b089b25df/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:49:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543002",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hchld8licc5fvsf7g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"463b16587dd28ed7f6a2cabde2b6bf22"',
      "X-Runtime",
      "0.086293",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:49:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543002",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hcf2clg84gbhe3chg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.057323",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600e30610fb2249b089b25df/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Mon, 25 Jan 2021 02:49:55 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611543002",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "162",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002hh6of506812l5f250",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.169138",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=9be6b642-7f67-4052-9f22-c9dd0655621b; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600e30610fb2249b089b25df/tags/4919472")
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Mon, 25 Jan 2021 02:49:55 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611543002",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002id205uto1joq8qbtg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.159730",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=d60b06ee-2cf4-43e8-ad02-7922e1e391d2; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/600e30610fb2249b089b25df/tags/4983293")
  .once()
  .reply(200, { type: "tag", id: "4983293", name: "extra_one" }, [
    "Date",
    "Mon, 25 Jan 2021 02:49:56 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611543002",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002hlu42rhnvcinskqtg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"3a46338296e3967a82b94b94acec9537"',
    "X-Runtime",
    "0.180611",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=82357d9e-5e39-4eab-b9ab-d03046879ec3; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30610fb2249b089b25df/archive", {})
  .once()
  .reply(
    200,
    { id: "600e30610fb2249b089b25df", object: "contact", archived: true },
    [
      "Date",
      "Mon, 25 Jan 2021 02:49:56 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543002",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ii33ecvepfel73o00",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e0302450daf15c2d230051f0c9161590"',
      "X-Runtime",
      "0.151881",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=a2e21874-002e-480f-a276-5277b8803465; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30610fb2249b089b25df")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "0002cektokk3c0dnn2g0",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:51:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543122",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0002cektokk3c0dnn2g0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.108031",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.2506846833@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:51:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543122",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0002censsak1g4g4p570",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.066216",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testother1b.5949983419@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:51:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543122",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002i4rb3co0jvcpu0bqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.060545",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.2506846833@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:51:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543122",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002j5olaju8mih9uuk00",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.067767",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:51:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543122",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hdfuvf75n1182us2g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.137221",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.2506846833@demo.com",
    name: "Back Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e324e5cf1e4f3d1f21bc6",
      workspace_id: "l4wp0knn",
      external_id: "04f97b5a-42eb-4c6d-84b8-1c1fc6702c45",
      role: "lead",
      email: "testuser1.2506846833@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611543118,
      updated_at: 1611543118,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600e324e5cf1e4f3d1f21bc6/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e324e5cf1e4f3d1f21bc6/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e324e5cf1e4f3d1f21bc6/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:51:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543122",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002i9it2u91d42kebr3g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8a527e09e414ee1206a131caa226d0c5"',
      "X-Runtime",
      "0.194785",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=629e8ef6-3918-44f3-a299-0cb383c25f2b; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.2506846833@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e324e5cf1e4f3d1f21bc6",
          workspace_id: "l4wp0knn",
          external_id: "04f97b5a-42eb-4c6d-84b8-1c1fc6702c45",
          role: "lead",
          email: "testuser1.2506846833@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611543118,
          updated_at: 1611543118,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600e324e5cf1e4f3d1f21bc6/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e324e5cf1e4f3d1f21bc6/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e324e5cf1e4f3d1f21bc6/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:53:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543242",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0001fn8orek8ngcfjbhg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4387c100c5742673d46546fd9c63e378"',
      "X-Runtime",
      "0.129895",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e324e5cf1e4f3d1f21bc6")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e324e5cf1e4f3d1f21bc6",
      workspace_id: "l4wp0knn",
      external_id: "04f97b5a-42eb-4c6d-84b8-1c1fc6702c45",
      role: "lead",
      email: "testuser1.2506846833@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611543118,
      updated_at: 1611543118,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600e324e5cf1e4f3d1f21bc6/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e324e5cf1e4f3d1f21bc6/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e324e5cf1e4f3d1f21bc6/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:53:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543242",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ietkhr2lme9k9ec5g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8a527e09e414ee1206a131caa226d0c5"',
      "X-Runtime",
      "0.057288",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e324e5cf1e4f3d1f21bc6/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Mon, 25 Jan 2021 02:54:00 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611543252",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "167",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002ietn4meb8vtepcgtg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.049891",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.8721387938" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.8721387938@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:54:00 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543252",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002heb3ajfv4l05gticg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.089821",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:54:01 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543252",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002it9chf21h4n1uj4l0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.129779",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.8721387938",
    email: "testuser2.8721387938@demo.com",
    name: "Back User",
    role: "user",
  })
  .once()
  .reply(
    409,
    {
      type: "error.list",
      request_id: "002i5ph8hp026adtc4i0",
      errors: [
        {
          code: "conflict",
          message:
            "An archived contact matching those details already exists with id=600e30ded68034b33aca63d7",
        },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:54:01 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "409 Conflict",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543252",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002i5ph8hp026adtc4i0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.088218",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30ded68034b33aca63d7/unarchive", {})
  .once()
  .reply(
    200,
    { id: "600e30ded68034b33aca63d7", object: "contact", archived: false },
    [
      "Date",
      "Mon, 25 Jan 2021 02:54:02 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543252",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hj30aqmg95682rvcg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f5f5f869701a1703b79ef2e3d604cd8b"',
      "X-Runtime",
      "0.215872",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=a3228e4e-5af9-422b-8c72-84c5754ee582; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/600e30ded68034b33aca63d7", {
    external_id: "testuser2.8721387938",
    email: "testuser2.8721387938@demo.com",
    name: "Back User",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e30ded68034b33aca63d7",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.8721387938",
      role: "user",
      email: "testuser2.8721387938@demo.com",
      phone: null,
      name: "Back User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611542750,
      updated_at: 1611543242,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:54:02 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543252",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002j1v46t23i823r5ar0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"55ac048d0b8dac8895a1f6254cca3b88"',
      "X-Runtime",
      "0.099448",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:54:02 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543252",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002iah4auitpeha4dkqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0838d6953f2217bbc2d65744ee06a260"',
      "X-Runtime",
      "0.054695",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30ded68034b33aca63d7/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Mon, 25 Jan 2021 02:54:03 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1611543252",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "8f07e1dcefa42c740562d3d861286f5a8d54f913",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "002j6n5kol4ivet21ka0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.123504",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=5b60bc36-2632-4b57-bf30-f44c25bc2e67; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-01bbcee2357c5b1cf",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.8721387938@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e30ded68034b33aca63d7",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.8721387938",
          role: "user",
          email: "testuser2.8721387938@demo.com",
          phone: null,
          name: "Back User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611542750,
          updated_at: 1611543243,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
            url: "/contacts/600e30ded68034b33aca63d7/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:56:03 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543372",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002jc9nlql67rl532f00",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"98aa40598fb065598f8555ff389ede88"',
      "X-Runtime",
      "0.073115",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30ded68034b33aca63d7")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "600e30ded68034b33aca63d7",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.8721387938",
      role: "user",
      email: "testuser2.8721387938@demo.com",
      phone: null,
      name: "Back User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1611542750,
      updated_at: 1611543243,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
        url: "/contacts/600e30ded68034b33aca63d7/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/600e30ded68034b33aca63d7/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:56:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543372",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0002eauctu8nj5t7c2j0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"5de65625081fc33083e3616cf1ae41ed"',
      "X-Runtime",
      "0.062123",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/600e30ded68034b33aca63d7/tags")
  .once()
  .reply(
    200,
    { type: "list", data: [{ type: "tag", id: "4919473", name: "another" }] },
    [
      "Date",
      "Mon, 25 Jan 2021 02:56:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543372",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002i6nhjspcv8c1l8l80",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"fb7f8bbe6fba4b7dbbaf4f434dde37d9"',
      "X-Runtime",
      "0.054869",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "600e30ded68034b33aca63d7",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.8721387938",
          role: "user",
          email: "testuser2.8721387938@demo.com",
          phone: null,
          name: "Back User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611542750,
          updated_at: 1611543243,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
            url: "/contacts/600e30ded68034b33aca63d7/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e30ded68034b33aca63d7/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "600e324e5cf1e4f3d1f21bc6",
          workspace_id: "l4wp0knn",
          external_id: "04f97b5a-42eb-4c6d-84b8-1c1fc6702c45",
          role: "lead",
          email: "testuser1.2506846833@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1611543118,
          updated_at: 1611543118,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/600e324e5cf1e4f3d1f21bc6/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/600e324e5cf1e4f3d1f21bc6/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/600e324e5cf1e4f3d1f21bc6/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 2,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Mon, 25 Jan 2021 02:56:04 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543372",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002hoo4hps87efs1ppm0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"66fcc711cfe103626d30cc30d562d810"',
      "X-Runtime",
      "0.092522",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e30ded68034b33aca63d7/archive", {})
  .once()
  .reply(
    200,
    { id: "600e30ded68034b33aca63d7", object: "contact", archived: true },
    [
      "Date",
      "Mon, 25 Jan 2021 02:56:05 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543372",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ifs6qmhc3b2g5vtfg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cddbdae8f45d7af5d3b064ad25b35b72"',
      "X-Runtime",
      "0.165608",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=51d71d23-9df7-40b2-a4f7-bbb52ebef4ab; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/600e324e5cf1e4f3d1f21bc6/archive", {})
  .once()
  .reply(
    200,
    { id: "600e324e5cf1e4f3d1f21bc6", object: "contact", archived: true },
    [
      "Date",
      "Mon, 25 Jan 2021 02:56:05 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1611543372",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "8f07e1dcefa42c740562d3d861286f5a8d54f913",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002ipirlkbap153supk0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"72b59a9aecda5c7870619a6ff30a85a6"',
      "X-Runtime",
      "0.152346",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=e682c00f-c4ac-418d-bc96-09d77676946e; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-01bbcee2357c5b1cf",
    ]
  );
