const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[9372513543,8709479089,1063257651,7035077147,2768719092,5438707441,1929384454,2968414954,4123928635,3205647992,8931442345,8084296547,4490650112,9189842152,9648035089,7216397099,7417735995,3905882120,6851075223,8456540204,2905061529,3255546993,6185873184,9345299163,4977707927,305160990,5497702304,7298190824,3377837389,7773707115,9152122116,3036711667,9681158437,9805133646,4627552603,2809794892,9519834229,9417500817,5351298499,4954710039,8442200636,3692849838,9107925219,1573568134,3398591979,1083479397,6946479069,3379203066,4041272998,8863814859,4836285105,1370519074,8149845042,2828455845,521058540,1626011638,7282604716,181303729,1345114245,9323641612,5818218206,3071053273,443532248,7011252597,7403399969,2543418779,2543230938,7982876059,618292701,667829301,5142340200,1967464242,1702250961,2091649976,3325416199,7978792994,1439585376,5776000596,1415538281,6894328629,8543471464,6790113183,4787894551,7507487643,8277963889,5398028613,5043015296,4806598946,6333582811,5743840085,9727338291,1539610984,3647633208,952994089,1468146296,4897268119,1363952728,9367730245,6484724781,403536872]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:02:10 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617220932",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0005v2jhmrta11gt678g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"41cd78d391830501a5b43fe16cdba159"',
      "X-Runtime",
      "0.653654",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.3692849838@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:02:12 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617220942",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jsmuq75trs3abtp30",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "1.252210",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.3692849838@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:02:14 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617220942",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005igj2vmielekhpf7fg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "1.338299",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:02:14 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617220942",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jerg2ofl4lt24uc6g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.186620",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.3692849838@demo.com",
    name: "A Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d5464b4a359d4df671e9",
      workspace_id: "l4wp0knn",
      external_id: "e965ec0c-c362-43de-92eb-b578a4c64a9c",
      role: "lead",
      email: "testuser1.3692849838@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617220934,
      updated_at: 1617220934,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064d5464b4a359d4df671e9/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d5464b4a359d4df671e9/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d5464b4a359d4df671e9/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:02:15 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617220942",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k1cr1nn1h5d4fhnpg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"8e85883156bbf35298458f4c326fe6a2"',
      "X-Runtime",
      "0.208173",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=4828fbd9-7cc3-456f-a0bf-97c6f3e9566a; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:02:15 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617220942",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005i2mj9pirbopdt6qm0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.052876",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5464b4a359d4df671e9/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Wed, 31 Mar 2021 20:02:15 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617220942",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "162",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005ibuiaq2ulre4ffso0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.119999",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=ef10dc97-45d7-4f12-a1be-e9f38cb5218d; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5464b4a359d4df671e9/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Wed, 31 Mar 2021 20:02:16 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617220942",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "000avb88cipc13p81cl0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.187156",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=1c72dcea-c992-4f46-9c63-d11aa4eb5615; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5464b4a359d4df671e9/tags", { id: "4983293" })
  .once()
  .reply(200, { type: "tag", id: "4983293", name: "extra_one" }, [
    "Date",
    "Wed, 31 Mar 2021 20:02:16 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617220942",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "0003uktjq9hras31gdb0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"3a46338296e3967a82b94b94acec9537"',
    "X-Runtime",
    "0.166033",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=5d8d6b4c-b509-4da8-a874-0942db17d3f7; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.3692849838@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d5464b4a359d4df671e9",
          workspace_id: "l4wp0knn",
          external_id: "e965ec0c-c362-43de-92eb-b578a4c64a9c",
          role: "lead",
          email: "testuser1.3692849838@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617220934,
          updated_at: 1617220936,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4983293", type: "tag", url: "/tags/4983293" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/6064d5464b4a359d4df671e9/tags",
            total_count: 3,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d5464b4a359d4df671e9/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d5464b4a359d4df671e9/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221062",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jp1urdmmt3mesceng",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"aefaa3268c389d84273673ab7bb5f93c"',
      "X-Runtime",
      "0.488996",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5464b4a359d4df671e9")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d5464b4a359d4df671e9",
      workspace_id: "l4wp0knn",
      external_id: "e965ec0c-c362-43de-92eb-b578a4c64a9c",
      role: "lead",
      email: "testuser1.3692849838@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617220934,
      updated_at: 1617220936,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4983293", type: "tag", url: "/tags/4983293" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/6064d5464b4a359d4df671e9/tags",
        total_count: 3,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d5464b4a359d4df671e9/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d5464b4a359d4df671e9/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221062",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jfpg3rot6e0038vkg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"22759cb82a4e0c248eb1299ec7bf3282"',
      "X-Runtime",
      "0.067111",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5464b4a359d4df671e9/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
        { type: "tag", id: "4983293", name: "extra_one" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221062",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000601pvd6ii7t29ste0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b83616c7f2d399489468e6d4f532d1a0"',
      "X-Runtime",
      "0.056904",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.9107925219@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221062",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000c0e42qnq6gic9p18g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "1.291467",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.9107925219" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.9107925219@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221062",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005ihhvmkhhoi45os2cg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.069559",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221062",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jkeo6r2na6u9mbdb0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.173620",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.9107925219",
    email: "testuser2.9107925219@demo.com",
    name: "A User",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d5c43910cc082d903f6c",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.9107925219",
      role: "user",
      email: "testuser2.9107925219@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617221060,
      updated_at: 1617221060,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:04:20 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221072",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jb5utvjrmjud66jag",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"daa59d96477f0e321f63a4ca80cbbb05"',
      "X-Runtime",
      "0.258811",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=42a0515b-86a5-44ec-97d9-d0647aed1967; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.9107925219@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d5c43910cc082d903f6c",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.9107925219",
          role: "user",
          email: "testuser2.9107925219@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617221060,
          updated_at: 1617221060,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:06:20 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221192",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005in319tgsl51gml05g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6e9265af277a44b059fc3c756fe5021a"',
      "X-Runtime",
      "0.138316",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5c43910cc082d903f6c")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d5c43910cc082d903f6c",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.9107925219",
      role: "user",
      email: "testuser2.9107925219@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617221060,
      updated_at: 1617221060,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:06:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221192",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000cspr4iul1hv30c6jg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"daa59d96477f0e321f63a4ca80cbbb05"',
      "X-Runtime",
      "0.068086",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5c43910cc082d903f6c/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Wed, 31 Mar 2021 20:06:21 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617221192",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "165",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005in35untd6jvcn0o10",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.053294",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.9107925219" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.9107925219@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d5c43910cc082d903f6c",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.9107925219",
          role: "user",
          email: "testuser2.9107925219@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617221060,
          updated_at: 1617221060,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:06:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221192",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005j7f5c4oq8n800ga0g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6e9265af277a44b059fc3c756fe5021a"',
      "X-Runtime",
      "0.245688",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:06:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221192",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000ohrq6mamuep966t6g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.050928",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5c43910cc082d903f6c/archive", {})
  .once()
  .reply(
    200,
    { id: "6064d5c43910cc082d903f6c", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 20:06:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221192",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005i4ishlbgccn0ejpm0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cdd69a2d2202688677a9500ed16956af"',
      "X-Runtime",
      "0.149058",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=96359694-76a1-4187-b315-bd2cd950eb8f; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5c43910cc082d903f6c")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "005iqf65erfj47qrulp0",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:08:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221312",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005iqf65erfj47qrulp0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.061842",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.9107925219@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:08:23 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221312",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005io0sbrnu7v0lqk3b0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.300582",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.9107925219",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:08:23 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221312",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00041eicnvlvgt01pm2g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.373747",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testother1b.8863814859@demo.com",
        },
        {
          field: "email",
          operator: "=",
          value: "testuser1.3692849838@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d5464b4a359d4df671e9",
          workspace_id: "l4wp0knn",
          external_id: "e965ec0c-c362-43de-92eb-b578a4c64a9c",
          role: "lead",
          email: "testuser1.3692849838@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617220934,
          updated_at: 1617220936,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4983293", type: "tag", url: "/tags/4983293" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/6064d5464b4a359d4df671e9/tags",
            total_count: 3,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d5464b4a359d4df671e9/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d5464b4a359d4df671e9/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:08:25 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221312",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005j8d31oveu7ofq3l90",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"aefaa3268c389d84273673ab7bb5f93c"',
      "X-Runtime",
      "1.208989",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:08:25 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221312",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jvie5rooqu8dcchjg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.049765",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/6064d5464b4a359d4df671e9/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Wed, 31 Mar 2021 20:08:26 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617221312",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "162",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005jd1v6d07ig9qi91n0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.168928",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=e29edba7-8d09-45c0-a258-74314504ae3f; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/6064d5464b4a359d4df671e9/tags/4919472")
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Wed, 31 Mar 2021 20:08:26 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617221312",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "00061uft2n8c16l32a70",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.162214",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=3c5ab6a9-c332-4d8d-a683-292342fa43ed; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/6064d5464b4a359d4df671e9/tags/4983293")
  .once()
  .reply(200, { type: "tag", id: "4983293", name: "extra_one" }, [
    "Date",
    "Wed, 31 Mar 2021 20:08:26 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617221312",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "0006tch4ctoq60jusbng",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"3a46338296e3967a82b94b94acec9537"',
    "X-Runtime",
    "0.153884",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=0980ceb9-5da6-4cd8-9282-0b2b27d11191; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5464b4a359d4df671e9/archive", {})
  .once()
  .reply(
    200,
    { id: "6064d5464b4a359d4df671e9", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 20:08:27 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221312",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jqv2tn45up0ioe0l0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9c33f3f9baab475fa772d939e47831a3"',
      "X-Runtime",
      "0.169958",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=62504a4c-5714-4a6f-bfd1-261018449f67; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5464b4a359d4df671e9")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "000cum1mvlkj708oa74g",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:10:27 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221432",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000cum1mvlkj708oa74g",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.052356",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.3692849838@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:10:28 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221432",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0006ua4kl69aoen6dc0g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.979217",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testother1b.8863814859@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:10:30 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221442",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jn97u7puprlr0rk6g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.079594",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.3692849838@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:10:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221442",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000ac6eprc6mp2a68p00",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.471684",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:10:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221442",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k0h63vfgqra5ujesg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.161077",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.3692849838@demo.com",
    name: "Back Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d738badba963d72712a3",
      workspace_id: "l4wp0knn",
      external_id: "6709fa5e-03a3-4dbf-98ad-2a55e76e8674",
      role: "lead",
      email: "testuser1.3692849838@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617221432,
      updated_at: 1617221432,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064d738badba963d72712a3/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d738badba963d72712a3/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d738badba963d72712a3/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:10:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221442",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005ikcvajkthni1tvhdg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"112ebf21b41e0e12f4d32a5d475e8757"',
      "X-Runtime",
      "1.052269",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=dff914a7-7a20-4c6c-abf6-2102caec2501; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.3692849838@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d738badba963d72712a3",
          workspace_id: "l4wp0knn",
          external_id: "6709fa5e-03a3-4dbf-98ad-2a55e76e8674",
          role: "lead",
          email: "testuser1.3692849838@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617221432,
          updated_at: 1617221432,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064d738badba963d72712a3/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d738badba963d72712a3/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d738badba963d72712a3/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k1eulsple483gkcrg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"ca59116c27caaf1983c0d8fa0fab7fca"',
      "X-Runtime",
      "0.143125",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d738badba963d72712a3")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d738badba963d72712a3",
      workspace_id: "l4wp0knn",
      external_id: "6709fa5e-03a3-4dbf-98ad-2a55e76e8674",
      role: "lead",
      email: "testuser1.3692849838@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617221432,
      updated_at: 1617221432,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064d738badba963d72712a3/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d738badba963d72712a3/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d738badba963d72712a3/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005j116ftdq74vre1smg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"112ebf21b41e0e12f4d32a5d475e8757"',
      "X-Runtime",
      "0.060630",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d738badba963d72712a3/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Wed, 31 Mar 2021 20:12:34 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617221562",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "165",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005ic23lfht30v0csc10",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.046872",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.9107925219" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.9107925219@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005ilapnp66s9d66cce0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.377942",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k1fa3uaui2chc1gvg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.151943",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.9107925219",
    email: "testuser2.9107925219@demo.com",
    name: "Back User",
    role: "user",
  })
  .once()
  .reply(
    409,
    {
      type: "error.list",
      request_id: "005jsrmatie9k4jdebg0",
      errors: [
        {
          code: "conflict",
          message:
            "An archived contact matching those details already exists with id=6064d5c43910cc082d903f6c",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "409 Conflict",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jsrmatie9k4jdebg0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.081220",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5c43910cc082d903f6c/unarchive", {})
  .once()
  .reply(
    200,
    { id: "6064d5c43910cc082d903f6c", object: "contact", archived: false },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000okn0tocag61g4q0h0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f9a32e72a8871590381b776f38cba3c1"',
      "X-Runtime",
      "0.131577",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=20b41555-f119-4f95-b315-0a896db656c8; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/6064d5c43910cc082d903f6c", {
    external_id: "testuser2.9107925219",
    email: "testuser2.9107925219@demo.com",
    name: "Back User",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d5c43910cc082d903f6c",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.9107925219",
      role: "user",
      email: "testuser2.9107925219@demo.com",
      phone: null,
      name: "Back User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617221060,
      updated_at: 1617221556,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000cvlc5og0c3jta13ig",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"ae1a99097487c622d2c26b3b364651ff"',
      "X-Runtime",
      "0.109005",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:12:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221562",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jjj9it0fmv9rfgvqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.054107",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5c43910cc082d903f6c/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Wed, 31 Mar 2021 20:12:36 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617221562",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "158",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005jev4v9ijc4t17tsvg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.146161",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=d4961366-36e1-46e6-b0bb-cb1b070f95c2; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.9107925219@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d5c43910cc082d903f6c",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.9107925219",
          role: "user",
          email: "testuser2.9107925219@demo.com",
          phone: null,
          name: "Back User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617221060,
          updated_at: 1617221556,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
            url: "/contacts/6064d5c43910cc082d903f6c/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:14:37 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221682",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005im8nqnivltlc1jubg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3a8a0951eac6f38772ce59b43590f0e4"',
      "X-Runtime",
      "0.112140",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5c43910cc082d903f6c")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064d5c43910cc082d903f6c",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.9107925219",
      role: "user",
      email: "testuser2.9107925219@demo.com",
      phone: null,
      name: "Back User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617221060,
      updated_at: 1617221556,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
        url: "/contacts/6064d5c43910cc082d903f6c/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064d5c43910cc082d903f6c/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:14:37 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221682",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000c55agvh9pfpgbmna0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"74578da26cc68e59fbeb4eea9f60f145"',
      "X-Runtime",
      "0.061942",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064d5c43910cc082d903f6c/tags")
  .once()
  .reply(
    200,
    { type: "list", data: [{ type: "tag", id: "4919473", name: "another" }] },
    [
      "Date",
      "Wed, 31 Mar 2021 20:14:37 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221682",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000olkpeec1r16sn8q70",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"fb7f8bbe6fba4b7dbbaf4f434dde37d9"',
      "X-Runtime",
      "0.061676",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064d5c43910cc082d903f6c",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.9107925219",
          role: "user",
          email: "testuser2.9107925219@demo.com",
          phone: null,
          name: "Back User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617221060,
          updated_at: 1617221556,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919473", type: "tag", url: "/tags/4919473" }],
            url: "/contacts/6064d5c43910cc082d903f6c/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d5c43910cc082d903f6c/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "6064d738badba963d72712a3",
          workspace_id: "l4wp0knn",
          external_id: "6709fa5e-03a3-4dbf-98ad-2a55e76e8674",
          role: "lead",
          email: "testuser1.3692849838@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617221432,
          updated_at: 1617221432,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064d738badba963d72712a3/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064d738badba963d72712a3/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064d738badba963d72712a3/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 2,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 20:14:37 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221682",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000449urtb6gnh1frr40",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"95bcaf53761587a654a66b08a6b06061"',
      "X-Runtime",
      "0.086029",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d5c43910cc082d903f6c/archive", {})
  .once()
  .reply(
    200,
    { id: "6064d5c43910cc082d903f6c", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 20:14:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221682",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00064p8lpcdcdcjm0j50",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cdd69a2d2202688677a9500ed16956af"',
      "X-Runtime",
      "0.140842",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=37a1a65e-c79f-4af7-bbff-556b19684ef1; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064d738badba963d72712a3/archive", {})
  .once()
  .reply(
    200,
    { id: "6064d738badba963d72712a3", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 20:14:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617221682",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k2delvp2j5vm39060",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b96143b946460b4ed16933eac67a8831"',
      "X-Runtime",
      "0.237663",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=ce78f8dc-068c-4f20-8e88-369ad5e7f20f; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
