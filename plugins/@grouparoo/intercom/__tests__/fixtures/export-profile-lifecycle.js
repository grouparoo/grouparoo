const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[6385365811,694079353,4475445449,8895363215,5805526997,4885309981,8419285108,883857888,8934374029,8922716482,6395393178,2553244859,440454378,2708441090,5168124187,3168473914,9197337915,3092511842,9055452660,3523077902,3916606724,7913085169,4215011322,3500615325,3064250331,3091899569,5531871973,3886771952,3553198226,6903252050,7550806006,4294635187,6402654718,8158103370,9769241255,1795311007,1236880758,4188533245,8136385253,5817151290,628116525,2689535320,2663102228,1350124042,2229817358,1493581820,5677309699,5619204307,2350137394,6865055692,4636335247,2855741456,1788204993,6299979414,7314013044,1935347956,2636810285,9260214114,9268749074,2368002220,1739971625,6607350972,4762724620,8046473399,1460310897,1933885631,3098347613,5326006367,9545272826,6445022639,7608251060,398290660,5437822656,1192383316,9058573777,4382391614,2507386020,2802523931,5639727822,514916008,5635086358,8738129449,4067293591,1220535824,8723722287,5166956503,403716942,7891649324,2224096025,8909869300,3344001217,3841303381,2624835320,3473252623,2687238897,8956633774,7161207304,9488030228,9311642253,881570624]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa81249c9d5d222df07338",
          workspace_id: "l4wp0knn",
          external_id: "testuser1b.4653468941",
          role: "user",
          email: null,
          phone: null,
          name: "New Id",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610252580,
          updated_at: 1610252720,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ffa81249c9d5d222df07338/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa81249c9d5d222df07338/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa81249c9d5d222df07338/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:35:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253340",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001u4i5fs6aur434li20",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e29406206a9f2e9648d14f6deae776fe"',
      "X-Runtime",
      "0.085274",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa81249c9d5d222df07338/archive", {})
  .once()
  .reply(
    200,
    { id: "5ffa81249c9d5d222df07338", object: "contact", archived: true },
    [
      "Date",
      "Sun, 10 Jan 2021 04:35:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253340",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vbbcrhl4rolgcn5cg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"27ebd78d2334f69569f58f3cda01e323"',
      "X-Runtime",
      "0.074664",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.4294635187@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:35:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253340",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vsi31g8fefc9upvu0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.071974",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.4294635187@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:35:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253340",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001v229fhnt920ssj4og",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.065535",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:35:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253340",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vbbllk35fh2ojv4t0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.148193",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.4294635187@demo.com",
    name: "Brian",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "30508d4e-8839-46dd-b26f-8673add4b6e8",
      role: "lead",
      email: "testuser1.4294635187@demo.com",
      phone: null,
      name: "Brian",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253334,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:35:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253340",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002017hpel1e8n1rckn0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2d7b9c8dec508bf75f02829a6be1df21"',
      "X-Runtime",
      "0.230346",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=a324e98e-5a5b-4575-a86f-f345294d4e29; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.4294635187@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8416a0aab8dbd51a5abe",
          workspace_id: "l4wp0knn",
          external_id: "30508d4e-8839-46dd-b26f-8673add4b6e8",
          role: "lead",
          email: "testuser1.4294635187@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253334,
          updated_at: 1610253334,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:37:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253460",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00202504vcjf27th6gb0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"82b04a6784ae6de75bad800525fbe2cf"',
      "X-Runtime",
      "0.068797",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "30508d4e-8839-46dd-b26f-8673add4b6e8",
      role: "lead",
      email: "testuser1.4294635187@demo.com",
      phone: null,
      name: "Brian",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253334,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:37:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253460",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vc9acj5ou3rp1iqd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2d7b9c8dec508bf75f02829a6be1df21"',
      "X-Runtime",
      "0.064906",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser1.4294635187" },
        {
          field: "email",
          operator: "=",
          value: "testuser1.4294635187@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8416a0aab8dbd51a5abe",
          workspace_id: "l4wp0knn",
          external_id: "30508d4e-8839-46dd-b26f-8673add4b6e8",
          role: "lead",
          email: "testuser1.4294635187@demo.com",
          phone: null,
          name: "Brian",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253334,
          updated_at: 1610253334,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:37:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253460",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001uhke9aikjpeee5t2g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"82b04a6784ae6de75bad800525fbe2cf"',
      "X-Runtime",
      "0.087565",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:37:35 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253460",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001uct67hl71ii5dqv10",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.117002",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ffa8416a0aab8dbd51a5abe", {
    external_id: "testuser1.4294635187",
    email: "testuser1.4294635187@demo.com",
    name: "John",
    phone: "+16505551234",
    custom_attributes: { text_field: "testing here", date_field: 1597870204 },
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1.4294635187",
      role: "user",
      email: "testuser1.4294635187@demo.com",
      phone: "+16505551234",
      name: "John",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253456,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:37:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253460",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001u5gf4cgl5r3oqs2og",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9d0b90f1584f9cf02ef12fa716b8ecf6"',
      "X-Runtime",
      "0.233979",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=cf1250a3-0ad9-46dc-8947-5b4d0d62ed67; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:37:36 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253460",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001u5gk4pkml73p3rm4g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.055017",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8416a0aab8dbd51a5abe/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Sun, 10 Jan 2021 04:37:37 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1610253460",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "161",
    "X-Intercom-Version",
    "d058884919093fae1f88f517d5b742658b632648",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "001vlps1i7bf6r7uj7p0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.115304",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=4cff92ae-492b-483d-bda7-3fc56b543bf5; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0caee270783354d08",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8416a0aab8dbd51a5abe/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Sun, 10 Jan 2021 04:37:37 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1610253460",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "d058884919093fae1f88f517d5b742658b632648",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "001uhkvjr57jp5uaksb0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.175086",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=eb444875-ba10-4940-a5aa-c2aea026e83a; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0caee270783354d08",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1.4294635187",
      role: "user",
      email: "testuser1.4294635187@demo.com",
      phone: "+16505551234",
      name: "John",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253457,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:39:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253580",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001udr1jpdg7ss6tjgk0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"fc1b6d655e564c9ec964bd41c093209c"',
      "X-Runtime",
      "0.069991",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:39:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253580",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001u6eakro4ufba8qpqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9cf8b743d07db59e76125573f1b1d6bc"',
      "X-Runtime",
      "0.059799",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser1b.5817151290" },
        { field: "external_id", operator: "=", value: "testuser1.4294635187" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8416a0aab8dbd51a5abe",
          workspace_id: "l4wp0knn",
          external_id: "testuser1.4294635187",
          role: "user",
          email: "testuser1.4294635187@demo.com",
          phone: "+16505551234",
          name: "John",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253334,
          updated_at: 1610253457,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: "testing here",
            date_field: 1597870204,
          },
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
            total_count: 2,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:39:38 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253580",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001u6ed7f4uatc0buar0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b79df6c9c792da05f0aee51f903e394c"',
      "X-Runtime",
      "0.084439",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:39:39 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253580",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002033ecvn0icqja7oeg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.121669",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ffa8416a0aab8dbd51a5abe", {
    external_id: "testuser1b.5817151290",
    email: null,
    name: "New Ext",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1b.5817151290",
      role: "user",
      email: "",
      phone: "+16505551234",
      name: "New Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253579,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:39:39 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253580",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001udre1skvcbn5teoig",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4514b1442054b003da1acf0fc04cfe84"',
      "X-Runtime",
      "0.119535",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=a61fde93-4b17-45d7-b632-942444f0f9c8; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:39:40 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253590",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002033khplgtd6vuh5tg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.041353",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/5ffa8416a0aab8dbd51a5abe/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Sun, 10 Jan 2021 04:39:40 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1610253590",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "166",
    "X-Intercom-Version",
    "d058884919093fae1f88f517d5b742658b632648",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "001vhvd0sr8dvpletdg0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.192934",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=f2d82d2a-da09-4eaf-a67e-2ffdd9520747; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0caee270783354d08",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1b.5817151290",
      role: "user",
      email: "",
      phone: "+16505551234",
      name: "New Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253580,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:41 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vqmb7p45m79drsqd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6bcdfa4077b0297da9c35af8389f93a2"',
      "X-Runtime",
      "0.065732",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:41 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vnlg7v531ctf13log",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.051429",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.6402654718",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:41 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001uep7kscb6vdchm460",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.078375",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.6402654718" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.6402654718@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:42 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vqmjushumtdbal9ng",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.074262",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:42 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vvcc1qfhp9ooottd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.132473",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.6402654718",
    email: "testuser2.6402654718@demo.com",
    name: "Sally",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8587a72ae7d544a77449",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.6402654718",
      role: "user",
      email: "testuser2.6402654718@demo.com",
      phone: null,
      name: "Sally",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253703,
      updated_at: 1610253703,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8587a72ae7d544a77449/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8587a72ae7d544a77449/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8587a72ae7d544a77449/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:43 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vvcf5uv9hvn7vcef0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3a64c2128c4fd12841d812afb634c080"',
      "X-Runtime",
      "0.217155",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=e6fb9c0e-421f-41f1-b343-7bcdf3090cc3; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:41:43 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253710",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001v02s8ub0nc7qmr000",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.048556",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8587a72ae7d544a77449/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Sun, 10 Jan 2021 04:41:43 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1610253710",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "160",
    "X-Intercom-Version",
    "d058884919093fae1f88f517d5b742658b632648",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "001v02unlddi366d3i0g",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.116598",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=dce7c2cf-e081-43cf-9a51-8ee216590d4d; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0caee270783354d08",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.6402654718",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8587a72ae7d544a77449",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.6402654718",
          role: "user",
          email: "testuser2.6402654718@demo.com",
          phone: null,
          name: "Sally",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253703,
          updated_at: 1610253703,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ffa8587a72ae7d544a77449/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8587a72ae7d544a77449/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8587a72ae7d544a77449/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:43:44 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253830",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vojgofoo7nq2h5c1g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6d4b8ab04a1b2b26497f3529f2713d12"',
      "X-Runtime",
      "0.193421",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8587a72ae7d544a77449")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8587a72ae7d544a77449",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.6402654718",
      role: "user",
      email: "testuser2.6402654718@demo.com",
      phone: null,
      name: "Sally",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253703,
      updated_at: 1610253703,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8587a72ae7d544a77449/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8587a72ae7d544a77449/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8587a72ae7d544a77449/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:43:44 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253830",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001u8afcvqmojomte9tg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9a9f62e91a24dccae4b6444f40d94504"',
      "X-Runtime",
      "0.070169",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8587a72ae7d544a77449/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:43:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253830",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00200aagq9r630fr09jg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.047851",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    role: "lead",
    email: "testuser3.8158103370@demo.com",
    name: "Alan",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8601adb32b59ad1b4b92",
      workspace_id: "l4wp0knn",
      external_id: "d4ef1820-d1f1-454b-80ef-bcdaef16d86f",
      role: "lead",
      email: "testuser3.8158103370@demo.com",
      phone: null,
      name: "Alan",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253825,
      updated_at: 1610253825,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:43:45 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253830",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vojr23qocr9k9a7m0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"eb6c6d712c3618485f60d75289593340"',
      "X-Runtime",
      "0.204523",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=138b49b7-e042-455a-b7f0-121a089ae0e4; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser3.8158103370@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8601adb32b59ad1b4b92",
          workspace_id: "l4wp0knn",
          external_id: "d4ef1820-d1f1-454b-80ef-bcdaef16d86f",
          role: "lead",
          email: "testuser3.8158103370@demo.com",
          phone: null,
          name: "Alan",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253825,
          updated_at: 1610253825,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8601adb32b59ad1b4b92/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8601adb32b59ad1b4b92/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8601adb32b59ad1b4b92/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:46 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001utc52hmpk8jckcisg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"1c00c2154a07c44bf0becc0d88c6f492"',
      "X-Runtime",
      "0.082665",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:46 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vg1auu6uoq8kb0750",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.129151",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ffa8601adb32b59ad1b4b92", {
    external_id: null,
    email: "testuser3.8158103370@demo.com",
    name: "Allison",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8601adb32b59ad1b4b92",
      workspace_id: "l4wp0knn",
      external_id: "d4ef1820-d1f1-454b-80ef-bcdaef16d86f",
      role: "lead",
      email: "testuser3.8158103370@demo.com",
      phone: null,
      name: "Allison",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253825,
      updated_at: 1610253947,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0020181f3iobab7qe1jg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2420f8b069d8957eca18534717500d87"',
      "X-Runtime",
      "0.074638",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vba7rnu3t1s9vspq0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"7ac37c1abd856a57418fe525e3f0648c"',
      "X-Runtime",
      "0.040709",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8601adb32b59ad1b4b92/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Sun, 10 Jan 2021 04:45:47 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1610253950",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "163",
    "X-Intercom-Version",
    "d058884919093fae1f88f517d5b742658b632648",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "001v6oad83tm3nk2v5d0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.234304",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=37dbaa1d-616b-42c6-a1fc-5e04730f1e5c; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-0caee270783354d08",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8601adb32b59ad1b4b92")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8601adb32b59ad1b4b92",
      workspace_id: "l4wp0knn",
      external_id: "d4ef1820-d1f1-454b-80ef-bcdaef16d86f",
      role: "lead",
      email: "testuser3.8158103370@demo.com",
      phone: null,
      name: "Allison",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253825,
      updated_at: 1610253947,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8601adb32b59ad1b4b92/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001v1uk2it4gp1l9pu5g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"bbb6e3debcc3d4ca331c1baa12c4c635"',
      "X-Runtime",
      "0.063252",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8587a72ae7d544a77449/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [{ type: "tag", id: "4919472", name: "Test Group X" }],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001v6oibaj9ama2kaef0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"2f49fe76755822dbe452ab25bf5ec555"',
      "X-Runtime",
      "0.049736",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser1.4294635187" },
        { field: "external_id", operator: "=", value: "testuser1b.5817151290" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8416a0aab8dbd51a5abe",
          workspace_id: "l4wp0knn",
          external_id: "testuser1b.5817151290",
          role: "user",
          email: null,
          phone: "+16505551234",
          name: "New Ext",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253334,
          updated_at: 1610253580,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: "testing here",
            date_field: 1597870204,
          },
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vg1ufp5ca28l80gs0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"68cc9f043d971bd3cbf348271aa570c3"',
      "X-Runtime",
      "0.080497",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "002018kln949dt618hf0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.121244",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ffa8416a0aab8dbd51a5abe", {
    external_id: "testuser1.4294635187",
    email: null,
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1.4294635187",
      role: "user",
      email: "",
      phone: "+16505551234",
      name: "New Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253949,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:45:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610253950",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "158",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vbaraioe5g4465llg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"31dc5b5eb1929c2cb799341b4f9a4b39"',
      "X-Runtime",
      "0.102969",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=41733ef8-530b-4d18-9c4a-a288f69d26b7; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1.4294635187",
      role: "user",
      email: "",
      phone: "+16505551234",
      name: "New Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610253949,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:47:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254080",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vgvibq1idmhipu18g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"31dc5b5eb1929c2cb799341b4f9a4b39"',
      "X-Runtime",
      "0.062604",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser1.4294635187" },
        {
          field: "email",
          operator: "=",
          value: "testother1b.5817151290@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8416a0aab8dbd51a5abe",
          workspace_id: "l4wp0knn",
          external_id: "testuser1.4294635187",
          role: "user",
          email: null,
          phone: "+16505551234",
          name: "New Ext",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253334,
          updated_at: 1610253949,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: "testing here",
            date_field: 1597870204,
          },
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:47:50 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254080",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vtgj9v8fj2p21dhvg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"4d1a34967354aecc77a019fbe0ef8cda"',
      "X-Runtime",
      "0.089796",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:47:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254080",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vtgmcreft5uq4lgr0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.141382",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ffa8416a0aab8dbd51a5abe", {
    external_id: null,
    email: "testother1b.5817151290@demo.com",
    name: "No Ext",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1.4294635187",
      role: "user",
      email: "testother1b.5817151290@demo.com",
      phone: "+16505551234",
      name: "No Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610254071,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:47:51 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254080",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vqfsmc1i0g2pa0kj0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"de6d7302b74fae7f1fe08594997570e6"',
      "X-Runtime",
      "0.180290",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=2a89edcb-7371-4340-8cdc-d2f4ac942a06; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8416a0aab8dbd51a5abe")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa8416a0aab8dbd51a5abe",
      workspace_id: "l4wp0knn",
      external_id: "testuser1.4294635187",
      role: "user",
      email: "testother1b.5817151290@demo.com",
      phone: "+16505551234",
      name: "No Ext",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610253334,
      updated_at: 1610254071,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: { text_field: "testing here", date_field: 1597870204 },
      tags: {
        type: "list",
        data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
        total_count: 1,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:49:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254200",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vue8ocucfu03qr6lg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"de6d7302b74fae7f1fe08594997570e6"',
      "X-Runtime",
      "0.059017",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.6402654718" },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8587a72ae7d544a77449",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.6402654718",
          role: "user",
          email: "testuser2.6402654718@demo.com",
          phone: null,
          name: "Sally",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253703,
          updated_at: 1610253703,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ffa8587a72ae7d544a77449/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8587a72ae7d544a77449/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8587a72ae7d544a77449/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:49:52 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254200",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vmkqssi82mn21p6mg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6d4b8ab04a1b2b26497f3529f2713d12"',
      "X-Runtime",
      "0.084474",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8587a72ae7d544a77449/archive", {})
  .once()
  .reply(
    200,
    { id: "5ffa8587a72ae7d544a77449", object: "contact", archived: true },
    [
      "Date",
      "Sun, 10 Jan 2021 04:49:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254200",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001uv8cksmik0lva8c9g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6cf801b3177bb34af7d7637bb99151aa"',
      "X-Runtime",
      "0.136348",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=70fea4d9-be0f-4cd8-80b6-41bdad8e728f; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa8587a72ae7d544a77449")
  .once()
  .reply(
    404,
    {
      type: "error.list",
      request_id: "001viqt7p6bvvd458uf0",
      errors: [{ code: "not_found", message: "User Not Found" }],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:51:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "404 Not Found",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254320",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001viqt7p6bvvd458uf0",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.048647",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "external_id",
      operator: "=",
      value: "testuser2.6402654718",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:51:53 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254320",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001v9hmfapib0d06sifg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.076555",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser2.6402654718@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:51:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254320",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vnihaf7ublsk3igl0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.077366",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:51:54 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254320",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vnikmrne9lbre3ft0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e71fc8585c770f241e420cfc06e6f9ed"',
      "X-Runtime",
      "0.118384",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser2.6402654718@demo.com",
    name: "Back!",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa87ebadb32b4a431cf0d4",
      workspace_id: "l4wp0knn",
      external_id: "938d2bbb-20b2-49e6-a7fa-61954d58d67d",
      role: "lead",
      email: "testuser2.6402654718@demo.com",
      phone: null,
      name: "Back!",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610254315,
      updated_at: 1610254315,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa87ebadb32b4a431cf0d4/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa87ebadb32b4a431cf0d4/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa87ebadb32b4a431cf0d4/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:51:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254320",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vsbalicj63map491g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"aae2cf152b0bb7b368bf229ff6d91572"',
      "X-Runtime",
      "0.265142",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=394949e3-11d2-4d15-bd29-779dd524732a; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.6402654718@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa87ebadb32b4a431cf0d4",
          workspace_id: "l4wp0knn",
          external_id: "938d2bbb-20b2-49e6-a7fa-61954d58d67d",
          role: "lead",
          email: "testuser2.6402654718@demo.com",
          phone: null,
          name: "Back!",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610254315,
          updated_at: 1610254315,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ffa87ebadb32b4a431cf0d4/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa87ebadb32b4a431cf0d4/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa87ebadb32b4a431cf0d4/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:53:55 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254440",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vaff7vtm7e6no9lr0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6c2739a7c06b3fa0674a6fe7ed56af0e"',
      "X-Runtime",
      "0.075164",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ffa87ebadb32b4a431cf0d4")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ffa87ebadb32b4a431cf0d4",
      workspace_id: "l4wp0knn",
      external_id: "938d2bbb-20b2-49e6-a7fa-61954d58d67d",
      role: "lead",
      email: "testuser2.6402654718@demo.com",
      phone: null,
      name: "Back!",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610254315,
      updated_at: 1610254315,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ffa87ebadb32b4a431cf0d4/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ffa87ebadb32b4a431cf0d4/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ffa87ebadb32b4a431cf0d4/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:53:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254440",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001uhjsps8pv6oisnnj0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"aae2cf152b0bb7b368bf229ff6d91572"',
      "X-Runtime",
      "0.065729",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ffa8416a0aab8dbd51a5abe",
          workspace_id: "l4wp0knn",
          external_id: "testuser1.4294635187",
          role: "user",
          email: "testother1b.5817151290@demo.com",
          phone: "+16505551234",
          name: "No Ext",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253334,
          updated_at: 1610254071,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: "testing here",
            date_field: 1597870204,
          },
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8416a0aab8dbd51a5abe/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "5ffa8601adb32b59ad1b4b92",
          workspace_id: "l4wp0knn",
          external_id: "d4ef1820-d1f1-454b-80ef-bcdaef16d86f",
          role: "lead",
          email: "testuser3.8158103370@demo.com",
          phone: null,
          name: "Allison",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610253825,
          updated_at: 1610253947,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [{ id: "4919472", type: "tag", url: "/tags/4919472" }],
            url: "/contacts/5ffa8601adb32b59ad1b4b92/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8601adb32b59ad1b4b92/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa8601adb32b59ad1b4b92/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "5ffa87ebadb32b4a431cf0d4",
          workspace_id: "l4wp0knn",
          external_id: "938d2bbb-20b2-49e6-a7fa-61954d58d67d",
          role: "lead",
          email: "testuser2.6402654718@demo.com",
          phone: null,
          name: "Back!",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610254315,
          updated_at: 1610254315,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ffa87ebadb32b4a431cf0d4/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ffa87ebadb32b4a431cf0d4/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ffa87ebadb32b4a431cf0d4/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 3,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Sun, 10 Jan 2021 04:53:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254440",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00204vp1dhl8kia6assg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a3d891ce00bad720638e3c9ff96b7b27"',
      "X-Runtime",
      "0.090805",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8416a0aab8dbd51a5abe/archive", {})
  .once()
  .reply(
    200,
    { id: "5ffa8416a0aab8dbd51a5abe", object: "contact", archived: true },
    [
      "Date",
      "Sun, 10 Jan 2021 04:53:57 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254440",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001ukctsqqih9hf160f0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"893107c80f9eb12b476e6a3a1410e094"',
      "X-Runtime",
      "0.141217",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=662580fa-2c59-47a0-be6b-def8b32938bb; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa8601adb32b59ad1b4b92/archive", {})
  .once()
  .reply(
    200,
    { id: "5ffa8601adb32b59ad1b4b92", object: "contact", archived: true },
    [
      "Date",
      "Sun, 10 Jan 2021 04:53:58 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254440",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001vf22lo9d1koj914gg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"49bf2f42f7372cb6224dfa460614a474"',
      "X-Runtime",
      "0.280219",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=4044459f-25ed-4328-98e0-2806cc59c124; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ffa87ebadb32b4a431cf0d4/archive", {})
  .once()
  .reply(
    200,
    { id: "5ffa87ebadb32b4a431cf0d4", object: "contact", archived: true },
    [
      "Date",
      "Sun, 10 Jan 2021 04:53:59 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610254440",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001uhkampbvlll0at5dg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"fca0b8d13b066fcbe4a725c3bad9b8d7"',
      "X-Runtime",
      "0.142902",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=0e05c79f-b88d-4ad1-b826-f815f47fc3af; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
