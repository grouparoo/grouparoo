const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[8124702516,3645605238,3945059730,2649233911,2499615069,9940602193,266726945,6019045573,700780810,6732974236,7867469138,8446616813,9450043293,9779174119,8640377327,815376284,8599103789,3926294652,6194112478,4708675753,7545274677,8625176424,9308971108,8029178375,9302067522,2886282700,4195832966,6631222419,1917550506,1176438959,8227850187,1733181331,4857080590,5429205721,50861797,5303664264,9899762252,5791697422,5722488142,6182707065,2473163843,2727002970,5312371241,9370799277,9356120263,9632929520,9627269428,8512630280,9719728040,4997566187,7157489284,3962084863,8259481196,4396822184,8395250387,9955336267,585085334,6730652285,8152949148,1286431330,7196449554,6031224739,155327476,9223356793,7337211761,1777932021,2684727697,8431070739,5951020769,3732402398,4035467656,9147828606,1792344602,3583323491,5875112861,8692097753,2677295265,1403405339,4847875961,8221404018,2644061957,1326856241,128885959,786804215,8395894474,241274558,62790891,5714773637,334041842,3625544039,9277063277,9194939558,8850779404,6013540699,9083090516,7126062842,8861844223,6778801647,6009499832,5000406150]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064e824d08d98eb487b47f3",
          workspace_id: "l4wp0knn",
          external_id: "testuser1b.3070263011",
          role: "user",
          email: null,
          phone: null,
          name: "New Id",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617225764,
          updated_at: 1617225902,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/6064e824d08d98eb487b47f3/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064e824d08d98eb487b47f3/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064e824d08d98eb487b47f3/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:16 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000854cju3ars8soo64g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"847d2593780f7a86cb0f2ab6438b6c5e"',
      "X-Runtime",
      "0.219704",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064e824d08d98eb487b47f3/archive", {})
  .once()
  .reply(
    200,
    { id: "6064e824d08d98eb487b47f3", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:16 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k2855p6se5m0kf0t0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e72418c8293d8d47050ec34a912e0482"',
      "X-Runtime",
      "0.065503",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.1733181331@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kpee6o3hgrv8cg38g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.080744",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.1733181331@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000854muv2p529sag930",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.147008",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jmhecqqdal1utatd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.272029",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: null,
    email: "testuser1.1733181331@demo.com",
    name: "A Lead",
    role: "lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb16a8fb0014c96ad61e",
      workspace_id: "l4wp0knn",
      external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
      role: "lead",
      email: "testuser1.1733181331@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226518,
      updated_at: 1617226518,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "158",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kg63i1gpgjhu3k6dg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"e3310da52b3189b0eb0080866e8eec38"',
      "X-Runtime",
      "0.205446",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=0b8d891a-c708-4be0-bb0d-8711c05c07d0; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:35:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226522",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "157",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jr6r1q7vmoft14an0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.045558",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064eb16a8fb0014c96ad61e/tags", { id: "4919473" })
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Wed, 31 Mar 2021 21:35:19 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617226522",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "156",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005l7b8pebk9s707a3l0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.110580",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=344e42c1-026d-4818-8b3b-5dcf0f00dd69; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064eb16a8fb0014c96ad61e/tags", { id: "4919472" })
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Wed, 31 Mar 2021 21:35:19 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617226522",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "155",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "000da3gbd6rgaiob8f00",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.269366",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=a1f639fa-4e5a-4439-99a2-e4e06f4ae92e; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser1.1733181331@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb16a8fb0014c96ad61e",
          workspace_id: "l4wp0knn",
          external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
          role: "lead",
          email: "testuser1.1733181331@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226518,
          updated_at: 1617226519,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
            total_count: 2,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:20 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0007aknaua97tfkesqo0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"991a1e8b7528bab3a458b49a7a7cd411"',
      "X-Runtime",
      "0.078923",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb16a8fb0014c96ad61e")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb16a8fb0014c96ad61e",
      workspace_id: "l4wp0knn",
      external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
      role: "lead",
      email: "testuser1.1733181331@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226518,
      updated_at: 1617226519,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [
          { id: "4919472", type: "tag", url: "/tags/4919472" },
          { id: "4919473", type: "tag", url: "/tags/4919473" },
        ],
        url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
        total_count: 2,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:20 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k0o19mvbng44n9l70",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b46bb3d9c6df96ad23f680c61f9abb5e"',
      "X-Runtime",
      "0.061320",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb16a8fb0014c96ad61e/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0005a5lvfcqpps74kg90",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9cf8b743d07db59e76125573f1b1d6bc"',
      "X-Runtime",
      "0.064921",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.4857080590@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000prglnr84csvf5jhqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.112401",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.4857080590" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.4857080590@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [],
      total_count: 0,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 0 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:21 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005klokvrn5us2g2ebgg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3accce3023253f75d3952041dc778ae0"',
      "X-Runtime",
      "0.152598",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jis969parfc6g3u70",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.156480",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    external_id: "testuser2.4857080590",
    email: "testuser2.4857080590@demo.com",
    name: "A User",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb929e93549a3d83e509",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.4857080590",
      role: "user",
      email: "testuser2.4857080590@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226642,
      updated_at: 1617226642,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:37:22 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226652",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k36r1mkh5ja969h1g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6813be955c3383d8cdffc9cf7c40e709"',
      "X-Runtime",
      "0.221587",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=fee666bd-b6cb-4d6f-99cd-7c1722f7a953; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      field: "email",
      operator: "=",
      value: "testuser2.4857080590@demo.com",
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb929e93549a3d83e509",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.4857080590",
          role: "user",
          email: "testuser2.4857080590@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226642,
          updated_at: 1617226642,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:39:24 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226772",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005ldrnerkacomjlult0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"1d28dea24de8d03b1a0414de86486f77"',
      "X-Runtime",
      "1.311190",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb929e93549a3d83e509")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb929e93549a3d83e509",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.4857080590",
      role: "user",
      email: "testuser2.4857080590@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226642,
      updated_at: 1617226642,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:39:24 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226772",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000cbq9uaeommddpnvcg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6813be955c3383d8cdffc9cf7c40e709"',
      "X-Runtime",
      "0.061322",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb929e93549a3d83e509/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Wed, 31 Mar 2021 21:39:25 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617226772",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "165",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005krav6tg4lo4j9v23g",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.054785",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.4857080590" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.4857080590@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb929e93549a3d83e509",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.4857080590",
          role: "user",
          email: "testuser2.4857080590@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226642,
          updated_at: 1617226642,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:39:25 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226772",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000871769ehuam659mk0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"1d28dea24de8d03b1a0414de86486f77"',
      "X-Runtime",
      "0.074143",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:39:25 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226772",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jodvftvdmv229agh0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.050796",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb929e93549a3d83e509")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb929e93549a3d83e509",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.4857080590",
      role: "user",
      email: "testuser2.4857080590@demo.com",
      phone: null,
      name: "A User",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226642,
      updated_at: 1617226642,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:41:26 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226892",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005k52ckohdhjb3gp4kg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6813be955c3383d8cdffc9cf7c40e709"',
      "X-Runtime",
      "0.067071",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb929e93549a3d83e509/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Wed, 31 Mar 2021 21:41:26 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617226892",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "166",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005k2k41phk6qc6dhd8g",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.051324",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testother1b.6182707065@demo.com",
        },
        {
          field: "email",
          operator: "=",
          value: "testuser1.1733181331@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb16a8fb0014c96ad61e",
          workspace_id: "l4wp0knn",
          external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
          role: "lead",
          email: "testuser1.1733181331@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226518,
          updated_at: 1617226519,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [
              { id: "4919472", type: "tag", url: "/tags/4919472" },
              { id: "4919473", type: "tag", url: "/tags/4919473" },
            ],
            url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
            total_count: 2,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:41:27 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226892",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000e8at0vj9gr39jhf5g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"991a1e8b7528bab3a458b49a7a7cd411"',
      "X-Runtime",
      "0.104790",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/tags")
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        { type: "tag", id: "4938596", name: "All Emails" },
        { type: "tag", id: "4919473", name: "another" },
        { type: "tag", id: "4897643", name: "demo" },
        { type: "tag", id: "5092161", name: "Everyone with an email" },
        { type: "tag", id: "4983293", name: "extra_one" },
        { type: "tag", id: "5092162", name: "High LTV Xhosa Speakers" },
        { type: "tag", id: "4938597", name: "High Value" },
        {
          type: "tag",
          id: "4938598",
          name: "High Value with Recent Automotive Purchase",
        },
        { type: "tag", id: "4919480", name: "New_one" },
        { type: "tag", id: "4977825", name: "One person" },
        { type: "tag", id: "4977848", name: "Other Group" },
        { type: "tag", id: "4919479", name: "outside_grouparoo" },
        { type: "tag", id: "4938599", name: "Recent Automotive Shoppers" },
        { type: "tag", id: "4938600", name: "Recent Automotive Visits" },
        { type: "tag", id: "4958230", name: "Spanish Speakers" },
        { type: "tag", id: "4897644", name: "Test Case" },
        { type: "tag", id: "4919472", name: "Test Group X" },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:41:27 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617226892",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005ju0pot4avtjfgfhqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"a82a6af7edf8904c14645af85ee61171"',
      "X-Runtime",
      "0.049907",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/6064eb16a8fb0014c96ad61e/tags/4919473")
  .once()
  .reply(200, { type: "tag", id: "4919473", name: "another" }, [
    "Date",
    "Wed, 31 Mar 2021 21:41:27 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617226892",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "163",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005knkmivr5f52o4tlf0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"8a9e2c4c08d9a3612edefaf355cf7f7d"',
    "X-Runtime",
    "0.173811",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=aecd1f11-3b02-407e-b03a-c63f214f5a68; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .delete("/contacts/6064eb16a8fb0014c96ad61e/tags/4919472")
  .once()
  .reply(200, { type: "tag", id: "4919472", name: "Test Group X" }, [
    "Date",
    "Wed, 31 Mar 2021 21:41:28 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617226892",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "162",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005jkoasrb8osbd3mcg0",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"ceae11dbdbe26261f1d98a84b928c605"',
    "X-Runtime",
    "0.163627",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Set-Cookie",
    "recent_write=05491135-99b6-43d1-b436-16094cf836dd; path=/; max-age=1; HttpOnly; secure",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb16a8fb0014c96ad61e")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb16a8fb0014c96ad61e",
      workspace_id: "l4wp0knn",
      external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
      role: "lead",
      email: "testuser1.1733181331@demo.com",
      phone: null,
      name: "A Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226518,
      updated_at: 1617226888,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:43:28 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227012",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "000cdlrn9ghacrnbib10",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"bf76a9d00a0b9e8eb9f71af3a2d96dc7"',
      "X-Runtime",
      "0.065078",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb16a8fb0014c96ad61e/tags")
  .once()
  .reply(200, { type: "list", data: [] }, [
    "Date",
    "Wed, 31 Mar 2021 21:43:29 GMT",
    "Content-Type",
    "application/json; charset=utf-8",
    "Transfer-Encoding",
    "chunked",
    "Connection",
    "close",
    "Status",
    "200 OK",
    "Cache-Control",
    "max-age=0, private, must-revalidate",
    "X-RateLimit-Limit",
    "167",
    "X-RateLimit-Reset",
    "1617227012",
    "Strict-Transport-Security",
    "max-age=31556952; includeSubDomains; preload",
    "X-RateLimit-Remaining",
    "166",
    "X-Intercom-Version",
    "ec4d604d36698662ce6697306a0cd99c5736bd5d",
    "Vary",
    "Accept-Encoding",
    "X-XSS-Protection",
    "1; mode=block",
    "X-Request-Id",
    "005juug7qp8e1es50tjg",
    "Intercom-Version",
    "2.3",
    "ETag",
    'W/"c01c507a1d1b68bc10438fadd231de40"',
    "X-Runtime",
    "0.056649",
    "X-Frame-Options",
    "SAMEORIGIN",
    "X-Content-Type-Options",
    "nosniff",
    "Server",
    "nginx",
    "x-ami-version",
    "ami-07a718a76b66ea5b7",
  ]);
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        {
          field: "email",
          operator: "=",
          value: "testuser1.1733181331@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb16a8fb0014c96ad61e",
          workspace_id: "l4wp0knn",
          external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
          role: "lead",
          email: "testuser1.1733181331@demo.com",
          phone: null,
          name: "A Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226518,
          updated_at: 1617226888,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:43:29 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227012",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kjtvjp7oq6phhnfjg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"deffdd3464663624037aed080232c9ce"',
      "X-Runtime",
      "0.078086",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:43:29 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227012",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kal70lj7f6e6v55c0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.160680",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/6064eb16a8fb0014c96ad61e", {
    external_id: null,
    email: "testuser1.1733181331@demo.com",
    name: "Back Lead",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb16a8fb0014c96ad61e",
      workspace_id: "l4wp0knn",
      external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
      role: "lead",
      email: "testuser1.1733181331@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226518,
      updated_at: 1617227010,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:43:30 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227022",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kju5svmm4ec3vtfbg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6828b5661fb0610d88f090ee83ccdda0"',
      "X-Runtime",
      "0.086178",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb16a8fb0014c96ad61e")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb16a8fb0014c96ad61e",
      workspace_id: "l4wp0knn",
      external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
      role: "lead",
      email: "testuser1.1733181331@demo.com",
      phone: null,
      name: "Back Lead",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226518,
      updated_at: 1617227010,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:45:30 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227142",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jr72psb8b2735lfp0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"6828b5661fb0610d88f090ee83ccdda0"',
      "X-Runtime",
      "0.077524",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/search", {
    query: {
      operator: "OR",
      value: [
        { field: "external_id", operator: "=", value: "testuser2.4857080590" },
        {
          field: "email",
          operator: "=",
          value: "testuser2.4857080590@demo.com",
        },
      ],
    },
  })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb929e93549a3d83e509",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.4857080590",
          role: "user",
          email: "testuser2.4857080590@demo.com",
          phone: null,
          name: "A User",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226642,
          updated_at: 1617226642,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 50, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:45:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227142",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jmjmttv2o9ccsljmg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"1d28dea24de8d03b1a0414de86486f77"',
      "X-Runtime",
      "0.101525",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/data_attributes")
  .query({ model: "contact" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "data_attribute",
          name: "role",
          full_name: "role",
          label: "Contact role",
          description:
            "A person's role in their company, such as the name of their department",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "name",
          full_name: "name",
          label: "Name",
          description: "A person's full name",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "owner_id",
          full_name: "owner_id",
          label: "Owner",
          description: "The teammate that owns a lead or user in Intercom",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "email",
          full_name: "email",
          label: "Email",
          description: "The email address assigned to a user or lead",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "phone",
          full_name: "phone",
          label: "Phone",
          description: "A person's phone number",
          data_type: "string",
          api_writable: true,
          ui_writable: true,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "external_id",
          full_name: "external_id",
          label: "User ID",
          description:
            "A number identifying a person (applies to both users and leads)",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "created_at",
          full_name: "created_at",
          label: "First Seen",
          description: "The first day a person visited your site or app",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "signed_up_at",
          full_name: "signed_up_at",
          label: "Signed up",
          description: "The day a person first signed up for your product",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_seen_at",
          full_name: "last_seen_at",
          label: "Last seen",
          description: "The last day a person visited your site or app",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_contacted_at",
          full_name: "last_contacted_at",
          label: "Last contacted",
          description: "The last day you or a teammate contacted a person",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_replied_at",
          full_name: "last_replied_at",
          label: "Last heard from",
          description:
            "The last day a person contacted you via a message or email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_opened_at",
          full_name: "last_email_opened_at",
          label: "Last opened email",
          description: "The last day a person opened an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "last_email_clicked_at",
          full_name: "last_email_clicked_at",
          label: "Last clicked on link in email",
          description: "The last day a person clicked on a link in an email",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "country",
          full_name: "location.country",
          label: "Country",
          description:
            "The country a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "region",
          full_name: "location.region",
          label: "Region",
          description:
            "A subdivision of a country, such as a state, province or territory",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "city",
          full_name: "location.city",
          label: "City",
          description: "The city a person is in (or their IP address location)",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_language",
          full_name: "browser_language",
          label: "Browser Language",
          description: "The language set by the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "language_override",
          full_name: "language_override",
          label: "Language Override",
          description:
            "A preferred language setting for a person, used by the Intercom Messenger even if their browser settings change",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser",
          full_name: "browser",
          label: "Browser",
          description: "The browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "browser_version",
          full_name: "browser_version",
          label: "Browser Version",
          description: "The precise version of the browser a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "os",
          full_name: "os",
          label: "OS",
          description: "The operating system a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "unsubscribed_from_emails",
          full_name: "unsubscribed_from_emails",
          label: "Unsubscribed from Emails",
          description: "Has a person unsubscribed from emails from your team?",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "marked_email_as_spam",
          full_name: "marked_email_as_spam",
          label: "Marked email as spam",
          description: "Has a person marked an email from your team as spam?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "has_hard_bounced",
          full_name: "has_hard_bounced",
          label: "Has hard bounced",
          description: "Has an email sent from your team to a person bounced?",
          data_type: "boolean",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          id: 8104117,
          type: "data_attribute",
          name: "text_field",
          full_name: "custom_attributes.text_field",
          label: "text_field",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761329,
          updated_at: 1608761329,
          model: "contact",
        },
        {
          id: 8104119,
          type: "data_attribute",
          name: "number_field",
          full_name: "custom_attributes.number_field",
          label: "number_field",
          description: "",
          data_type: "integer",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761414,
          updated_at: 1608761414,
          model: "contact",
        },
        {
          id: 8104120,
          type: "data_attribute",
          name: "decimal_field",
          full_name: "custom_attributes.decimal_field",
          label: "decimal_field",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761423,
          updated_at: 1608761423,
          model: "contact",
        },
        {
          id: 8104121,
          type: "data_attribute",
          name: "boolean_field",
          full_name: "custom_attributes.boolean_field",
          label: "boolean_field",
          data_type: "boolean",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761440,
          updated_at: 1608761440,
          model: "contact",
        },
        {
          id: 8104122,
          type: "data_attribute",
          name: "date_field",
          full_name: "custom_attributes.date_field",
          label: "date_field",
          data_type: "date",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761455,
          updated_at: 1608761455,
          model: "contact",
        },
        {
          id: 8104123,
          type: "data_attribute",
          name: "list_field",
          full_name: "custom_attributes.list_field",
          label: "list_field",
          description: "",
          data_type: "string",
          options: ["Red", "Blue", "Green"],
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518167",
          created_at: 1608761523,
          updated_at: 1608761523,
          model: "contact",
        },
        {
          id: 8180533,
          type: "data_attribute",
          name: "LTV",
          full_name: "custom_attributes.LTV",
          label: "LTV",
          description: "The customer's lifetime value",
          data_type: "float",
          api_writable: true,
          ui_writable: false,
          custom: true,
          archived: false,
          admin_id: "4518294",
          created_at: 1611266962,
          updated_at: 1611266962,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "id",
          full_name: "id",
          label: "ID",
          description: "The Intercom defined id representing the user",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "avatar",
          full_name: "avatar",
          label: "Avatar image url",
          description: "An avatar image URL",
          data_type: "string",
          api_writable: true,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "updated_at",
          full_name: "updated_at",
          label: "Updated at",
          description: "The last time the user was updated",
          data_type: "date",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "workspace_id",
          full_name: "workspace_id",
          label: "Workspace ID",
          description: "The Intercom defined id representing the workspace",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_app_name",
          full_name: "android_app_name",
          label: "Android App name",
          description: "The name of Android app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "android_sdk_version",
          full_name: "android_sdk_version",
          label: "Android SDK version",
          description: "The version of the Android SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_app_name",
          full_name: "ios_app_name",
          label: "iOS App name",
          description: "The name of iOS app a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
        {
          type: "data_attribute",
          name: "ios_sdk_version",
          full_name: "ios_sdk_version",
          label: "iOS SDK version",
          description: "The version of the iOS SDK a person is using",
          data_type: "string",
          api_writable: false,
          ui_writable: false,
          custom: false,
          archived: false,
          model: "contact",
        },
      ],
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:45:31 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227142",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kbiuiib0ngrprpv70",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d7d18997a7cec62de07f0bfbc85aaf12"',
      "X-Runtime",
      "0.178674",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/6064eb929e93549a3d83e509", {
    external_id: "testuser2.4857080590",
    email: "testuser2.4857080590@demo.com",
    name: "Back Contact",
    role: "user",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb929e93549a3d83e509",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.4857080590",
      role: "user",
      email: "testuser2.4857080590@demo.com",
      phone: null,
      name: "Back Contact",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226642,
      updated_at: 1617227132,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:45:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227142",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kkruioodq5h4sahj0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9718693f08a2b84147f2e8bab140dd18"',
      "X-Runtime",
      "0.087843",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/6064eb929e93549a3d83e509")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "6064eb929e93549a3d83e509",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.4857080590",
      role: "user",
      email: "testuser2.4857080590@demo.com",
      phone: null,
      name: "Back Contact",
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1617226642,
      updated_at: 1617227132,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/6064eb929e93549a3d83e509/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:47:32 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005jnhb4q129quhvsfv0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"9718693f08a2b84147f2e8bab140dd18"',
      "X-Runtime",
      "0.060644",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "6064eb16a8fb0014c96ad61e",
          workspace_id: "l4wp0knn",
          external_id: "d40c1130-bc3f-4d13-97d9-bee3fd5deb80",
          role: "lead",
          email: "testuser1.1733181331@demo.com",
          phone: null,
          name: "Back Lead",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226518,
          updated_at: 1617227010,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb16a8fb0014c96ad61e/companies",
            total_count: 0,
            has_more: false,
          },
        },
        {
          type: "contact",
          id: "6064eb929e93549a3d83e509",
          workspace_id: "l4wp0knn",
          external_id: "testuser2.4857080590",
          role: "user",
          email: "testuser2.4857080590@demo.com",
          phone: null,
          name: "Back Contact",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1617226642,
          updated_at: 1617227132,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/6064eb929e93549a3d83e509/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 2,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Wed, 31 Mar 2021 21:47:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005lhjaqp27lka61d45g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"566194bff0e1fe32a7b5cd83a62eecdf"',
      "X-Runtime",
      "0.086166",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064eb16a8fb0014c96ad61e/archive", {})
  .once()
  .reply(
    200,
    { id: "6064eb16a8fb0014c96ad61e", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 21:47:33 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0005er5ptoknonlku20g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"c7e10e69070fa2f8a0ef54007ec86319"',
      "X-Runtime",
      "0.315736",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=8c73581d-0e66-4b78-bd81-060d6c739be4; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/6064eb929e93549a3d83e509/archive", {})
  .once()
  .reply(
    200,
    { id: "6064eb929e93549a3d83e509", object: "contact", archived: true },
    [
      "Date",
      "Wed, 31 Mar 2021 21:47:34 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1617227262",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "ec4d604d36698662ce6697306a0cd99c5736bd5d",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "005kcgqmpohjnefd8d2g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"bf4b15ae64a34bfd3408a2194c59a8d0"',
      "X-Runtime",
      "0.142318",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=676687ff-3855-4a11-8bb2-c482edb3b28b; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-07a718a76b66ea5b7",
    ]
  );
