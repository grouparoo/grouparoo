const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[3586816273,678242826,6097247407,8859398883,8033437371,1750415580,134370187,341466846,6709169894,4484646104,8201155703,5297858885,1889064787,7795929239,2134808010,5461937760,7421958461,2015931635,6490193808,1542091009,7169876353,9667152647,8990616382,6945477279,1067493319,5724892876,6555698131,5572169701,829791111,9101045668,2801985416,2806334386,660621004,5290262476,3192990748,944858560,242815388,2790079532,3347745038,2727822470,9119521346,9059173218,173970511,1033751936,6880118465,2840391261,9144691314,2912109978,9216367356,1087480460,5951402673,333823612,986072467,5923602012,3607212998,2171494188,3954180548,7357689062,1993662018,341357625,1893101985,2830701399,2790588435,8174819788,6778869906,4783651859,5171486528,9920603053,1045009360,3779713548,8032050986,269687975,4591604167,7447556022,8008378771,6323385025,537865614,8488574573,3575330446,8858968465,6966227343,7894473794,8795922515,7706326163,662716871,1892285224,367031292,2274611010,2739483664,6950690512,5799738632,4833137235,2114850104,9532960324,761589786,7388694706,627188376,1498159819,2898704392,1478278980]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff915c8a0aab83738fd4607",
          workspace_id: "l4wp0knn",
          external_id: "testuser1b.2181442179",
          role: "user",
          email: null,
          phone: null,
          name: "New Id",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610159560,
          updated_at: 1610159880,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff915c8a0aab83738fd4607/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff915c8a0aab83738fd4607/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff915c8a0aab83738fd4607/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:14 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001a3pa9h13cqk621n90",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"bbc773fcf9117e428e03645f40d1c36b"',
      "X-Runtime",
      "0.080548",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff915c8a0aab83738fd4607/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff915c8a0aab83738fd4607", object: "contact", archived: true },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:14 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001a3pd1l67kmu7kk5mg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0698e1263a6cdeaf37f3a30ebb82f5c4"',
      "X-Runtime",
      "0.057714",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", { role: "lead", email: "testuser1.9059173218@demo.com" })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf2722cf79c93809329",
      workspace_id: "l4wp0knn",
      external_id: "3cb95b6b-0710-4d34-ab26-d09355b8ab51",
      role: "lead",
      email: "testuser1.9059173218@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161394,
      updated_at: 1610161394,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf2722cf79c93809329/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf2722cf79c93809329/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf2722cf79c93809329/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:15 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0018ehc9mct3j2dn0qig",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"928ea263199993cb5720be4ef1caebe6"',
      "X-Runtime",
      "0.197114",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=c7f5ff4a-d568-4bed-bdae-f905cdc1c0de; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff91cf2722cf79c93809329")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf2722cf79c93809329",
      workspace_id: "l4wp0knn",
      external_id: "3cb95b6b-0710-4d34-ab26-d09355b8ab51",
      role: "lead",
      email: "testuser1.9059173218@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161394,
      updated_at: 1610161394,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf2722cf79c93809329/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf2722cf79c93809329/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf2722cf79c93809329/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:15 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0018vqndpa70gd5qd9s0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"928ea263199993cb5720be4ef1caebe6"',
      "X-Runtime",
      "0.074169",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", {
    role: "lead",
    email: "testuser2.173970511@demo.com",
    external_id: "testuser2.173970511",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf39e32af25bada9afa",
      workspace_id: "l4wp0knn",
      external_id: "94435c0e-02d2-4d18-8626-4cc86b9d050a",
      role: "lead",
      email: "testuser2.173970511@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161395,
      updated_at: 1610161395,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:16 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "161",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0018r8qvoc3sfo4sijgg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b72981ff030b0cbdb898dec1b67fc186"',
      "X-Runtime",
      "0.306021",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=53fa4a23-c2ad-401d-b5aa-f6655331eef5; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff91cf39e32af25bada9afa")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf39e32af25bada9afa",
      workspace_id: "l4wp0knn",
      external_id: "94435c0e-02d2-4d18-8626-4cc86b9d050a",
      role: "lead",
      email: "testuser2.173970511@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161395,
      updated_at: 1610161395,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:16 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "160",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0019ilh3f8eucmlg9v20",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b72981ff030b0cbdb898dec1b67fc186"',
      "X-Runtime",
      "0.076102",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff91cf39e32af25bada9afa", {
    role: "user",
    email: "testuser2.173970511@demo.com",
    external_id: "testuser2.173970511",
  })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf39e32af25bada9afa",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.173970511",
      role: "user",
      email: "testuser2.173970511@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161395,
      updated_at: 1610161397,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "159",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0018j974rt1qacsaavd0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f1d310017737f77ec39b2d4b0ac4f8a0"',
      "X-Runtime",
      "0.283736",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=715a4590-54a3-4350-806c-c01293b17b99; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff91cf39e32af25bada9afa")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf39e32af25bada9afa",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.173970511",
      role: "user",
      email: "testuser2.173970511@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161395,
      updated_at: 1610161397,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "158",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0019v4tiv3rn5pm5lta0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f1d310017737f77ec39b2d4b0ac4f8a0"',
      "X-Runtime",
      "0.070588",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .put("/contacts/5ff91cf39e32af25bada9afa", {
    role: "lead",
    email: "testuser2.173970511@demo.com",
    external_id: "testuser2.173970511",
  })
  .once()
  .reply(
    400,
    {
      type: "error.list",
      request_id: "0018758tvg9u08vbf1kg",
      errors: [
        {
          code: "client_error",
          message: "Contact with user role can't be converted to a lead",
        },
      ],
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:17 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "400 Bad Request",
      "Cache-Control",
      "no-cache",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "157",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0018758tvg9u08vbf1kg",
      "Intercom-Version",
      "2.3",
      "X-Runtime",
      "0.054511",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff91cf39e32af25bada9afa")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff91cf39e32af25bada9afa",
      workspace_id: "l4wp0knn",
      external_id: "testuser2.173970511",
      role: "user",
      email: "testuser2.173970511@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610161395,
      updated_at: 1610161397,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff91cf39e32af25bada9afa/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "156",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0018r9dkptvfvcfjgn3g",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"f1d310017737f77ec39b2d4b0ac4f8a0"',
      "X-Runtime",
      "0.067795",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff915c8a0aab83738fd4607",
          workspace_id: "l4wp0knn",
          external_id: "testuser1b.2181442179",
          role: "user",
          email: null,
          phone: null,
          name: "New Id",
          avatar: null,
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610159560,
          updated_at: 1610159880,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {
            text_field: null,
            number_field: null,
            decimal_field: null,
            boolean_field: null,
            date_field: null,
          },
          tags: {
            type: "list",
            data: [{ id: "4919479", type: "tag", url: "/tags/4919479" }],
            url: "/contacts/5ff915c8a0aab83738fd4607/tags",
            total_count: 1,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff915c8a0aab83738fd4607/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff915c8a0aab83738fd4607/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:18 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "155",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0019979qckf6k93dftb0",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"bbc773fcf9117e428e03645f40d1c36b"',
      "X-Runtime",
      "0.218456",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff915c8a0aab83738fd4607/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff915c8a0aab83738fd4607", object: "contact", archived: true },
    [
      "Date",
      "Sat, 09 Jan 2021 03:03:19 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610161400",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "154",
      "X-Intercom-Version",
      "d058884919093fae1f88f517d5b742658b632648",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "001a3qgmt85jsrvkta80",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"0698e1263a6cdeaf37f3a30ebb82f5c4"',
      "X-Runtime",
      "0.072572",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
