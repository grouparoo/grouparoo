const nock = require("nock");
process.env.INTERCOM_RANDOM_NUMBERS =
  "[1263331835,2252762600,2845253129,3316377576,538213336,9849701695,3291288193,3872456304,8103151283,4702774081]";

nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts")
  .query({ per_page: "150" })
  .once()
  .reply(
    200,
    {
      type: "list",
      data: [
        {
          type: "contact",
          id: "5ff89754986eb6df10a2e222",
          workspace_id: "l4wp0knn",
          external_id: "6f8a63de-1415-4fd7-9bb1-5d3021e6a357",
          role: "lead",
          email: null,
          phone: null,
          name: null,
          avatar:
            "https://static.intercomassets.com/app/pseudonym_avatars_2019/teal-clover.png",
          owner_id: null,
          social_profiles: { type: "list", data: [] },
          has_hard_bounced: false,
          marked_email_as_spam: false,
          unsubscribed_from_emails: false,
          created_at: 1610127188,
          updated_at: 1610127188,
          signed_up_at: null,
          last_seen_at: null,
          last_replied_at: null,
          last_contacted_at: null,
          last_email_opened_at: null,
          last_email_clicked_at: null,
          language_override: null,
          browser: null,
          browser_version: null,
          browser_language: null,
          os: null,
          location: {
            type: "location",
            country: null,
            region: null,
            city: null,
          },
          android_app_name: null,
          android_app_version: null,
          android_device: null,
          android_os_version: null,
          android_sdk_version: null,
          android_last_seen_at: null,
          ios_app_name: null,
          ios_app_version: null,
          ios_device: null,
          ios_os_version: null,
          ios_sdk_version: null,
          ios_last_seen_at: null,
          custom_attributes: {},
          tags: {
            type: "list",
            data: [],
            url: "/contacts/5ff89754986eb6df10a2e222/tags",
            total_count: 0,
            has_more: false,
          },
          notes: {
            type: "list",
            data: [],
            url: "/contacts/5ff89754986eb6df10a2e222/notes",
            total_count: 0,
            has_more: false,
          },
          companies: {
            type: "list",
            data: [],
            url: "/contacts/5ff89754986eb6df10a2e222/companies",
            total_count: 0,
            has_more: false,
          },
        },
      ],
      total_count: 1,
      pages: { type: "pages", page: 1, per_page: 150, total_pages: 1 },
    },
    [
      "Date",
      "Fri, 08 Jan 2021 17:57:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610128670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "167",
      "X-Intercom-Version",
      "41652c563b657eaef3b0eaff0288a9eb94c2722f",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0010kr58kkqodvnkes60",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"b264bd38a075428bf8327b58fa460d09"',
      "X-Runtime",
      "0.074937",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts/5ff89754986eb6df10a2e222/archive", {})
  .once()
  .reply(
    200,
    { id: "5ff89754986eb6df10a2e222", object: "contact", archived: true },
    [
      "Date",
      "Fri, 08 Jan 2021 17:57:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610128670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "166",
      "X-Intercom-Version",
      "41652c563b657eaef3b0eaff0288a9eb94c2722f",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0011tnjbsdv408e2urrg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"d284c22ae80d7cb817a4ee2d2c317b89"',
      "X-Runtime",
      "0.056035",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", { role: "lead", email: "testuser2252762600@demo.com" })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff89d1b9e32afd348aa8778",
      workspace_id: "l4wp0knn",
      external_id: "2cac899d-966d-4d41-90da-45288024855d",
      role: "lead",
      email: "testuser2252762600@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610128667,
      updated_at: 1610128667,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1b9e32afd348aa8778/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1b9e32afd348aa8778/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1b9e32afd348aa8778/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Fri, 08 Jan 2021 17:57:47 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610128670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "165",
      "X-Intercom-Version",
      "41652c563b657eaef3b0eaff0288a9eb94c2722f",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00111ii6vqettjosu7ag",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cb68db5453b3d995942d119ff5f0e657"',
      "X-Runtime",
      "0.261582",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=54f61be1-a74f-4b48-a04f-17bc99bc369b; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff89d1b9e32afd348aa8778")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff89d1b9e32afd348aa8778",
      workspace_id: "l4wp0knn",
      external_id: "2cac899d-966d-4d41-90da-45288024855d",
      role: "lead",
      email: "testuser2252762600@demo.com",
      phone: null,
      name: null,
      avatar: null,
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610128667,
      updated_at: 1610128667,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1b9e32afd348aa8778/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1b9e32afd348aa8778/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1b9e32afd348aa8778/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Fri, 08 Jan 2021 17:57:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610128670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "164",
      "X-Intercom-Version",
      "41652c563b657eaef3b0eaff0288a9eb94c2722f",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "00043uj4r6f8jo3jo3tg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"cb68db5453b3d995942d119ff5f0e657"',
      "X-Runtime",
      "0.077378",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .post("/contacts", { role: "lead", external_id: "testuser2845253129" })
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff89d1cadb32b457bffd4d1",
      workspace_id: "l4wp0knn",
      external_id: "5876affb-5db6-4a77-a122-46bab4264784",
      role: "lead",
      email: "",
      phone: null,
      name: null,
      avatar:
        "https://static.intercomassets.com/app/pseudonym_avatars_2019/orange-lightning.png",
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610128668,
      updated_at: 1610128668,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1cadb32b457bffd4d1/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1cadb32b457bffd4d1/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1cadb32b457bffd4d1/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Fri, 08 Jan 2021 17:57:48 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610128670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "163",
      "X-Intercom-Version",
      "41652c563b657eaef3b0eaff0288a9eb94c2722f",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0011tnu2ov04qevlfnqg",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3b9119c818432e0ba14d1ad76f96b6fe"',
      "X-Runtime",
      "0.146487",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Set-Cookie",
      "recent_write=aaad171c-83a5-4420-83cc-a4a187ab9c01; path=/; max-age=1; HttpOnly; secure",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
nock("https://api.intercom.io:443", { encodedQueryParams: true })
  .get("/contacts/5ff89d1cadb32b457bffd4d1")
  .once()
  .reply(
    200,
    {
      type: "contact",
      id: "5ff89d1cadb32b457bffd4d1",
      workspace_id: "l4wp0knn",
      external_id: "5876affb-5db6-4a77-a122-46bab4264784",
      role: "lead",
      email: "",
      phone: null,
      name: null,
      avatar:
        "https://static.intercomassets.com/app/pseudonym_avatars_2019/orange-lightning.png",
      owner_id: null,
      social_profiles: { type: "list", data: [] },
      has_hard_bounced: false,
      marked_email_as_spam: false,
      unsubscribed_from_emails: false,
      created_at: 1610128668,
      updated_at: 1610128668,
      signed_up_at: null,
      last_seen_at: null,
      last_replied_at: null,
      last_contacted_at: null,
      last_email_opened_at: null,
      last_email_clicked_at: null,
      language_override: null,
      browser: null,
      browser_version: null,
      browser_language: null,
      os: null,
      location: { type: "location", country: null, region: null, city: null },
      android_app_name: null,
      android_app_version: null,
      android_device: null,
      android_os_version: null,
      android_sdk_version: null,
      android_last_seen_at: null,
      ios_app_name: null,
      ios_app_version: null,
      ios_device: null,
      ios_os_version: null,
      ios_sdk_version: null,
      ios_last_seen_at: null,
      custom_attributes: {},
      tags: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1cadb32b457bffd4d1/tags",
        total_count: 0,
        has_more: false,
      },
      notes: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1cadb32b457bffd4d1/notes",
        total_count: 0,
        has_more: false,
      },
      companies: {
        type: "list",
        data: [],
        url: "/contacts/5ff89d1cadb32b457bffd4d1/companies",
        total_count: 0,
        has_more: false,
      },
    },
    [
      "Date",
      "Fri, 08 Jan 2021 17:57:49 GMT",
      "Content-Type",
      "application/json; charset=utf-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "close",
      "Status",
      "200 OK",
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-RateLimit-Limit",
      "167",
      "X-RateLimit-Reset",
      "1610128670",
      "Strict-Transport-Security",
      "max-age=31556952; includeSubDomains; preload",
      "X-RateLimit-Remaining",
      "162",
      "X-Intercom-Version",
      "41652c563b657eaef3b0eaff0288a9eb94c2722f",
      "Vary",
      "Accept-Encoding",
      "X-XSS-Protection",
      "1; mode=block",
      "X-Request-Id",
      "0010pj1tgakh5guubv60",
      "Intercom-Version",
      "2.3",
      "ETag",
      'W/"3b9119c818432e0ba14d1ad76f96b6fe"',
      "X-Runtime",
      "0.077424",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Server",
      "nginx",
      "x-ami-version",
      "ami-0caee270783354d08",
    ]
  );
