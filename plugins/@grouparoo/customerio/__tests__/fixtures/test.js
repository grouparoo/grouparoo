const nock = require("nock");

nock("https://track.customer.io:443", { encodedQueryParams: true })
  .post("/api/v1/events", {
    name: "grouparoo_test_connection",
    anonymous_id: "123",
  })
  .once()
  .reply(200, {}, [
    "Access-Control-Allow-Origin",
    "*",
    "Cache-Control",
    "no-cache, no-store, must-revalidate, max-age=0",
    "Content-Length",
    "3",
    "Content-Type",
    "application/json; charset=utf-8",
    "Date",
    "Fri, 14 Jan 2022 02:22:57 GMT",
    "Status",
    "200 OK",
    "Via",
    "1.1 google",
    "Alt-Svc",
    "clear",
    "Connection",
    "close",
  ]);
nock("https://beta-api.customer.io:443", { encodedQueryParams: true })
  .get("/v1/api/campaigns")
  .once()
  .reply(
    200,
    {
      campaigns: [
        {
          id: 1,
          deduplicate_id: "1:1621034879",
          name: "Onboarding Campaign",
          type: "segment",
          created: 1612544047,
          updated: 1621034879,
          active: false,
          state: "draft",
          actions: [
            { id: 3, type: "email" },
            { id: 7, type: "email" },
            { id: 9, type: "email" },
          ],
          first_started: 0,
          tags: ["Sample"],
          trigger_segment_ids: [1],
        },
        {
          id: 2,
          deduplicate_id: "2:1621034879",
          name: "Re-engage Inactive Users",
          type: "segment",
          created: 1612544047,
          updated: 1621034879,
          active: false,
          state: "draft",
          actions: [
            { id: 13, type: "email" },
            { id: 14, type: "email" },
            { id: 15, type: "email" },
            { id: 18, type: "email" },
            { id: 19, type: "email" },
          ],
          first_started: 0,
          tags: ["Sample"],
          trigger_segment_ids: [1, 2],
        },
        {
          id: 4,
          deduplicate_id: "4:1621034879",
          name: "Order Confirmation",
          type: "event",
          created: 1612544048,
          updated: 1621034879,
          active: false,
          state: "draft",
          actions: [
            { id: 26, type: "email" },
            { id: 29, type: "email" },
          ],
          first_started: 0,
          tags: ["Sample"],
          event_name: "purchase",
        },
        {
          id: 5,
          deduplicate_id: "5:1621034879",
          name: "Anniversary Campaign",
          type: "date",
          created: 1612544048,
          updated: 1621034879,
          active: false,
          state: "draft",
          actions: [
            { id: 32, type: "webhook" },
            { id: 33, type: "webhook" },
            { id: 34, type: "email" },
          ],
          first_started: 0,
          tags: ["Sample"],
          frequency: "yearly",
          date_attribute: "created_at",
          timezone: "US/Eastern",
          use_customer_timezone: false,
          start_hour: 10,
          start_minutes: 0,
        },
      ],
    },
    [
      "content-length",
      "1390",
      "content-type",
      "application/json; charset=utf-8",
      "date",
      "Fri, 14 Jan 2022 02:22:58 GMT",
      "strict-transport-security",
      "max-age=15768000",
      "x-frame-options",
      "SAMEORIGIN",
      "x-content-type-options",
      "nosniff",
      "x-xss-protection",
      "1; mode=block",
      "referrer-policy",
      "no-referrer-when-downgrade",
      "connection",
      "close",
    ]
  );
