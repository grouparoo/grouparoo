const nock = require("nock");
process.env.BIGQUERY_JEST_TIMESTAMP = "1640212601170";

nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02ff1dd0516e82300000d0bbf0ada6b612647f20189489a280b53f4de998eb2a424a95c2b2bbcfec08effd588cf3aaeba86e6475b7deac814177c66725f0f0138c59121bed016317ed366ba62b20e707d089cb0ea73951cfa3f4f7f67b70c2b9bcd18efaf721df5c1d9f3acade789dabf457d1879f49de42ee2c1e07192e6f497a006c1581144f658db23a162280fc7c81a4c8cafb1aaf3ee01ece8519aec08c5c97578f313ea278395e0616d4daf5a2b8a7b773cb4ed9384d72888c87b784ac4f3d2ac94e6fc3d8d9347b9298f09b8cc7b34451533c96b56a163c107d8e038ea31435d6c4aa4c2b54d551f17223db7527d67f02d5435bbd26fc8aa94a59bf7f04e1042623010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:42 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT first_name FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-1-1640212601170",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5d",
      "4f",
      "db4010fc2bd6f595c49ff994a21681dba60aa9709ca23e4577e7b539b07dcedd199a22fe7bf76c48a195e0cdbed999d9d9dd07722bea8ccc0913c5be0575f87023193921606881af557688afefa76c136d79bdff1dbabfae0edf2e170bac1096a569d59430d0b2551cf47cbb19164ab60d55520e5068e00ffc71e4057e30f67c7fe2214d4399af447d8be46b631a3d77dd67eb61216551026d841e72591ddfddbbc06d94bc016eb4fbdad14513edbee9f9b1949c1a21ebc57683fead06b5838a8a123bf84bccd8a7d7ca4341ab6181c5778203e55cb6b5b15da10497752e8a5675aa64fe40ba2e5f7c904dbc8acf5227174a9b5d4d2b703e27df2f1c03da0c1570a932ed5c7d8d93d81199b3707c14cd1013752799525682957b0abdfc7fd296400dd5d083bb8937a6fed49bb19c4d783e0d472cf780b1299b8c68c83c3e8b20ca1850e419abdeb1682deb2c986541386361988fa23c621e8d82b1cfc7d463f9246061e665a380cd02f27842ee9530702e7423b5e8a393ab6499c6bb34d9aecf4ed3b88b91d3b634e77d7336c4cb3eed00769e67f3be91edd1a242a29b9de5729dc6c9e959bafc11f7eb5b4141f961b3c705e6b4d480e5b8f6f4d0e0ccc8e5364e7e92fe29811c14d4fcfd59627107bc77bccfa784a5784ce8a20dfee3e2b8b61e5c41bf4051d95e8eec6036094957acccbf58e8fb53c48e276415a182da3c05ea4f893c3e99b5fa588420ce7dbd5c7f41f40ff96e8f6ac8030000",
    ],
    [
      "ETag",
      "mdyEhw8bS4Ucnqz3/xWyJQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:43 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-1-1640212601170"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "51",
      "4f833010c7bfcbf92844206e264bf6e096451709d9c03d99c574ecc032e0b03d3464e1bb7b65beb4f7bffedafba557b8e8f60c0b38e9f2bb4733dc95c87b57a468fb9aad6c1db516c10364550a99105f82d92e2ab3d9fafee14d0de9beeaf6cba51036ffc246c1e20a85c6fa6c61f17185563528d70a6d2c7f4ec1031e3ad7cbded36df222b9a1b3cbc9218e9f57f106c6e3e84145a7140b34d8e6e8deec0c5598f3d6e95ad57435fa967a93a385099e0e4a437da70c912f1d3ff4c3f9631085d13c08c3a740b89a72c59a5a410f19c8142656754abf220ba100662ac5bb98d61f696f8c46a774fca75703a3dd1992c916ddd0e026b02627c522cba6470f7225fff1aaf996c73ff5db3f706c010000",
    ],
    [
      "ETag",
      "Notk05P2gS5C+/KayRQjpQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:43 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d3",
      "4b",
      "72",
      "82",
      "30",
      "00",
      "00",
      "d0",
      "bb",
      "64",
      "ad4e0441e90e918f28a22646709381180ba245c34743a777afd36bd47787f70d12c67855d1ba2cf817f80032518c011ba4d08c5ad8e175bc209dc99043c924edb37b5ba0cac0ddc36e9e16bd3baafaf49cfdd60c777e47b0032fcbb2f34bd157515408b97b8ca3761690d1e59aadbd420a5a90343614e186218ba68e84867e4c27e813338b54da04aea28d87118665a6abc7350a86ba2686a7d6dd7ac17ca90f7d2b32db31bd877975b52eb614faacc847cadea275dcacfad0cdd0c1ce94d10dc1d909cf2d991d92c579753e6d88ddc81cba5ec2e719cb77ba1f0cdedefe1dd003fc79cb05af68fedaae6a86d1037ff5692d6ffcf57fca13c105f8f90584b9073b19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:43 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ltv FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-2-1640212601170",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b",
      "6f",
      "9b",
      "30",
      "14",
      "fe2bc87b6d8249089048d156a56c8d94662b21adb697c89803734b30b54da7acea7fdf31b459ab4aed1bf8bb9ddb03b915754e662413e55d0beaf0e94666e484806125befefe7159adfe864dacf921b8fa959fdf5d78a7e57c8e0c61559aed9b0a065ab68a839e6d37c352c9b6614aca011a0d46032ff0e9c81b05d4f3428a320d55b112f5ad3537a6d133d77d8e1e96529615b046e82197fbe3bb7b3f721b256f801bedbe4e743144bbef667eae246746c87abedd607eab41ed60cf448515fc17e6d997d7ce43c1f6c312c9f78203e35cb6b5b155a105977521ca5675ae64f640ba2a5f7c904dbc8a17a953997be76bf2fdc231a0cd5001972ad7cef5799cc48ec89db9e3a15b8e98a83baf946515589fa76e976f476c05cc300d3db80b69c0bc884eb3220b79118d27594121cba22c9cb07146f9d4073fcf80a1ce58f74ec56a5947bcf078e64ff2e9289f8017fafe24a4348af2dc0b58c83d8ed30b423a258f27e48f1206ce846ea4167dcfe43a59a6f12e4db6ebc5691a776d14acadcc595f9c6de2659d76003b4a6dbfeff4f668512131cd0e71b94ee3e474912eafe27e6f2b28193f6cee707305ab34201df79d1e1a9c19b9dcc6c94fd23f255080829a7f3c4b2477c04757fb7c4348c52bc2146df01f17c7b5cde00afa058abdade5a81e87d4271d599937583409103bde8e75843dd4e6a9a1fe86c8e35358ab8f240471eeebe5fa1ba2ff00e4554d81c1030000",
    ],
    [
      "ETag",
      "hPQlLz7pEscy6VZdHqM1Ag==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:43 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-2-1640212601170"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "4d",
      "6f83300c86ff8b778509503f06520f741fda24b6b5ddaa1da61e5270192d609a9876a8e2bfcfa1bb247e9d27f1a35ce050d41944b02df2638bbabbc99197b658a1694b36b235541b040790552ee4be79bd5b84c7b81a8f0ed557387dc065f87b9ecd8430e90f560aa20bec0a2c3303d1f7056a55a15c2bf92404778d0d4fc97bfc29b1a2ccc6b77592c4f3e411fa4defc09eb62bdca1c63a45fb56a3698f29bf584da3aaa644d750ab533430c0c341aea96d942672a5e306ae3f1979811f4c3cdf9f7ac295942a2ea81674fd0132858955b9a2b348822f801e4af1dd0deb49dac138bcf5032bb5f9e7e71da3596892d906ed58efaa704f568b4597758b0ea44a7ee2b9e06beeff00c568eda666010000",
    ],
    [
      "ETag",
      "jpM8P9qAm54kmW97DeQ9xw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:44 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08000000000002ff1dd0c97282300000d07fc9d93a6814a537416551c4854d2f99240405654b14219dfe7b9d7ec27b3f0053ca8440cfeace4af00d7a3cd68674489445dc2ad2dfdd2af32a83757a90732f7827ac933e8ed5c8dacfa37264c075dce085f40308f1ea386b5b7d137077337ebcdee275262417a22f1577c6b7a6f1885835cadb4dbaefccad3ab9236e37655a6887ba9ebb23e29dd69c121a91ac837dd358c5174d35c3d8f255728a2991373b0ba7c52a0a7d4b75ba9de8bcfccc1c17c9a412baebc1034c5d0dd98eb354cfe5a5a03b8a26366e2ea91993e5a5ce29ab7b51f47178a24fe5780503c0ba3ae34ca0ece386534d1b80ff04f4ec6bf699d019e68c83df3f0a9cb12423010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:44 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ios_app FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-3-1640212601170",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "61",
      "6f",
      "da",
      "30",
      "10",
      "fd2b91f7718524104840425b47b38d8a51358455fb846ce792ba0d716a3b9d50c57fdf39a1ac55a5f65be277efbd7b77f744ee4595912961a2786840ed3fdd4946ce08185ae06b99c05575a90a4e87835bfe79e3d3f01bbd9ecdb0425896a6bbba849e968de2a0a79b75bf50b2a9a992b28742bd61cf1f07dec01f8c3ddf0f3da46928f3a5a8ee917c6b4cada7aefb6cdd2fa42c4aa0b5d07d2e77a777f771e0d64ade0137da7dede8a28976dff5fc524a4e8d90d56cb346ff4683dac28e8a123bf84fccd8d7d7ca7d4177fd028b1f0507cab96c2a63bb42092eab5c148d6a55c9f489b45dbef820eb7819cf534748bda575ed7c4fae7e3906b4e92be05265dab9f91927b1233267e6f8a8982126aa562fa5ac04ab754cbc783b664ba0866ae8c06de88da91f791396b390e7d170c4720f188b5838a243e6f1490041c68022cf58f596452b597913f0c61c861ca22cf347e1847b9380e5791466c12888c6233ef023dfcfc9e18cfc55c2c085d0b5d4a2cb4d6e92451a6fd364b39a9fa7711b23a74d692ebae66c88977dda016c3dcfe67d27dbc1a242a29b1de46295c6c9f93c5dfc8ebbdd2da1a07cbf7ec0ede5b4d480e5b8f3745fe3ccc8f5264efe90ee29811c1454fce35962710b7c74b9cf7784a57849e8a20dfee3e2b8b61e5c41b740b1b3bd9cd8c1289a90b658993758185aec743f561176509963a0ee8ec8e168d6e853118238f7d562f503d17f121732d3c5030000",
    ],
    [
      "ETag",
      "lReOnJrgca32hc+U1a7BaQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:44 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-3-1640212601170"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00000002ff2d90516bc23010c7bfcbed7196b56e38107cd051d8a0d4a9f361888cd85e6b5c9acb92d4598adf7d97ba97e4f2cfef723fd2c3b7d4254ce120eb9f166d7757a35f85628dae55def166483b8411a017359362a32ff9bdaa54767c483fc4f262ce9fdbd56cc6842b8ed80898f6504954a583e9ae072d1ae43649ee4b18c394ef4c0816cb6596ce730e1a2a43906fb36cbec852b8eeaf2338d1618d155ad40586178da51316fe2dc83ad1188591a3d616e86080878bda526b84258a38891ea364f2148f93f1244e92e798394585f09234a3db0df0144f5ea835fdb22a240cd8a164eb6a58cf1c7bdb6250daffd38bcea37bb7c4931d86a1f14de085829467d9d0318242f06fbc4a7f3b5fff00545e7fdb6a010000",
    ],
    [
      "ETag",
      "aSnxN+lflLh/ETaOxpvYUQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:45 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d3",
      "4d",
      "72",
      "82",
      "30",
      "1800d0bb646d1d44fed21d696315120b8216dc30f46b642256189282d8e9ddebf41af5dde17da312402855e8a61667f488c6d2c45398be1b7ed61bd7947bdc0dbfc067831c1698f8a64e6ab2482ac7cc041f037c527266d589c736183ef6d1b8693c5a2b2c2ae857605b91c3a1aa38670d4461bcb60aaee9498b372a037c4c9fb66da2af56ee9f0feac8aefe7c478b646bbc96b86781dc75d1aaa46e4cb4b6bb672337c18918497be25e7296850e51c1f0e91e55cbc7701836e9b0f458e1cecaddb6cfd6b6f9727a0068d784f3e09237f1a192c9be9be74b8fc0825a747a77f7efa009129756764215f2b67d6e633c417ff50b3db6e2f69f88b2131dfaf905914f8e2c19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:45 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT first_name FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-4-1640212601170",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5d4fdb3014fd2b91f7c00b6d9ce6aba9540d54b2ad12eb449a8278aa6cf7267349e22c766015e2bfef26810e84046f89cf39f79cfbf148ee64b52333c265fea785e6f065af38392560588eafae7bedb0bdb96e178cf2fcd69107165d3dcce7c8909d4ab3b22e60a455db08d0b3cd7a9c37aaad59a3d4080b8dbc91137874e24c02ea382145998622bb94d51d8a7f1b53eb996dbf588f73a5f202582df558a8f2f86edf4fecba517b1046db6f1d6d34d1f6879e5f0b259891aa9a6fd6e8df6a68b65032596082ffc21d3f7b5b792c5939ce917c2f053021545b992e159610aaca64de367d55327b247dca571f641d5fc68bd4ca64a3cdb6622558df925f3f2d03da8c1b10aad969ebe6479cc4569fc49a5b27b0472b25353d83bf7d90ceec04dd76289255ef95325e40e7f33c8de5fb15740266988601dc863460ce94463ce3a1c8a6aecf330a9c4f79e83397531179e0ed3830d499ae7aaf6295aa7ccea63cf0c328747d1a785ec6b388724f7891efd348384140271e842e793a250f8d34702175adb41c66426e92651a6fd364b35a9ca771df46c6dac25c0ce1ba265ee7ec26b3a5d441e207bd3d75a854e8d60d79b94ae3e47c912eafe361af9790337158ffc1cd66acd08074bc87f450e3ccc8d5264e6ec9f09440060d54e2f35922b9073ebbea971b432a5e19ba6883ffb838a13b0fd1c0b0405976598e6adf9d7aa42737e61de6bb3e62c7dbea2a420995796e68b831f2f46cd6ea2309419cfb6ab9fa8ee83f585a6fbce1030000",
    ],
    [
      "ETag",
      "33V1ajtVuCa0bgY1iya9Qw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:45 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-4-1640212601170"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "51",
      "6b",
      "c2",
      "30",
      "10",
      "c7",
      "bf",
      "cb",
      "ed712db4220e041fe6709bac88abf3652223b6d72eaeedd5cbd551c4efbe4bdd4b72ffcb2fb91fb9c08f6d7298c2c196a70eb9bf2b51de7d91a2eb2a71bab5d4388400504ca9e4e7fab4eafa7ecdcf69727f7ee3793e625bce664ab8ec1b6b03d30b1416abdcc1747781c6d4a8d70acb4ebe861080f4adef6d3ed2e5ea45734db9cfab6d923cce93055cf7d7008e7448b140c62643ff66cb74c44c965ed799baad3074d471860e0678382899bad63051a89d701cc69371348a4793288e1f22e52aca8c586a14dd6e40a70889a952fa55598815e0a154ef6258cfda5eb045afb4ffa7e7bda05b33e964877e68741378222f252a2bdc610099d1ff78b572cbd73f8b12939a6c010000",
    ],
    [
      "ETag",
      "ZPqNuyyPrFRL+vKrBd2rig==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:45 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d3",
      "4d",
      "72",
      "82",
      "30",
      "18",
      "00",
      "d0",
      "bb",
      "646d1d44fed21d696315120b8216dc30f46b642256189282d8e9ddebf41af5dde17da312402855e8a61667f488c6d2c45398be1b7ed61bd7947bdc0dbfc067831c1698f8a64e6ab2482ac7cc041f037c527266d589c736183ef6d1b8693c5a2b2c2ae857605b91c3a1aa38670d4461bcb60aaee9498b372a037c4c9fb66da2af56ee9f0feac8aefe7c478b646bbc96b86781dc75d1aaa46e4cb4b6bb672337c18918497be25e7296850e51c1f0e91e55cbc7701836e9b0f458e1cecaddb6cfd6b6f9727a0068d784f3e09237f1a192c9be9be74b8fc0825a747a77f7efa009129756764215f2b67d6e633c417ff50b3db6e2f69f88b2131dfaf905914f8e2c19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:45 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ltv FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-5-1640212601170",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "53",
      "5d",
      "4fe33010fc2b91ef8117da38e947924ad5814a8e8b0e8a48d343f75439ee266748e3603b7c08f1df6f9d400f84046f8d7766677676fb446e44bd2533928bf2b605f5f8ed5ae6e490806125beaae5af8be579b3884ec33a71abd34b9e30753f9f2342589666bba6828196ade2a067ebd5b054b26d989272808d069381371d53dff3a7d4f3028a340d557126ea1b24ff35a6d133d77d951e96529615b046e82197bbfdbb7be7bb8d92d7c08d76df2bba28a2dd4f35bf57923323643d5faf50bfd5a036b063a24207ff89dbfce87de7a160bb6189e03bc181712edbda5857d882cbba1065abbaae64f6443a976f7e90557c162f32a73277ce8ff4e2dc31a0cd5001976aab9dab9f711a3b9d0567ee1cc0356a48a1e9113c740eacca01ca6c9124ea4e2463790556e02586e463f696c00cd3d01737019d322fa4515ee4012fc2d1242f28e47998071336ca298fc630dee6c090676cf78ec56a5907cc8f8af1b6a0dc2ffc69947bfe380ca6212b26948ea2888d5800d330a2e4f990dc2b61e044e8466ad18741aed2248b3759ba5e2e8eb3b81ba3606d654e7a737688b73e6d321b4a3d047e32dbb3ad0a896a36dd6499c5e9f1224b7ec7fd42cfa064fc71758b2b2d58a501e17808d963839991cb759cfe21fd530a0528a8f9d75922b82b7c75ceafc785503c2f54d106bf71715c5b0daea05fa0d8592f7bf69486dd9fc130653ed4fcc0c6b13f2adb1176509b9781fae322cf2f62adde83b088b92f93e52956ff016ca8ef0bda030000",
    ],
    [
      "ETag",
      "rNKONMpC9G8nI/lGQcIarw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:46 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-5-1640212601170"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "51",
      "4f",
      "83",
      "30",
      "10",
      "c7",
      "bf",
      "cbf93a1488b0b8640fcc0c5dc29cdb5c34317be8e0402670d81e33cbc277f7ca7c69ef7ffdb5f74b2ff05d36194ce050163f1deaf34d81bcb6c5064d57b191ada5c6208c00591542e6ebf77170c78b8fb80cb33987cbf869b58ca653214cfa85b582c905f212abccc0e4f3028daa51ae557c1282cfad0d71b28ade24d694d9f8b24b926896cca1dff72338d26183396a6c52b46fb59a8e98f2c26a1a55b7153a863a9da281011e0e0a4d5dab3491231d2770bcf0def53d3f743d6fec0a5751aab8a446d0dd16640a13ab6a43bf22099e007a28c5371fd693b4fde0e1d6f3add4fe9f9f9d19cdab26996dd08e75af0a8f64b558745977388254c94f3c977ccdfd1f46d315e666010000",
    ],
    [
      "ETag",
      "fQW75/tIXFi6dEt6MFGOMA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:46 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f8b08000000000002ffedd3597282300000d0bbe4db3a127049ffc0da12645321447f188c81098bac8ad0e9ddebf41af5dde17d838831deb6615766fc0adec110413465d3f34ca5f7d9e8b9c7428f3c8b06e2d2a9db30651f28272b77bcc665efc607e7d208754f2526022797eff25b72dad6633b94be45e0ce708ed9a2f7a89d54726c2b8506117270ba4eb1b4e7aebf08885729049af83cd21ef752664a469ecc6dcf90605d59176a7e2ece9bfd0a2b8ace84b18b65c14f54c3bda7aceb7a4ecaabb3392cdba31991c4c2b81e7c6d6b14231e34bf48a2cdcecad5fca66b0a7449764ba019d47d6c7e49cb86213c7d79f977c004f047251ade86e2b95d9e2334017ff5c36ea8f8f3bfc6a38637e0e71719c76a0319040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:46 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ios_app FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-6-1640212601170",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00000002ff8552d14edb4010fc15ebfac00b89cfb163874851a16068040dc57140e525ba3bafdd03c7677c672842fc7bf76c48a195ca9b7d3bb3333bbb4fe456561999122e8bbb169ac74f378a935d028615f87a797a5d5d9c9c9f9c1e7bd7f27b107c79b8a4fc60364384b42ccd36750903adda46809eae96c3a2516dcd1aa506d868100ebc30a0236f1452cf8b28d23494f999ac6e91fcd3985a4f5df7557a58285594c06aa987426db6efeefdc8ad1b7503c268f7bda28b22dafdafe6e7520966a4aa66ab25eab71a9a356c982cd1c11f62c6f7df771e4ab6191608be97029810aaad8c75852d84aa7259b44dd7954c9f48e7f2cd0759c667f161ea48a5d7acae9de3e4fc9b63409b610342359976aebec649ec74369c99b30337a8a3a4a6fbf0ab73619576502a4392ac3aa194f112acc84b14f37ff3b704669886beb88e68c8bc09dde3398f443ef1c73ca7c0f9844763e6732af60208320e0c79c676ef58ac5255c822eafb911f8dd804b2085b84e073ee4d024fd0311fe5c03c11441979de250f8d34702475adb4ec032157c93c8dd769b25a1c1ea4713746cedad21cf5e6ec106f7dda64d6947a08fccf6ccfb62a15aad984e78b344e0e0ed3f965dc2ff50c0a261e9777b8d69c951a108ec7903ed69819b958c5c90fd23f2590430395f8384b0477858f4efaf5c0108a27862adae03f2e4e68ab211ae8172837d6cb961dee793ee9c08df9bb16d1608cb5ed61d98eb081cabc0cd41f18797e116bf5168445cc7d315f9c60f5375fb7c111de030000",
    ],
    [
      "ETag",
      "VKZnQGOGKF1ZiP44BwV0bA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:47 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-6-1640212601170"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "0000000002ff2d905d6b83301486ffcbd9ad82ca7043e8452d651f485d2d1d63a38c548f4ea79e34891b22fef79dd8dde4e3cd73729e6482efba2f2082735d5d0654e34d85666f1719eaa1359a2749bd4670008da8983cfaaf6ffbf25e664170d85cd287e6fdb92caad58a099d7f6127209aa0acb12d34441f13f4a2432eab497f0a299932a3b4419ca6c976bde3a0a3c206bb6392ace3640bf36976a0a17386252aec73b4374a450de6e6c9ca6ad1c9165d4d83ca51c3022f0795a2410a45e472e286ae1fde7a811f849eefdf79ccb5940b53536f9f7100ee62c88836a35f56059f01b52cd9ba5cc61f8e8d1ad02a9dfee97834a85f1471678db6a97715d89095322c6b2b1cc805ffc6636daefbf90fc5dc990d6a010000",
    ],
    [
      "ETag",
      "U1VXQf8pR22SCqOGjZJfdg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 22:36:47 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
