const nock = require("nock");
process.env.BIGQUERY_JEST_TIMESTAMP = "1636335937010";

nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "0000000002ffedd3516e82300000d0bbf45b8dc360657fa082420041b1c20f69b158840116a8c0b2bbcfec1af3dde17d039c24b469e2b6ca69093ec180256596ccac7aa5e93796a13664f16d7df212e647b180644d6ecc70c576e466252fa727bffbe2e7f99da84832ecc47cd215a92e1a9446eabbd82a4ac96dcb070c73d389c8713fb4db63a9de514a75177678c949c9dc831a0c56d8a40b38bdc3f180fa558e2433d089df3db630b2cf29c4dece6ecce9c6b30d514481935e55de3faf798644277f90cb40f63bd3b9149dd85896bc570ab4698c94096a687d310a3d49591d84d499cfdedefe2f3001b4af334e9b387b6d5fc88a32017ff5e376a8e9ebbf4631a71cfcfc02e628bcdd19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:38 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT first_name FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-1-1636335937010",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "0000000002ff85525b6f9b3014fe2bc87b5c13082424448ab62ea56da434d30859b5a7c83607e61630b54da3b4ca7fdf01d2ac55a5f60dfcddceed99dc8b322153c244f65083da7fb9938c9c113034c3d7e4871f6e26a1befabab8b95deeae9f2e0585dd6c860cd1a8342daa1c7a5ad68a839e6ed6fd4cc9baa24aca1e1af506bd81eff99e370abcb1337050a6214f97a2bc47f15f632a3db5ed97e87e26659603ad84ee73599cdeed47d7ae94bc036eb4fd36d1c6106d7f98f92d979c1a21cbd9668df9b506b585828a1c2bf82f4cd8f7b7ce7d418b7e86e447c181722eebd23455a10597652ab25ab5ae64fa4cda2a5f7d9075b80ce7b1950aa5cdb6a4055897d1cf1bcb80367d055caa445bb7d761145a22b166d6004d13c444d95ac694e5d0d81d9b5ebc9f7423a0866ae8c0edd8f1e960e2042c65639e4ebc114b1d606cc2c623ea3187074318260c28ea4ce3deaa6829cbc40d12d70b98e7a5a3613a640e1dbafe80fbd461e9d8655ee2242397052e399c919d12062e84aea4165debe4365ac4e1368e36abf9791cb66da4b4cecd45575cd3c4eb3a9b0120e983be0e0d2a242635735cace2303a9fc78bdf61b7ba256494efd70fb8bc94e61a908e2b8ff715ce8bfcda84d11fd23d45908282927f3e4724b7c06787fb724648c543c2146df01f97c67593c11574cb134553cb493df14743d2929579874dbc00b1d3f9348e5040698e0d7567440ec7b05a9f4808e2cc578bd515a2ff00201d9b88c4030000",
    ],
    [
      "ETag",
      "dB6EU8EsG+IMWLwHzFiaew==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:38 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-1-1636335937010"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08000000000002ff2d90614fc2301086ffcbf9754b58166724e18308284a880e484c0c3165bbcde2b6dbda1b6492fd77afc32fedbdd7a7bd27bdc08fae5218c341e74d8ba6bbc991df5d11a36d0bb6b2d55459040f90552ee4af9e7dbc468bee943533357bc9cbc56edb9c2713216cf28da582f105328d456a61fc79814a9528d7326d2c7f0dc103ee6ad7db6ce3e5fa497249a9cbebdd6af5305dcda1dff71e1ce910638606ab04dd9bb5a12326bc74ba56957581bea5d6246861808783dc505b2b43e44bc70ffc200aa330bcbd0fef46c148b88212c59a2a41771b90294cac8a98ce220b81006628c53b1bd693b4e746a353daffd3d38ed1be1992c916ddd0d155e0919c148b2c9b163d4894fcc7b3e66beeff0087a2d0ad6c010000",
    ],
    [
      "ETag",
      "ziDXK6FyvfqDaDJgmFUTqw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:39 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d3",
      "4b",
      "72",
      "82",
      "30",
      "00",
      "00d0bb646d99018313ba03dbd416c10f0a891b06620c41c440a0423bbd7b9d5ea3be3bbc6f9031c6b54ebbeb99d7e0198c99e518ccf015f2b01056522a8d0fe4bc5bf00fea576712c69553f0e69d7975396fd7b4d0e56deba120efbac63d71bfdfefabb65fc6f971be0a28a39044d708c6ab7a1098b2c15eba43b8c028cc07924a913436ac5e686ee77476fbfaa49112a433fba702c943215c111fc554a3b554383479f9862471b48647e55d185e425c049b1dcdfbd929ba2424a44c3bb852d2345db1215b64a5afbb64cc6cc5a10f0b1d58d5161b0f0fff1798003e28d9729dcafbf6a9ed3813f0573fed46c5efff3d9eb5bc053fbfbe3f38c719040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:39 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ltv FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-2-1636335937010",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b",
      "6f",
      "da",
      "30",
      "14",
      "fe",
      "2b",
      "91",
      "f7",
      "5a48426e808436d4661b12635b08adfa846ce724731be2d476e850c57fdf494259ab4aed5be2ef766e4fe45e54199912268a8706d4e1d39d64e48280a105bede564b48c35ffcd1df6c1c47677fe9e1dacc6733648856a5e9ae2e61a065a338e8e9663d2c946c6aaaa41ca0d1603470432ff4bc60e2458eeba04c43992f45758fe23fc6d47a6adbcfd1c342caa2045a0b3de472777eb7f723bb56f20eb8d1f6eb441b43b4fd6ee6e752726a84ac669b35e6371ad41676549458c17f61c6bebc761e0aba1b1648de0b0e9473d954a6ad0a2db8ac725134aa7325d327d255f9e283ace3657c995aa5d95b5f939f3f2c03da0c1570a9326ddd7c8f93d8129935b35c74cb101355e795525642eb73ea76f176c4ad801aaaa107b791135277ec4c58ce229e8fbd80e50e30366651403de6f0890f7ec680a2ceb4ee9d8a56b21af3dce5cc0fb2c9280bc08d7c3f881c673cce3237a4117779e8b861e44cc8f1823c2a61e04ae85a6ad1f74c6e92451a6fd364b3ba9ca771d7464e9bd25cf5c5b54dbcacb31d0092dee9ebd8a24262523bc0c52a8d93f965bab88efb9d2da1a0fcb07ec0ade5b4d48074dc757aa8715ee4f7264e6e49ff94400e0a2afef11c91dc011f5decf3fd20152f0853b4c17f5c1ad76d0657d02f4fecda5aceea891f76f76ea8326fb020f2103bdf4deb083ba8cca9a1fe7ec8f114d6e83309419cf96ab1fa86e83f54040edcbd030000",
    ],
    [
      "ETag",
      "YnLeT6Pcw4UU00sdxayVtA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:39 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-2-1636335937010"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "4f",
      "6f",
      "c2300cc5bf8b77a55bffa84c207100b46993aa31d8384d1c42eb967669dd252e1baafadde7142e899ff373de4b7af82e9b0ce6702c8b9f0ecde5ae40deba6287b6d36c656ba9b108134056859041b4c66ef3b0f4f1d49439fe5533ddc6dbc542089b9eb05630ef212f516716e65f3d34aa4619d37c16822fad13cfc966f929b2a6ccc9b77d922c57c9130c876102151d7798a3c1264577576ba8c2945f5d4cabea56a367a933295a18e1f1a030d4b5ca1079d2f1422f9846d3288a67d1a31ff8c2694a1597d408baff00716162a577f46bdd930430632979f3713d4b3b8c67f741e8421d6efceac268df0d89b74567eb5f23acc9c56289cba6c309a44a7ee2a5e4ab1efe014a571be766010000",
    ],
    [
      "ETag",
      "13CeuO/A0ehnifexj9lp5Q==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:39 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d34b7282300000d0bb646d99018313ba03dbd416c10f0a891b06620c41c440a0423bbd7b9d5ea3be3bbc6f9031c6b54ebbeb99d7e0198c99e518ccf015f2b01056522a8d0fe4bc5bf00fea576712c69553f0e69d7975396fd7b4d0e56deba120efbac63d71bfdfefabb65fc6f971be0a28a39044d708c6ab7a1098b2c15eba43b8c028cc07924a913436ac5e686ee77476fbfaa49112a433fba702c943215c111fc554a3b554383479f9862471b48647e55d185e425c049b1dcdfbd929ba2424a44c3bb852d2345db1215b64a5afbb64cc6cc5a10f0b1d58d5161b0f0fff1798003e28d9729dcafbf6a9ed3813f0573fed46c5efff3d9eb5bc053fbfbe3f38c719040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:39 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ios_app FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-3-1636335937010",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b",
      "6f",
      "9b",
      "3014fe2bc87b6c1320840091a2ad17b665ca328d90757b8a6c73606e09a6b6495555fdef3b86b66b55a97d037fb773bb2357a229c89c30515d77a06e3f5c4a468e09185ae1eb517688bde0e8bcc927e6eaf45b9e9ce6abdf378b0532845569ba6f6b1869d9290e7abedd8c2b25bb962a294768340a46fe2c980541980491e77b28d350972bd15ca1f8af31ad9ebbee63f4b892b2aa81b6428fb9dc3fbdbb8789db2a7909dc68f765a28b21da7d33f3632d393542368bed06f33b0d6a077b2a6aace0bfb0609f5e3a8f05dd8f2b241f0407cab9ec1a63ab420b2e9b52549dea5dc9fc8ef4553efb209b74959ee58e907a47dbd6f99cfdf8ee18d066ac804b5568e7e26b9aa58e289c85e3a3638198687abf9cb21aacd743c7cbd763b6026aa88601dc45de8cfab197b09245bc8c8390951e3016b328a401f378328569c180a2ce58f75e451bd9780978330e0187b828fc304ab8974c5959c651310da7f12ce4133ff6fd92dc1f931b250c9c0bdd4a2d86bec945b6ccd35d9e6dd7672779dab751d2ae36e74371b689e775da0120e98dbeee2d2a2426d9212ed7799a9d9ce5cb5fe9b0b7155494df6eae717325ad35201df79ddfb6382ff2739b667fc8f09441090a1afefe1c91dc03ef5dede30d2115af0853b4c17f5c1ad736832b189627f6b69647f5d4f3a290f464655e6113cf3a3fdd8e75843d34e6a1a1e186c8fd4358a79f4808e2ccd7cbf51744ff010a822df4c1030000",
    ],
    [
      "ETag",
      "+Rv803+DnT2tkBJT9BTLXw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:40 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-3-1636335937010"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "61",
      "4b",
      "c3",
      "30",
      "10",
      "86",
      "ff",
      "cb",
      "f9712bb454270ef661d58183b2e96488ca9034bb769d6d2f4bae8e32fadfbd747e492e6f9ecb3de4023f65b387296465716ad1763705f2ab2f36e8da8a9d6c861a87300664550839fa781a454627f1e15463f66eed7979fb799ecd8470fa80b582e905f212abbd83e9d7051a55a3b495e4be95314271677c90acd7e962be92a0a6bd0f56db349d27e902fa5d3f8623651bccd162a3d1bf682c1d51f3d2cb3a559b0a0347add5e86080878bc2526b94250a2409e2209ac49338be7b88efc32814ae22adb8a446d0ed1bc8142656d586cea20a91007628c53a1fd65f89d9b6e89576ff74d231ba174b32d9a11f1a5e051ec94bb1c8fa8e316825bff15cf2f5dcff01cae6a33d6a010000",
    ],
    [
      "ETag",
      "+YD+1pcB3hqmebWrrwI4Zw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:40 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08000000000002ffedd34b7282300000d0bb642d8e538890ee2a0a280261108add3001030451c257a0d3bbd7e935eabbc3fb06244968db465d75a577f00e26f28696c9d2e4ca46cb8a0d6cc51c3373d245a7f6d0c3b3a7be8b2ffe2a548db2eef216f6b299d88d974fb71b93c7916af6fe785d9d0b44dd4fc228beacb3a80c8a9c3ccc0a6b490d3f641e0cf308311f75655ef5a65bcdbb214db3241bb02089b115e090ba5ea12ac83a432588cbb96c5c741884f931382e8f45c1d6d706968d93b127db3b298d35744ec752aac3380c7d69475b3efabae02333fd720e5eca746b7b08d4fecee6e5cbcbff0516808e9c35b48dd873bb08115a80bffa513771fafcbfa1a4a10df8f905f8403d7e19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:40 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT first_name FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-4-1636335937010",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b",
      "4f",
      "db",
      "30",
      "14",
      "fe2b91f7c00b6d52726b2a55e396b14aac88341deca9b2dd93cc90c4c176b808f1df779c000321c15be2f3ddcee5915c8b664b668489f2a603f5f0ed4a32b24bc0d0125fef57e7977e7a722e2f0f6fc36271985fef9d1ddfcde7881096a569dd5630d2b2531cf46cbd1a974a762d55528e5068148c26911ff97e98f8b137f190a6a12a4e45738de4bfc6b47ae6ba2fd6e352cab202da0a3de6b27e7d776ff7dc56c92be046bbef1d5d34d1eea79edf2bc9a911b299af57e8df69501ba8a9a830c17fe296edbf571e0b5a8f4b04df0a0e9473d935c6a642092e9b42949dea55c9ec91f429df7c90557a9a1ee54e2194369b86d6e0fcc8ce7e3906b4192be0526db573f133cd52a74fe2cc9d1db8422b29b4b70ff77d106bb6836e5b2489a6f7ca29abc0fa3c4f63f1710596400dd5301437b117d1c9d44b58c1625e4cfd90151e30366571487de6f1248060cb8022cf58f59e451bd9848c4e5914c649ec875e1404052b128f053c48c2d04bf8248abcbd00629f3ced923b250c1c0bdd4a2d8699908b6c91a79b3c5b2f8f0ef2b46fa3a05d658e8770b689b739ed6410f4495f4fb62a243ad9012f96799a1d1ce58bdfe9b0d35328297f58dde0560b5a694038de42fed0e2bcc8f93acdfe90e12983021434fceb3922b82f7c75d12ff78550bc3074d106ff71695c5b0fae60589ea86d961776e0c5e184f460653ed4a653abfc7a5756116a68cc7343c37d91a767b34ebf82b088335f2e962758fd072f36dcb6dd030000",
    ],
    [
      "ETag",
      "xSQX3EGQoXBv5fIBTk2ODw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:40 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-4-1636335937010"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "61",
      "4fc2301086ffcbf9754b865308247c10254a46880c498c8698aedc6661dbcdf62641c27fe73afcd2de7b7dda7bd213ec4dbd851164a6f869d11e6f0ae4a52f52746dc94eb6866a871000b22a84ac0e71920d6fdf3fa6c34192e93f7c6a93fd723c16c2e96fac148c4e901b2cb70e469f27a85585722d37d6f1571702e063e37babb774b678965cd1d6e7c57a3e7f98cca770de9c03d85196628e166b8dfecdc6d20e35cfbcae53555362e8a8b51a1d74707750586a1b658942e9847761af1ff7e3f87e180fa25e245c495ab1a15ad0f50a640a13ab32a583c8424f00db95e29d77ebafb4a7d6a057dafcd39323a37bb524931dfaa1d155e091bc148b2cdb1603d04afee3c5f0359f2f16f709376c010000",
    ],
    [
      "ETag",
      "mw3Kb92XZE97KbczeDuKkQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:41 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "0002ffedd3db6e82300000d07fe9b3315203dabd95ab545c44d0c213a94d45648572139cd9bfcfec37e6f987f3048c73d175595f97a2021fe0c1209af3f956ad4d372f54018d31bfc1636f94b261136f6c8c29aca2cd819e14ca1b427d1a64fb323c67adb22312f270314ee5b5865a1fc7104bb48b4bbb39213da6abae59f895b30e2aec48b69c8288508f9fbf4ededaa87b7f5ce90933e3db8558c49190479634bf8f50b3e3ebd4e5eebec8ac143edc9bb6b9a7e6157f926518ec48ba1db03504162201756b062519d0c58dca31f7b7c75d05ef0c2755e21d06ddd10a25e76f6fff17980131a9a2155d56bcb62f758466e0af7ed63f9478fd37056b450b7e7e01426df57f19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:41 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ltv FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-5-1636335937010",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "53",
      "d1",
      "6eda4010fc15ebfa9097800dc63646424d44dc168952d598d0e605dd1d6bf712e373eeceb434cabf77cf4ed2449192377c3bb3333bbbdc911b51edc8843051dc36a08e1fae2523a7040c2df0354d7e88e3d5d5fcef4ded5f2ea286b9de262ca6534408cbd2745f97d0d3b2511cf464bdea174a36355552f6b0512fe80d423ff4fd20f6236fe0214d43992f447583e45fc6d47ae2ba8fd2fd42caa2045a0bdde772fff4ee1e866eade43570a3dd978a2e8a68f74dcd8fa5e4d408594dd72bd46f34a82deca928d1c17fe28e9dbdecdc1774df2f107c101c28e7b2a98c75852db8ac725134aaed4a2677a475f9ec0759258b649639a539389fd26f5f1d03daf41570a976dad97c49d2c4692d3853e704ae51430aed9dc19fd681553941991d9244d58a64949560051e6298bfcede12a8a11abae236f2423a187b31cb59c4f3b11fb0dc03c6c62c0aa8cf3c1e8f60b4634091676cf796452b59457418e7a35deef1613e0c6336188ec65138a679e0797e1c539f46108e638fdc9f92df4a18b810ba965a7461904d3acf926d96ae97b3f32c69c7c869539a8bce9c1de2b94f9b0c82de98ebde568544259bec7c9925e9f92c9b5f26dd321750507e5cdde23a735a6a40381e4176ac312ff27d9da43f49f794420e0a2afe7e8e086e0bef9df2e36121144f0b55b4c16f5c1ad756832be89627f6d6cb237b34180d07a4052bf3aa16f801d69e0eca76843d54e661a0eeb0c8fd8358a39f40f6cfba5e2ee7cbcf58fd0734273be3d6030000",
    ],
    [
      "ETag",
      "REXiyZZIzkp3VL7ub/0W6g==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:41 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-5-1636335937010"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "0002ff2d90c152c2301086df65bd5287d201a4331c40ad8a5510e5e47008e9525bdb6e49b6301d86777753bc24fb6fbe64bfc9197eb32a811076597a68d0b43729f2872bd6689b82ad6c355516a107c82a15f2ee69f17ac802ca17918ec61b32cbe4e1ed349d0a61f50f960ac233ec332c120be1f7192a55a25c2bf82804b7b50b51bc9c7d492c2971f17d13c7b379fc0897eda50739edd6b847839546f7566d2847cd2f4ed3aab22ed0b3d4188d163ab83b480d35b532449e74bca1e78f8251100c27c1b8eff7852b482bcea81274f30932858955b1a69348822f80e94af1dd77eb51da83e1e4d61f38a9ed3f3f6f19edca90ccb6e8c6f6af0af7e4b45874d934d803ade4279e33bee6cb1f0b89527d66010000",
    ],
    [
      "ETag",
      "8GJKqi3ojJFcF7UorOdDMw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:41 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d3",
      "4b",
      "72",
      "82",
      "30",
      "00",
      "00",
      "d0bb64ad8e0251d21d06417e5644cb67c3509202052c120c9f4eef5ea7d7a8ef0eef1b24694a198bbbaf925ec10b1813012dd285d5c85b2d2b084b7854bfca5eb75ec5f89823458fa4a32f193bb561e8262944d9885e4bf0d1cb12652053775af96bc9d164dd139dc378b107beacc9de0e6e2bbf122abe1cab3c84410e274775b0c531f54213f556561cf4ebdcf2cf0caadac4bd3b9f44d331df95febcf9c0b58ba15155017305d6147d184604e5cea73d7143ef5dd956f7735d30e5b40cce88d5072805c4c0b5d266251dd2d32571e19b20df77a1142d9e9efe2f300374688a96b2b8786c17214233f0573feec6863efe6f69d2d216fcfc020121f02e19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:42 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ios_app FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-6-1636335937010",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "d1",
      "4e",
      "db",
      "40",
      "10fc15ebfac00b89ed388943a4a8a4c134a9420a8e53d4a7e8eebc762f717ce6ee0c45887fef9e0d1484046ff6edccceecec3e90bd285332264ce43735a8fb2f3bc9c8310143737cfd119dfb9753b5abd34b7db15f7e8be4fc6e7e359920425896a687aa808e96b5e2a0c79b753757b2aea892b2838d3ac38e3f0c864130380942cff790a6a1c896a2dc23f98f31951ebbeeb3743797322f80564277b93cbcbcbbb73db7527207dc68f7ada28b22dafd50f36b213935429693cd1af56b0d6a0b072a0a74f09f98b2d3b79dbb821eba39826f0507cab9ac4b635d610b2ecb4ce4b56aba92f103695cbefa20eb6819cd124748bda555e59cc73f2f1c03da741570a952ed5ccfa338721a1bcec439821dea48a1bd53f8dbb8b04a4728952249948d5042590156e4298ac5fbfc2d811aaaa12d6e436f48fd9177c23216f26c140c58e6016323160e68c03c7ed2877eca8022cfd8ee0d8b96b21cd2d00b8230087b740469882d861030e68ffa3ef706ac9701f5793f4cc9e331b953c2c099d095d4a20d845cc78b24da26f166359b2651334646ebc29cb5e6ec10af7dda6410f4c15c8fb62a242ad97417ab248aa7b364f12b6a17ba849cf2fbf50dae34a3850684e32124f715e645ae3651fc9bb44f3164a0a0e49fe788e0a6f0d9393f1f1742f1bc50451bfcc7a5716d35b8827679e260bd3cb3fb3d3f189106acccbb5aaf3fc0dacb51d98e7080d23c0dd41e17797c12abf50b088b98f96ab1fa8ed57fc5e990e5da030000",
    ],
    [
      "ETag",
      "JEF1PArjudPsMkLBEoHwHQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:42 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-6-1636335937010"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02ff2d90616b83301086ffcbedab8222ed98d00fb5163a90da3a648c51469a5e9d9d7a5912575cf1bfef62f725b9bc792ef7901b7cd5dd096238d6d5778f7a78a8d0ee5d51a0e91b6b7853d419040fd08a8ac9ecba7bdda46f41daa67b93f7e54ccbdf55b5583061e427b602e21b9c6b6c4e06e2f71b74a2456eabc97c08a598b283724192e7d97ab9e5a0a5930bb665962d936c0de361f4e042c702cfa8b193e85e549a2e28edb39335a2550dfa867a2dd1c0044f1795a65e094de473e2cffd701ecda368f6143d0661c05c4352d89a3a46cb17e02996ac680abab22a840ce8a964ebf3b4fe706c758f4ee9f04f278345b3d3c4930dbaa1c15d60454ecab2acebf0400afe8d4d6defe7f10f774329496a010000",
    ],
    [
      "ETag",
      "LwPWHDY0DmDQsOuU5rczCg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Mon, 08 Nov 2021 01:45:42 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
