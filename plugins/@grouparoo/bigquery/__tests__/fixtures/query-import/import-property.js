const nock = require("nock");
process.env.BIGQUERY_JEST_TIMESTAMP = "1640201485231";

nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "d0",
      "c9",
      "6e",
      "82",
      "40",
      "00",
      "00",
      "d07f99b31a14d97a6317059cb084e542800e380c4596892ca6ff5ed34f78ef0df2b244d394d127411df8026b7e920ee5a160e4f8c56c817b2f5ce9ba9f065ebb5c7923f739ddbab3b52fc6329609d5542562bd6af414e16491562fbecdb4ada9e64066c86a4e6cedc48bcaf9910ed2e538ca1523b6a6be9ea79faed42b9ba44df422cc9eed7a985ac2962f24e11bd385766dd325bc89a15567711df5da50614659e8e6a8f3c6358db78782a8870f6fa129e5a984f9ea4c92f96ae3202fe0b6d1fbe2cf05bd6981118bebd3e0210e1d275461cfb59d4bd6a34ec00ea0a5c7239a32fc71b39c24edc07f4246d71e7d2614948f6804bf7f1f4f226723010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:26 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT first_name FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-1-1640201485231",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b4fdb3014fe2b91f738da5c7b49a56a43341b9d58d9d27488a7ca764e32b3240eb6c3c610ff7dc709742024784bfcddceed8efc124d4e168489f2ba0375fbee4a327244c0d0125f953e5d5db2ebd32f7fbbe99fd5b991dffceafdf172890c61559ad66d05232d3bc5412f76db71a964d75225e5088d46fec89f465ee0f9d17c12843eca3454c599687ea1f8a731ad5eb8ee63f4b894b2ac80b6428fb9ac0fefee4de0b64a5e0137da7d9ee86288765fcdfc50494e8d90cd72b7c5fc4e83da434d458515fc17e6ece373e7b1a0f5b844f28de04039975d636c5568c1655388b253bd2b59dc91beca271f649b9c2527995308a5cdbea135389fd2f3af8e016dc60ab854b9762e4e93347144ee2c1d3b971c31d1f49619651558bb87a6d72f276d05d4500d03b89f7953eacfbd98156cc68b79386185078ccdd96c4243e6f138822867405167ac7bafa28d6cf220ce83306661584ca222621e8d82a9cfa7d463c52c6061eee59380c501b93f22bf9530b012ba955a0cad938b749d25fb2cdd6d4e8eb3a46fa3a05d65564371b689a775da01ec3dcff6fb4a6ff7161512d3ec2cd79b2c498f4fb2f58f6458df199494df6eaf718105ad34201dd79eddb63833f27d97a49764784aa100050d7f7b9648ee81b78ef7f194908ac78429dae03f2e8e6b9bc1150c0b14b5ade5a09ecefd90f464655e60711423763821eb083534e6a1a1e194c8fd4358a70f240471ee9bf5e633a2ff00841c7d8cc8030000",
    ],
    [
      "ETag",
      "rsHDYbqHJzu6xDOtoP1l+A==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:27 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-1-1640201485231"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff2d90514fc23010c7bfcbf9bac58da1c1253c801024c14587c407434c19b759d876b3bd4916c277e73a7c69ef7ffdb5f74bcf70d4f51e62d8e9e2b745d3dd15c8efae48d1b6255bd91aaa2d8207c8aa10325acce810cc9eee8f6bd6d5f07394bc46a7c9782c84cd7eb052109f21d758ee2dc45f67a85585722dd7c6f2771f3ce0ae71bdf547ba4c16922bdabb9c6c56abc9743587cbf6e2c1817629e668b0ced0bdd9183a60c64ba76b55d594e85b6a4d86167ab83f280cb58d3244be74fcd00f1f87c1200887a38741140a5752a658532de8660d3285895599d24964c101a62fc53befd73f69cf8d46a7b4fda7a71da37d3324932dbaa1c14de0999c148b2c9b163dc894fcc78be65bbe5c0119102ff66c010000",
    ],
    [
      "ETag",
      "3GDoj0D9/kStim4W8NM3wA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:27 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "d0",
      "4b7282300000d0bb642d0e0308a43b60103515691405379908c10a955f90189cdebd4e8ff0de0bd02c639c93a1a9580d3e80a41a9c67f38bea24a33a1d42795e152eccdd75b188f5673badb621aad30817f65d6bf1d60efc4cb26ee3e70f62f901213edb916673ff69f5d1551fa8cc502744a75d6a67f214521d173cc630f028c68e7930edce3ab7496aeed2edb24c94d056a99738a41f936174a3f468ad53be476ea3726adc857182a39031d49758422a8650c686b86ebe8de9337c085347ce14f0abe0685d45669737588e8a96efcb743f98a72f3605678feab585567e61831960cff6d6334e6e6fb7be807006fe13c8205bf69e7019ed590f7eff00f506e48023010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:27 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ltv FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-2-1640201485231",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b",
      "6f",
      "9b",
      "30",
      "14fe2bc87b6d02a40448a468ab52b646ea328d9055dd4b649b03750b98da265554f5bfef18daac55a5f60dfcddceed91dc89262773c24479df813a7cb9958c9c1030b4c4575eed6ff6e7879b652d2f64f2f74234d75a9c2d16c81056a569dd5630d2b2531cf47cbb19974a762d55528ed0683419f961e04d3c3f88a793531f651aaae252347728be31a6d573d77d891e97529615d056e83197f5f1dddd4fdc56c95be046bb6f135d0cd1ee87995f2bc9a911b2596c3798df69503ba8a9a8b082ffc29c7d7beb3c16b41e9748de0b0e9473d935c65685165c3685283bd5bb92f923e9ab7cf54136c965b2cc9ccaec9defe9af9f8e016dc60ab854b976ae2e92347144ee2c1c3b901c31d1f45e196515589fe76e57ef476c05d4500d03b88bbc90fab13763058b78119f4e59e10163318ba6f494797c16409033a0a833d6bd57d14636312f7cce82693e9be453f0a32098469e17c779ee8734e23e0f3d3f8cbc19793a210f4a183817ba955a0c3d93ab749525bb2cddae976759d2b751d0ae32e74371b689d775da01ec3ccff6fb416f4f161512d3ec1057eb2c49cf96d9ea4f32eced124aca0f9b7bdc5c412b0d48c77d67871667467e6f93f49a0c4f2914a0a0e19fcf12c93df0d9d5bedc1052f18a30451bfcc7c5716d33b8826181a2b6b51cd55110ce484f56e61d164eacf3f176ac23d4d098e786861b224fcf619d3e9210c4b9af57eb1f88fe03d819011fc1030000",
    ],
    [
      "ETag",
      "clvhvDyhCmoHoEZHinYsiA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:27 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-2-1640201485231"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "2d",
      "90",
      "c1",
      "4e",
      "c3",
      "30",
      "0c",
      "86",
      "df",
      "c55c5768cb86b6493b740804a88231d809ed90756ee948e292b883a9eabbe3745c12ffce97f8533af8aaed1ee6b0ababef16dde9a2427e0dc51a7dabd9cbd690f5082340569590f5344b0fd9ac5c1af3bbcaed95d5ca3c658b8510bef844a360de4159a3de7b987f74609541b9a6f928049f9a10eef397ec5da2a17d88cf9b3ccf96f91df4db7e0407daadb14487b6c0f056e3e880053f064daf4ca331f2d4ba023d0cf07050396a1be58822e9446994dc8ce3344ec6d3497a9d08a7a9505c931574f306328589955ed38f484200dc508a6f39ac4769a793d9659206a9ed3fbf3c31fa952399ed318c8dcf0ab714b45874d9b5388242c94f3cd47ccefd1fae11c94866010000",
    ],
    [
      "ETag",
      "i8A2jA9fBmmxPLn/nlamJA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:27 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "000002ff1dd04b7282300000d0bb646d1dcb47a13b14cac75885ea28d96420a4052210922860a777afd323bcf7033242a89458758cb6e00d4c9966cfc93c5f3897fbe271dcc1d0352b1cb858864ca1efa6bd1db64e8438643e1e36acff0897ea88228dc0e5a53ea1f23d3712bb636998c6f431b23d24975d09ebad6625f0b3428e7e6e06c3b5da5159dcaf5681d4f7ceb62f56bb6843ac0d8bec9cf7ce097b27b3959e38a06692467d2dd6531242e268462ca111ea1c557a5c8a22cdd4aaf39364bf8ccd8552d21dc568c4666ddf599ec9a808dc97579e8be2fc752d038a1a75edeffe70eb1a0fcc001d7925a8c4d5d3ad9bb63d03ff09584d9c3e27d634135480df3f5776f51823010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:28 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ios_app FROM test.records WHERE id = 1",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-3-1640201485231",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5b",
      "4fdb3014fe2b91f738da246dd2a695aaad2b612b6245a4e9187ba96ce72433a471b01d1020fefb8e13e84048f096f8bb9ddb03b9125546a68489e2ba0175f7e952327240c0d0025fbdec7433bfa5179f8f877fbe85f747ee3d777f9fcd66c81056a5e9ae2ea1a765a338e8e966dd2f946c6aaaa4eca1516fd8f3478137f0fc200a07431f651acafc44545728fe6b4cada7aefb1cdd2fa42c4aa0b5d07d2e77fb77f766e0d64a5e0237da7d9de8628876dfcdfc524a4e8d90d56cb3c6fc4683dac28e8a122bf82fccd8d7d7ce7d4177fd02c9378203e55c3695b155a10597552e8a46b5ae64fa40da2a5f7c90757c122f524748bda575ed1c25a73f1d03daf41570a932ed9cff8893d811993373ec5032c444d5faa5949560bd9e3a5ebe1db31550433574e076ec8da81f791396b331cfa361c8720f188bd838a443e6f1490041c680a2ce58f756452b597913f0461c861ca22cf3c3f1847b9380e57934ce82308846211ff891efe7e4f180dc2a61e050e85a6ad1f54dce93651a6fd364b35accd3b86d23a74d690ebbe26c132febb403d87a9eedf79dde1e2d2a24a6d9412e57699ccc17e9f257dcedee040acaefd6d7b8bd9c961a908e3b4fef6a9c1939dbc4c905e99e12c84141c53f9e25925be0a3cb7dbe23a4e225618a36f88f8be3da667005dd02c5ced6b257477e109096accc1b2c185b6c7f3fd611765099a786ba3b228f4f618dde9310c4b9af96abef88fe033d44f89bc5030000",
    ],
    [
      "ETag",
      "0dOUAwaY+J3ZB5zF/zc/XQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:28 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-3-1640201485231"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b08000000000002ff2d906d4f833010c7bfcbf91622ecc10792bd18664613b239cc1213b3980e0e040bd7b5458384efee95f9a6bdfefbbbde2f1de0ab6a7388e05495e70e757f55a2ddbb2245d3496b7853d41a040fd08a92c9feb1be97bfe1ed7e99bf9dfb4e8beb3694e56ac584c93eb111100d5054287303d1fb00ad6890db2a321f4229a66caf5c10ef76c966bde5a0a1dc05db4392ace36403e371f4a0a6538a056a6c33742f2a4d3566f6d9c91ad12889bea14e67686082a78b5253a78426f239f1e77e78b3086641b8b85bcee621739232612b6a193dbc024fb164854ce98755c1017a2ad9ba98d66f8eadeed0291dffe9b8b7685e34f164836e6870117820276559d675789009fe8da7ca5ecee31f57bffa036a010000",
    ],
    [
      "ETag",
      "yFj9lz17Q5dXqyura/n1lg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:28 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08000000000002ffedd34b7282300000d0bb646d1dcb47a13b14cbc75885eaa8d96420a40522109228a0d3bbd7e935eabbc3bb8384102a25560da335780343a2d963324e27cef13ab9edd63070cd02fb2e960153e8bbaa2fdb9513220e9987bb056b3f82a9daa15023707a2cf7287f4f8dd86ed8293845f4d6b30d24c7750ecb9566c5f0b3408e7ea83ac3b5ea5e59dc2b66bed437ceaacd66eb7041ac050bed94b7ce1e2ff7662d97628baa411ae5399b0f710089a319918446a07354e8512eb253a2668d17c79b69644e94926e2f7a23324bfbcad2448699efbebcf2546487af73ee5354a9737bf5ba4b532dc74f4fff0e1801daf34250898bc776ddb4ed11f8ab8fd5c0e9e3ff9c26820af0f30bdb3c41cf19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:28 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT first_name FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-4-1640201485231",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "5d",
      "4f",
      "db",
      "30",
      "14",
      "fd",
      "2b",
      "91f7c0c368e3b649da54aa0682c08abaa2a5e9104f95edde6486240eb603eb10ff7d3709742024784b7cceb9e7dc8f47722bcb2d99122eb3bb1af4eecb8de2e490806519be5e6f83c1c58e0ecfd717d77fabcb7970f675973ccc66c8908dcab0a2caa16754ad0598e97ad5cfb4aa2ba695ea61a19ed71b041e1dd28137f187a301ca0ce4e94296b728fe6d6d65a6aefb62ddcf94ca726095347da18afdbb7b3f742bad6e4058e3be7574d1c4b81f7a7ecb956056aa72b65ea17f6d406fa06032c704ff855b7ef4b6725fb2a29f21f95e0a6042a8bab44d2a2c215499caacd66d55327d246dca571f64152da293c449a5367653b2029cb3f8f28763c1d8be06a1f4d63857dfa33872da24cecc39801bb452d2d023f8d30669cc0ed06d8b2259b65e09e339343ecfd398bf5f4123609619e8c0cd98066c30a1214ff958a49391cf530a9c4ff8d867234e45e881b7e5c050679beaad8a95aaf4399bf0c01f87e3914f03cf4b791a52ee092ff47d1a8a4110d0a107e311793a240f5a5a3895a6524676332157f13c893649bc5e9e1c2751db46caeadc9e76e19a265ee76c26b3a1b439900f7a7b6a50a9d0ad19f27c9944f1f14932ff15757b5d40c6c46e75879b4d596e00e9780fc9aec299919feb28be26dd530c296828c5e7b344720b7c76d52f378654bc32743116ff7171c2341e4243b740593459f6ea904e7cd292b57d870dfd10b1fd6d3515a180d23e37d4dd18797a36abcd9e8420ce7d395f9e23fa0f54f5fb8ee1030000",
    ],
    [
      "ETag",
      "Yd61Jy02GUJYzpOI6F+yTw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:29 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-4-1640201485231"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b08000000000002ff2d90614fc2301086ffcbf9754b064e6348f8200604834307241a434c19b751dc76b3bdb92c64ff9debf04b7beff569ef49cff0a3cb038c60afb3df1a4d7b9321bfbb22465be76c65aba8b4081e20ab4cc8287a99e3ac5ccd8255f4cacde6e3b8f9dc37e3b110363962a160748654637eb030fa3a43a90a946ba93696bffbe001b795ebad37f1227a965cd0c1e568bb5c3e4e9653e8769d0727dac798a2c13241f76665e884092f9cae554595a36fa936095ae8e1fe20335457ca10f9d2f1437f701f06c360103edc0d6f07c2e59428d6540aba5d834c616295c7d4882c38c0f4a578a7fdfa27eda9d1e89476fff4a465b46f8664b2453734b80a3c919362916553a3078992ff986bbee6ee02e6087a246c010000",
    ],
    [
      "ETag",
      "NNJHeFnOF0ONMtwTXhTYbw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:29 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "d0",
      "4b",
      "72",
      "82",
      "30",
      "00",
      "00",
      "d0bb642d0e8d884d777c14ec88458d31b0618004cd480925a804a777afd323bcf704795972a5b25e5e79033e80ce219a96d3c274e8dd1c7144f5a2714cff4cd2c82ce4632e794793138cc9093a368bc3116d02835d0eeab4c592a5f151106952871e95a71b566e67630b1733d79356e0aebee7366a0f395958aabd78440cc5fa76b687f0dc158fa2c73b58793083a387aae078d92bec6f58b3376ef720ab77579f4951495f5cbf34d1d692d3468cefacf3b10543987e22bc8e6d4f71bd34c49a46a4573f7513e0d5aeae0755b91a8bfb324cfc841a66f9788bc004f0a1151d579978b967738426e03f21eb75cb5f132ecf3bde81df3f236febd023010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:29 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ltv FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-5-1640201485231",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "85",
      "52",
      "d1",
      "6e",
      "9b",
      "40",
      "10fc15747dc84b6cce181bb06435914d5a4b8eab60dca84fd6715ee825c091bb236d1ae5dfbb07899b2852f306373b3bb3b3fb486e457d20339289e2ae05f5f0e94666e494806105be2e96f1bafad35c6c97cb75e45f449786d1ab623ec70a61599a554d09032d5bc541cf76db61a164db3025e5001b0d2683d1d4a71e1df9e1c41b8f90a6a1ccd7a2be45f24f631a3d73dd17e961216551026b841e72591ddfdd7bcf6d94bc016eb4fb56d14511edfe57f37329393342d6f3dd16f55b0d6a0f1513253af8473c64676f3b0f05ab860516df0b0e8c73d9d6c6bac2165cd6b9285ad57525b347d2b97cf541b6f13a5ea44e69ee9d8be4dba563409ba1022ed5413bd75fe324763a0bcedc39811bd49042d333f8dd39b02a2728734092a83b919465255881e71856efb3b7046698861edc0774ca46218db23c0b781e8e27594e21cbc22c98b0714679e4837fc88021cfd8ee1d8bd5b20e9817e5fe21a7dccbbd69948d3c3f0ca621cb27948ea3888d5900d330a2e4e994fc52c2c052e8466ad18741ae93551aefd364b7599ca7713746cedad22c7b737688d73e6d327b4aed65fc67b6278b0a896a36ddd5268d93f345bafa1ef70b5d43c1f8c3f60e579ab3520396e321a40f0d6646ae7671f283f44f09e4a0a0e61f6789c51df0d139bf1c1796e279a18a36f88f8be3da6a7005fd024565bd1cd9511050d2152bf30e8b4663c48e47653b4205b5791ea83f2ef2f42cd6ea63118298fb66b5f982e85f6dbd9fb5da030000",
    ],
    [
      "ETag",
      "CDELmzpFSDDL94F9Mta0Qg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:29 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-5-1640201485231"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "000002ff2d90514fc23010c7bfcbf928d36d30a24b780023a85904a68444c34319b739d876b3bd61c8c277e73a7c69ef7ffdb5f74b5b38e4d50e42d8e6d96f83fa7493212f6d11a3690a36b2d55419841e20ab4cc8783bc3b7f5fd12fb5fc17aae67b78be9f0b01c8d8430c90f960ac216d21c8b9d81f0bb854a9528d70a3e0ac1a7da8669341f7f4a2c6967e3fb2a8ac693e819ce9b730ff6b48d31458d5582f6ad5ad31e137eb59a469575818ea1462768a083bb834c53532b4de448c7091c6f38707dd71b3c047edf13aea044714e95a0ab0f90294cac8a98fe44122ca0bb527cd36e3d4adb0f1eef3cdf4a6dfef9c989d12c34c96c8376ac7b557822abc5a2cbbac11e244a7ee225e76b3e5f00d24f89ea66010000",
    ],
    [
      "ETag",
      "RbGeJW/Qe3Z5WOrG+PF6kQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:30 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "ed",
      "d3",
      "4b",
      "72",
      "82",
      "300000d0bb64ad0e043331dd2120c588304525ac3210424d8b4af9a8a1d3bbd7e935eabbc3fb06b910b2eb787ff99467f002740ec94ccc0ac3665763dc85e2b5aca66830312919bebf33ba6e6198e290aa8f5dc1d75b63e0fefa9ee82cf0620bba9cb3393a99e7286bc6d35298191d20fa8adefae9e6e6a24b0ac57eaf040f3c590dda4e7b31dd68a22cef90b22bc2da7456b029695a13b6d8d27d71944e7a9c1f108c959fd8225ad96e80bdbaef8431a02465d5c287f52d7f1339a7e5985d38ee9db8abc8d16278659151d549419de8ec6a0a97e4d4048b3834bbde6fe6b3a7a77f074c80bc37aa951d578fed16226402feeaf35e37f2f17f29f356b6e0e717965885ff19040000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:30 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ios_app FROM test.records WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test_001" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-6-1640201485231",
    },
  })
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02ff85526d4fdb3010fe2b91f7812fb4796d132a5583956cab54ba91a6437caa6ce79219d238d80e1b42fcf79d13602024f896f8ee79b9e7ee9e5c8ba62033c24475d381bafb7425193924606885af3f934bdd368bf336635faab36dbdbabdf0e1643ec70e61519aeedb1a465a768a839e6d37e34ac9aea54aca11128da6237f1a7981e747c924087d8469a8cb9568ae11fcdb9856cf5cf7497a5c4959d5405ba1c75cee9fdfdddbc06d95bc026eb4fb5ad14511edbeabf9b9969c1a219bf97683fa9d06b5833d15353af80f2cd8f16be6b1a0fb7185cdb78203e55c768db1ae9082cba61455a77a5632bb27bdcb171f6493aed245ee08a977b46d9dafd98f33c7803663055caa423b17dfd32c757a1bcedc39802bd491427bc7f0b77761950e50aa4090687aa19cb21aacc86314cbb7f95b003554c350dcc5de94fa8977c44a16f3320927acf480b184c5131a328f1f4510150c28e28c65ef51b491cd94c65e18c6611cd0048a1829a61032e62791cfbd090b4aa03e8fe2823c1c923f4a183815ba955a0c81908b6c99a7bb3cdbae172779da8f51d2ae36a783393bc44b9f36999de7d9eb7867b6075b1512d56cc2cb759e66278b7cf92b1d96ba828af2bbcd0daeb5a4b5066cc763c8ef5acc8c9c6fd3ec920c4f1994a0a0e11f6789cd7de1a3937e3a306cc51343156df01f17c7b5d5e00a86058abdf5f2843ef2a220207db3326f6a93d8323f1f9665843d34e671a0e1c0c8c3a358a79f9bb088b9af97eb6f58fd07f1d1eeedde030000",
    ],
    [
      "ETag",
      "P8YspnCQpRbBgMUlLvW1eA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:30 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-6-1640201485231"
  )
  .query({ location: "US", prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "000002ff2d90516f823010c7bfcbed15a230670c890fba986c0981c9e2d362965a4f56065cd7160c217ef75dd197f6faefef7abf74845fd59e2181932aff3a34c353896eef8b026d573bcb9ba6d62204804e949e8c639baf66d77cdf47998eabddac5df69bf59a092b7fb011908c7051589f2d245f23b4a2416e5364bf85d64cb941fb609be7e96e9371d0d0d907d9214d37db7407b7e32d808a4e055ed0602bd1bfa80d5528ddbb97b5a2d13586963a23d1c2044f17a5a14e0b431472122ec368b998c7f368b17a899f23e66a92c2296a193d7c024f71e4445dd09555c103662ad9fa32ad3dc7ce74e8958e0f7a3b38b41f8678b2453f747e1778252fe558d677042005ffc69b72f7f3ed1f9a284e486a010000",
    ],
    [
      "ETag",
      "b22sO8/wOQv1Np2jE/n6vA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:30 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
