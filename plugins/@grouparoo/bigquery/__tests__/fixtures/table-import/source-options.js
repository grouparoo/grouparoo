const nock = require("nock");
process.env.BIGQUERY_JEST_TIMESTAMP = "1640201498215";

nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", { grant_type: /.+/g, assertion: /.+/g })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "d0",
      "d9",
      "72",
      "82",
      "30",
      "14",
      "00",
      "d07fc9b33a6040a16fb1a20d4b1444adbc3029dccaa2080464e9f4dfebf413cef9413c8a4088b079e450a03734f0b93e8b665f12f97c4aa3cf5c41a7ced43dd06c77310f812b1b7e07ea49dae78f73cccdcc16379f90ddbd60e3c7e6ae99cb2e59df3cd58cb3ed7b68e4ec724c452b8d7c002d1b2599b85d10db4a7437168cb2b381ebe449e215dd2ecbc526d06c9db77ddaa7d800c2bc93e91dc274bd597b736d946fb2161b7e7982d2aac0e35534447b07275ead2a4176c457a7a93b0b536bd94acc6dbe4b51e54f4a02795b5c5b3cbdce69d1f50a06e130aaa8024d10f4655a8308d3971babba3e41ff09613394f09a5801afa146bf7f66d009d523010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:38 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get("/bigquery/v2/projects/sample-sources/datasets/test_001/tables")
  .query({ prettyPrint: "false" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "b5",
      "91",
      "c1",
      "6a",
      "c2",
      "40",
      "10",
      "86",
      "df657ab5259b44d180870a16949462f12645d6cd54d726bbdbddc92184bcbba36de8a11ea4d0e3fcf3cd073fd3c287360564b0d3fbcf1a7d7347725762ae03c10090e49e77b6890f4f63e99ff3e5c41deb66999a17b39a4e99b8d001b24d7b5dc4883ea74156aec4fb606baf30648481b651241e1ccf071958f1ed7ac577f4681442d682f3f6888a16bf0d8c1792f8f06bd9fb7acb25fc71771c378e95b07e9ce573a6944749da9ab5aeceb118a5511c8964928a2465fc8f6d3c2aeb8bffe8d29b6f6e3216c36102dd1bf39664b920acf84d7177022aeef7c4f1010000",
    ],
    [
      "ETag",
      "oy2hF8arMLJ9pjuyJ4nOnQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Wed, 22 Dec 2021 19:31:38 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
