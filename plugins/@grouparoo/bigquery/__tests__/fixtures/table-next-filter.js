const nock = require("nock");
process.env.BIGQUERY_JEST_TIMESTAMP = "1588841102688";

nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "db",
      "52",
      "82",
      "40",
      "18",
      "00",
      "e077d96b714011a43b0e0b19202795e88659d85fd980a085a1d6a677cfe97b83ef0791ba86692ae7a1850ff48404d918eb7aed0f7b4b2414abd9a71d36a18efd1438a6b860da01b3b627d9b4199f2dd2875b83543e1467c73b0aaa7c59d1ec52a5c2a1dfbb95e98efadb5144b01434ddd3fc322bfc856559876388b5eeec9811918bab075751aa07ec2f166ec8cdbcb7a1085427b9dc876897dfde272119d9e9a43979d14a9e11f0c6722b962eadd9249cbecaf626d76bc5ac63590a242675b61942afa21582ef9171984af6986d7786b142ffcd7216233cae16100e1cfdfe01c58b34d105010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:08 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT MAX(`stamp`) AS `max` FROM `purchases`",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-1-1588841102688",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d",
      "53",
      "5b",
      "6f",
      "9b",
      "30",
      "147ecfaf40ec65939600490850a9daa2847699da4c23645d9f12db1ca85bc0149b6e5195ff3e1b7221cad4edd13ee7bb9cdb6b47d3f4279a47fa85a6639a3c57506ede3d32ac7f541110285191e915a0ea2bc98af1fd1701ce752aeeb297e4f2b2c9a2359aa3ac48a1cb595512e017cb452f295955a092b1ae24ec5a5dcb765d776859667fe4ba0d94431adfd0fc49113c0851f00bc3d8dbe8258c2529a082f21e61d9e1df78e91b45c91e81086e9caa1a52881b6fea7e4a194182b2fc72b9683c541cca156488a6cac5111ce1cfa7ec3d8ab25e22b35f28014408ab72a19c353484e5314daab226974caff2537ed7960fcfd687bef06ffc49a8dd8e7fbe5f732195d61fb4f1425b67e8f75abb0abedd6aeb42ea3e200e7c5d6bd4f808b8a079ad12229c428b5b46778d99fd6524070a458284a4dda5ad1c73842cd7f4708c1d12bb031bc72660ec62c746036c126f08c308036a3308a5dde051ce7267801d6f4022075b433c2403136cb09d81e738d88bfaa6e3f687161e45b6be63d81eea2125200153ca0bc6e9ae77fa24f0c7a1bf9a5dade6be3ff5a7c7f27f95f42cfb2e98c9e43058ce2712d56e558caa544c9b624f1b75d201217bda2eeead2e9e155094944953f54c67f3d00fc69370f6a365432ed80d24886c16cf6ac5629472e8b43874b9a6e1a65093d4bf2ffde05e69d431150920861272721cf47f0c59019bf0bf8f5066ef6f4201e4591ce4e55a0a2ad78df0a3783d2fb57c34ab1d1f08dd91e5ec0925b01467199e657bfb8cb3bb505a90412ef6ad68eea3e9f7f6c452d5b253c354ba9cfe7c36bfaecd77b69d3f8c24513eda040000",
    ],
    [
      "ETag",
      "DFeauJcmpAYHte7GltWmvg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:09 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-1-1588841102688"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "0002ff4d51d14e8330147de72b487d1503645366b287cd2c7106ccc64662667828ec0e9994625b545cf877db02db5eda9e73eeeded393d19a6893ef3728f1e4d94e4d9570dacb9c940acd521045e1782cbada2250774abaa41e04c55ef48e38e83f55b449295ff1706d1e46597cca6d3ae8aa71f40b0ac3b4924f1218762cf257ed7d8ec79ad959880ba91e05fdddcd3a2a934bd5d068bcd7616acae4542f75a7c8d7c7f36f717a8975abdc7726df53b8e3409e1000cca142eafa9183d422a96da36c7a42ac0e2b46629f07e886aece48cd1bac28c524b5296633963cff3468e63bbf79e37541734c522a7a56a8836e83c5e50818b90fe28e7c8e9a2611dec8218624087ab6caed391d2b76ebe1b7bae6bdb0f93d16282ce72db9f626340f165f0bc11c0578c4a5b1cb4191b0da93c51e55aa85004ab41d32996bff69c8b9e335ae31f0f143c2a20020000",
    ],
    [
      "ETag",
      "Zmy25MQXUmbPLzRMU9JZbA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:09 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "4b",
      "72",
      "82",
      "300000d0bb64ad0e0848d21d089529ffd402b2619818918f40085662a777afd37783f7034a4228e7c53cb4b4076f40945bb4211b7780a688cffbe451299992259d0cef7a1eeef892fa9a6621f7ab523a95f99f922f35de63820a16d6fc64e898b37e8a1adc9380c5de7aed3b4f6c6054c9766675f0c68c59276d770c76505057b1c7a89291da25aa143bf1959efbd3c884be84789026e85d79622ffbf728087c4faef3c5b8694e81b95fc12dcf9af6f1ddf617155eccd44a3f0e411b8b0387ed5d0d19994f10ac005dc67aa2bca85f3345436805fe9bc52c46faba9ab49ce8047eff00689ce81a05010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:09 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT MAX(`date`) AS `max` FROM `purchases`",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-2-1588841102688",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d",
      "53",
      "db",
      "6e",
      "9b",
      "40",
      "107df75720fad2aab5b918638814b5964d2a4b8eab006ed2277b5906b209b0845d92ba51febdbbe00b6eaab48f3b9773ce9c997dee298a7a4f8a583d53d488a40f3554db777734523fc90c7094cacc6386ecd8df66e675694de026f8157c34a757e7e76d1569ba19cacb0cfa8cd6150676b60a066945eb125594f60560dfec1b23c7712cc3d04ddb71da560659b220c5bd04b8e5bc64679ab6973148294d33402561034cf3435c7b34b5b2a2778039d34e593541c4b437793f6714234e6871be0a5a0d35836a0d39229954716c8ea32fa7e80382f2412aaa1f09068431ad0b2e95b53098160949ebaa011748cf2228c28de4c3b31350036fe14d43e57272f37e13230e9b0fca24503639fab9512efc6f97caa614b4b78801db34144d7b0c8c93a22109519441075a6477beccffb291038404415cc0eecad663dd4686a3bb51128d71e20c4751a2431439d1788486918e5d0bac3802d445e092bbed47052d862307d948775c63e8c6b609a61b8f631b59094e226768b9801c5b7896a83b8497c33cb80231fb8cb09232b2b34e9dfade24f4d6f38bf5d2f366deec38fe53455e555ffb73511cfaabe5547475ad4a509df1593beca951270e70e16977b8b75c7c354059112a44352b9d2f43cf9f4cc3f9f78e0c715f0b4811de060ff2c2129431e875305471a5e1b6949b54af569eff4372343999f121810a0a7c5cf47f2c5936b6e97fff4151bdff12b241fc8a033de3222cce0db32379b32f797c246f141f005dc736f680a2b1e27f5618baae5bfb8a57df4272410e05df5bd17e8fd6ef97134975474ed326cbc5f697f3e5d7467cefa5f71b80d41a80d9040000",
    ],
    [
      "ETag",
      "vla6dRyl2Wp4AeXSzS+2CQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:10 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-2-1588841102688"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d",
      "51",
      "4d",
      "73",
      "82",
      "30",
      "10bdf32b98f45a6600ab433be3415ba71fc3d8166b2f1d0f11574481c56469eb38fc779300ea25c97b6f379bf772b46c9bedd262c51e6cb64c937d05e27093007dea4304b2ca48aaadc44202bbd5d5403cd1d56fd3f0791fec06d48fde07b3fb5e6ff31d66c970d854c978033957754785145ea790ada4c23f06db2d6fb482e7a06fccf9bf696e693a94867e1a7d4daef91c57869fcec370340e27ac956ab32fd45a9b276c7119c11a0414315c1e520adc424cafc6b1e479998123b11231c876886e6ce44460557281e828caf11daf1f04c19de7b9fe2008baea0c634e2916ba613e63e7f184c4b308ffb469e635a9880636197409b0f5552cd7c128e95737fbaeef3aaeeff82e3b6b757b5a581d5a5ca68e0f04f243a0f224c138715917c9236acba413215181a163ae7eeb25a596b36aeb0438a25ac418020000",
    ],
    [
      "ETag",
      "JNLGq8k6t5RO6S933hVLlg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:10 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f8b08000000000002ff1dcf4b5283300000d0bb64dd74a2d856dc15894041fe64900d43214028144a52f938dedd8eef06ef0764794e394f457fa157f00696ec59dee65bb37f55162f67c83a7e476767bc3e5517aa246179437bbe27a1628cb3e37c31fbae3b51b1083ba1ef0d9a2d7999dc6657aee4ae0f3ac35583d4954304e35a43cae843165512917c8ea783cb9c2ca0564f622f84460397ae6db4d07ed1abace61933d00997b170bb0297e268238e6f2480160a8622f1e30fadad8b4a9e4ee619a6a6da4e913aac6d7710442a3e5912a61e061b40e7818d94a7ec319376b2bc01ffcd542c037d5c159a8d7404bf7fb4d3a58605010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:10 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT MAX(`id`) AS `max` FROM `purchases`",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-3-1588841102688",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02ff8d535d6fda30147de75744d9cb260d9234014225b4314827344ab510d6ee096ce7263524711a3b6c55d5ff3e3be12388a9dba3ef3df79c733ffcd2d2347d4bb350bfd6744ce3a7128ae7771b86f58f2a0302c52a33dedec7db3c33bedd94f3dd26bf33960f5f96a3e1b046d1aa9aa3344fa0cd595910e0d7cb45272e5899a382b1b6246cdb6dabebbaae6359e655cf75eb520e4934a3d956113c0a91f36bc338d8e8c48cc509a09cf20e61e9316eecae8cbc601b20821be7aa8614e2c69bba9f124690a02c1b2e17b5879243b18214d144b9381587f8f3397b87a2b4134bf48e124084b03213ca594d435816d1b82c2a72c9f42283325c593e3e1b017de1cdbc71a0dd8e1edeaf69b8fea08d16da3a45bfd7da8d7f77abad7329fa8838f07525501587c005cd2a8900e1041ac432bb9fcaf42ffb385228122424ed1eb6ea9b3d64b9e60047b84f22d7eee2c8048c5ddcef221b9b64e0801362404d06a1b4eb7a94b10c237b604b18ea3930e8bbc4894c824cd30eaf423b843024a4df050b88be67783df6430a40022694e78cd3fde0f4b1ef8d026f35bd59cd3d6fe24d4eedff2ae805fade9f4a70e02fe76359d51c5584ca444cea66cf077536012167da6ceead295e349017944953d542a7f3c0f347e360faa361435ed70c62449e174feabe2294706835387479a3c173ae36a97f5f7afe4fa551e554c687080ac8c869d1ffb1645558a7fffd0325faf0215481fc1347792e64589e1be127f16a5feaf8685a393e105a66cf710e84b2b010978881651f10179f4269410a99388ca2fe1cf5bc5fcf2c950d3b559982cbedcfa7f3af95f9d66beb0fb2bdc026d7040000",
    ],
    [
      "ETag",
      "CkWgkpn/KFuNvjpO/UXBUA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:10 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-3-1588841102688"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d",
      "51",
      "d1",
      "6e",
      "82",
      "30",
      "14",
      "7d",
      "e72b48f73a32d16d614b7c50479c9971cae6ccb2f050e1c270c0c5b66c12c3bfaf2da0beb43de7dcdbdb737a344c93fc2479481e4db24de27d09acba8a41acd4c1035ea682cbadc09c03b956d52068acaa5f07370fa3c3f2c99d6ce2624f3f3f5ea6de66351c36553cf8868ccabaa344124709a42197f84b63b3e5b596d30cd48d193de8e6961655a1e9d9e2dd9dbadea59461a8a5c57a3e1f8de72e69a55aefbe5c6bfd8a1d6e3d8880411ec0f92d05c31d0462a64d739a1529581c4b16006f87a8c6468e199605658896a4ac8165df398e736bdbbdfebde374d52906542498ab86f51b398d172868eae19ff24dec2618d6c026862e04125d2473998d947e5573bf474e5cdd9e7ca343fe79dab812c0970ca5170eda418f74514c5059152a09c14ad07440e5473d27a2e58cdaf80710abdd6713020000",
    ],
    [
      "ETag",
      "O3/9AxPDECWgpqaYVKGRWQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:11 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "db",
      "72",
      "43",
      "40",
      "0000d07fd9e7c874895bdf48191411d188be1897c58a2c715de9f4df6bfa01e7e1fc8024cbd030c4637b4704bc833561e57db6ff6c25753d6791092b3509b5b4305776d6c94d0fbc555eb8be21f44b0c56ca4ff4c14e8c216b8b237a0f85407f0e94abcde523b1c66ea8a0de74b365987cf3866dde8ace87fc3b2d9f66e57cb86e95df0b8f0a27a2606341b8415359cd872747963a6a600f27337c25d8a625d37a9de9975a6441cc88c6e57675fcf0559447d1636bb73ec2739c6e942fac8c17047cbab492047600d10ef76888f136e37859de81ff663cae1ddaae2a4a7ad483df3f62fdb42305010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:11 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT MAX(`amount`) AS `max` FROM `purchases`",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-4-1588841102688",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d",
      "53",
      "5d",
      "6f",
      "9b30147dcfaf40ec659396000d2150a9daa2846e5469a69264ed9e12db5ca85bc0149b7651d5ff3e1bf24194a9dba3ef3df79c733ffcdad134fd91e6917eaee998264f15949b0f0f0ceb9f5506044a54e6eaeefb086e07d134719f6f2ef98bb37102e3e5e2a241d1ba9aa3ac48a1cb595512e0e7cb792f295955a092b1ae24ecda5d6be0baae6d59e699e3ba4d2987349ed2fc5111dc0b51f073c3d8d9e8258c2529a082f21e61d93e6e3c9f1945c91e80086e1cab1a52881befea7e49194182b2fc62396f3c541cca156488a6cac5a138c25f8fd97b1465bd44a29f29014408ab72a19c353484e5314daab226974caf3228c3b5e5fdb315d0e7fed41f2fb4ebd1ddc735ca14d9fa93369a6beb0cfd5e6b97e18f6b6d5d48e17bc481af6b919a20022e685ecb2c104ea1452eb3dbc9047fd9c99e4291202169b7b0d5d07490e59a1e8ef190c46e7f8063133076f17080fad8249e0d768401b51984d26eea51cef2e1996913271e60b03d2078e87892c68b3d6b40226b8850df7651e499aebe6578dbf7434a40022694178cd3edf0f471e88f16fe2ab85ccd7c7fe24f0eedbf94f4047d1b0612bc0897b3b1ac6a8f2a46552a264db3c7833a9a8090336d37f7de144f1a284acaa4a97aa9c16ce187a3f122f8d9b2212f6c0a09229bf993bab118a51c3a2d0e5ddee96253a84dea374b3ffca534ea9cca8410430939392cfa3f96ac0a9bf4bf7fa144ef3e852a90ff622fcf850ccb7323fc205eef4b1d1fcd6ac73b42cbb21d7347280b4b718a709cfe0e71f231941664908bdd289a0fd2ccfbedc852d5b2539729b8dcfe2c987dabcd77de3a7f00715df61edb040000",
    ],
    [
      "ETag",
      "JXHAeW5dLg8vQFsw6y6I/w==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:11 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-4-1588841102688"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d",
      "51",
      "c1",
      "52",
      "833014bcf3154c3c2a4ea9a8e84c0fc569476768b5b53d393da4e18154e0d124583b1dfedd2440cb25c9eebe9797dd9c2cdb263f691191679b6cd3645f013f5e252017fab004516552a8adc44200b9d1d52069a2abab299b0f9f0efb3890d7d964357b0ca259b2188d9a2ac1be21a7aaeea490c2710a592414fe32d86e79a31534077d634eff4c734bcb6369e869f83e5ef5851c2323ccd761380ec20969a5daec1bb5d6e60d3bdc2e21060e0583cb4b4a8e3b60f2cd5816342f337004569c816887e8c6464e385625e5888ea21ccf71ef7ddff75c77307cf0fdae3a4346658a856e587f92f3788992664b3c68d7c46d62e10d6c42e82220712f977e324afad5cd77b7ae47ce6cdd9e365687369779c15182f8e0a8dc08301e06a40be305b559a9b390bc024333aa3eea35952d67d5d63fed08872f13020000",
    ],
    [
      "ETag",
      "uFcN29wqfBt+lETM7BdMgQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Thu, 07 May 2020 08:45:12 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-27=":443"; ma=2592000,h3-25=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
