const nock = require("nock");
process.env.BIGQUERY_JEST_TIMESTAMP = "1595717892839";

nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "db",
      "6e",
      "82",
      "30",
      "00",
      "00",
      "d0",
      "7f",
      "e9",
      "b3335b51daee0d023841310801dd0be1526ee55e10eab27f9fd9f983f303a224a19c8753c7680b3e818820d9265babc3ea87932ef5f4d5321565a6742f9a9e66f0e1079af01971f7417b4203f6bee3b72b0ebcac6cab3bbfec6052b644d7fdc41e340b850a360e736cb8315e9c9bb9324b10318ad481a674d68301a6f3f126e394b9904767a42c35cad1f13defa2c5cdeb1a2adc3f7854548a398b661867f9ea3f226668e57c72e25e2e341c2c5dbd66e9336f0b6437d5f5f22486079161efc006d0b52f47cac3f23593f6846cc07f339c444f5f579546231dc1ef1fb8c89ff805010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:15 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT first_name FROM test.profiles WHERE id = 1",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-1-1595717892839",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "0002ff8d535b8f9a40147ef75710fa5ae5a228989876e3b2ad8deba6886efa6486e140c705869d19dc988dffbd33e00563b3ed2373ce7739e77cbc77344d7f2145ac8f353d22e96b056cff694b23fdb3aa8040a9aacc674ffe2e76b63fd6af197656de1a3f84bbb7c9a4e922359aa3bccca0cb69c530f0f16ad94b19ad4ac428ed4ac2aed5b51ccf195923d7b3ddbed7403964c99c142f8ae0b710251f1bc6c9462fa534cd009584f730cdcfefc6ce364a46b7800537ae550d29c48d0f75bf641423416831592d1b0f1507b6811c914cb9b880e3e8eb357b8fa0bc97caee1dc18030a6552194b38606d3222169c56a72c9f42e1fe5736df9fcd97ad097fedc9f865a4218179b02e5a03d044f8f9a002e7a72be8464c0b5e7ef7ee06b24d6269a55ebd41cb1ec2145ad14a2288316bfac1e9733fbcb59ce148a0409c4e1d8b619994364b9a61725d108276edf891213a2c88d460eea4726f606308823406d06a1b41b3c2a68e14838c2c8f1ec61dfb6e4976d0e6317bc786842e2210fbb83c41e98b17e64389ce7796344c03de125e5e4b83efd399885fe260c568be95de8b7674f509589fbc6fdf5e45723a945b6dd7eb4961b472523549aaa0f355b847e70370d67eb960d999a39a408ef97af2a3709ca38745a1cbacc5eb82fd569f49f2b3ff8a534ea9aaa04900083025f2ef71f5753c0a6fcef3f4b769f82ae0032eb67792ee4b3cc0fe61771cca04913c96bc76742a7eff54f8412c8c46dc7d0724f1d3761575a9043214eab6842dfecfb7065a96ad9a961aa5d5e7f315b7cabcd770e9d3ff172f2e3af040000",
    ],
    [
      "ETag",
      "LIOEvd5jJVqlc5U9VcFTvw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:15 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-1-1595717892839"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d",
      "51",
      "d1",
      "4ec230147ddf572cf551f63090c04c781043940450073c18434ce9ee6671db9d6d2720d9bfdb761bf0d2f69c736f6fcfe9c9715df2cdf388dcbb64cb939f12c4f12601f5660e21c83255526f05e61248c75483a289a9cedec303453ac7de4a76e7e9df21b8652ffbd1a8ae92ec0b32aaeb4e1a691c734823a9f187c56ec35b2da719981b632ea4fab4a87351d5b1b0ea72154e174fd74a86915516ebd9ec613c9b9046aaecbed16b65dfb2c36d083108c8195c5e5408dc0153536b5dd2ac48c193580a06b219621a6b3911581654207a9af27ccfef07fd813f1806dd612f68ab53645471cc4dc37a49cee3152a9a86b837ee895fc7236a5887d14641e2ab7cae13d2d2af699e080ee4cc56cd69e3b4687399373e2a90af02b51b09d683dfbf236d1c8f68ec2a93861225589a51fd65cf5c692ea6a904a772fe01a0ee571e1e020000",
    ],
    [
      "ETag",
      "mYRxaoaMo3Ts2Mlzx9+cOw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:16 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "000000000002ff1dcfdb6e82300000d07fe9b333522496bd8d5927b02a3290b297a66b1a57eed2864296fdfbccce1f9c1fc085905a33d3d7b203cf60e1d05f8b75dca3c0b9c8c2941e71d892bc9a2afd983f71b1d5f8161bf895dd714e76e961f205556e51e270638e3d7faab312f2b92036b4c35b8aa6bbe5430361e5d58945c7f1bd6410bba173cdc36de4c773ce84a6baa4ea9c3441a7428ba6cc124e2515f6aad1ae2535be2d4b81fbea64db8bde77fabbcd0e27cf318d08eaa81dbdcd9ea848e1f3c41226682d1a3766d18b406005e43ca8516aa61e33d7f3fd15f86f32b30cf2710d241fe5087eff0087b7e3ab05010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:16 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ltv FROM test.profiles WHERE id = 1",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-2-1595717892839",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d",
      "53",
      "db",
      "6e",
      "9b",
      "40",
      "10",
      "7df75720fa981a6cc0062c596de4d0d69243558c13b52fd6ee7a209b004bd8c59515f9dfbb0bbe60b94afbc8ce9ccbcc1cde7a9aa6bfd062a34f341dd3f4b5866af7e19961fda3aa8040a9aa84f9af4d12ce163c7e9adff8f421bcd9d6f6ed74da76d106cd515e66d0e7acae08f0c96a69a415ab4b5431d697847dab3f1cf92377e87abee5d97e0be590250b5abc288227214a3e31cda30d23652ccd0095941b84e5a777736b9965c59e81086e5eaa9a52889befea7eca184182b262ba5ab61e6a0ed51a724433e5e20cdee0cf97ec0645b991caee2d25800861752194b39686b022a1695d35e492e94d3ecae7c6f2e9b3f3a02f8345308bb54c6cb52fd1f77b4d0017861c2ca11970edf15b10051add68536dd80834e08deca1452311239c418758560f5b99ffe51e270a458204e270685bbb83311a7a031f27d82589678f7032008c3dec8e908d07c477c0d960405d06a1b45b3c2a583118252ec104b08bade1d87348e220e40cb0051ef209b687b66f8d1db0f403c3fe34cfef8a0ab8a3bc649c1ef6a63f46f33858c7d12a9cddc64177f604d599b86bdd5f4e7e31925a64d7ed7b6bb9725456944953cd85e6611c44b7b378fed0b121e3b2801491ddf25505264119875e874397a18b77a53a8dfe6315443f95465353950812a8a020e7cbfdc7d514b02dfffb9792ddc7842b800cf9499e0bf92cf343f8599c54d0a689e68de313e1d8b69d23a10456e2bac3191f93799d72a5053914e2b88a36ededbef71796ea8e9d06a6dae5f5c379f8b531dfdbf7fe0003e16a93a8040000",
    ],
    [
      "ETag",
      "NmZdfNCLsThI+9iVN+vu3A==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:16 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-2-1595717892839"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d",
      "51",
      "cb",
      "6e",
      "83",
      "30",
      "10",
      "bc",
      "f315c8bd962a50e541a51c92be5594b6697369958343164a62586a2fa9a2887faf6d20c9c5f6ccec7a3de383e3ba6c9b156b76e3b25596fe5620f71729d0bb39cc41558294de4a2c14b04b530dc453533d78c1dda30aaa70f6177c8deefccd96f7a693f1b8a952f10fe45cd71d34d238c940ac95c6df16bb2d6fb582e7606e14b4b3cd2d4dfbd2d20fd1ebe4f35cc8716d85d9228a26d3e89eb5526df7a55e6bfb860daee69080842286d34b4a891b88e9d95a563c2f05780a2b19836a8798c6464e25562597889ea6bcc0f3fb617fe80f476130ba0ebb6a8131a70c0bd3b0f860c7f184c4c51cff8c6be637b1c80636217411b0e42c97f364b4b433cd413fbcf20376e4ebf6b4743ab43c4d9cee09d49b44ed478175e10f7aac0be4168d61327990acc0d231d79ff59491e6122e1438b5f30f2b8e9f0e18020000",
    ],
    [
      "ETag",
      "6KovGs2u9Nw2Z8D1jka0BA==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:16 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "db6e82300000d07fe9b333522496bd8d5927b02a3290b297a66b1a57eed2864296fdfbccce1f9c1fc085905a33d3d7b203cf60e1d05f8b75dca3c0b9c8c2941e71d892bc9a2afd983f71b1d5f8161bf895dd714e76e961f205556e51e270638e3d7faab312f2b92036b4c35b8aa6bbe5430361e5d58945c7f1bd6410bba173cdc36de4c773ce84a6baa4ea9c3441a7428ba6cc124e2515f6aad1ae2535be2d4b81fbea64db8bde77fabbcd0e27cf318d08eaa81dbdcd9ea848e1f3c41226682d1a3766d18b406005e43ca8516aa61e33d7f3fd15f86f32b30cf2710d241fe5087eff0087b7e3ab05010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:16 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query: "SELECT ios_app FROM test.profiles WHERE id = 1",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-3-1595717892839",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d",
      "535d6f9b40107cf7af40f4b5369f3660c96a2387b6ae5c57c138519facbb63a197608e7047222bf27fef1dd818cb55da476e6767667787b781a6e94fb448f4a9a6639a3dd750ed3f3c32ac7f54151028531508bc207d5aba75e4c46659de7f1f4f5ed9dd6cd6a268d3cdd1aecc61c8595d11e0d3cd7a9455ac2e51c5d850120e9da1350ec69ee5f981ed3b41dbca214f97b4785204bf8528f9d4304e36461963590ea8a47c44d8ae7b375e6ca3acd82310c18d4b55430a71e35ddd4f3923485056cc36ebd643cda1dac20ed15cb9383727f8f325fb88a2dd2893e8174a0011c2ea4228672d0d61454ab3ba6ac825d39b7c94cf8de5eeb3f7a0afc365388f35caf81695a5f625faf94313c0c5480e97d21cb8f6f02d8c428d26da4cb31a91862091185a343231c239f4c865f5b899c55f6ed2512812241087236ceb991364f9668053ec91d477c6383501631f7b63e46093042eb80906d467104abbed47052b2ccbf6031cf8131b9cd47213df713cdbc296955a084d5c174cec3a63cbd18f0c876e9ed78a0ab8a5bc649c1e77a73f448b38dcc6d16635bf89c3feec29aa7371dbbabf9cfc6224b5c8bedbf7d672e5a8ac2893a69a2b2d567118ddcce3c57dcf868ccc123244f6eb67159a14e51c063d0e5d062fde97ea34fadd268c7e298da6a62a11a4504141ce97fb8faba9c6b6fcefdf4aa24f29570d32e89d3c17f259e687f0b338a9a04d13dd358e3bc24910d82742d958892b8467bb9313e22ae94a0b765088d32adac4b7fb3e5c58aa7b769a360597d75f2d565f1bf383c3e00fd1198d6fac040000",
    ],
    [
      "ETag",
      "e979fkL4uR3T0ppVJ56woQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:17 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-3-1595717892839"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d515d4fc230147ddfaf58eaa32e111161263c8092685c00a7f8a021a6747763b8edd6b68320d97fb7ed36e065ed39e77ef49c1d1cd7253f6911917b97acd2e4b704b1bf4840bd9a4b08b2cc94d407c74202b932d5a06862aa3f3e2fbb3db6debd245b79771bbdff3dce57e16e38acab245b434e75dd41238de314b2486afc65b1dbf0562b680e66628af29b726e073492da732b8d67b360329a9e4b3946569a2e8260340e26a4912a7b2ef5b7b22fd9e02a841804140c4eefe10237c0d4b3352e69ce33f0249682816c9698c65a4e04969c0a444f535ed7ebf4fc5ebfd31ff83783aedf5667c8a84ab1300d8b37725caf50d12cc49df14e3a7538a28675146d10243e4be73c1f2d6d4db3122590235b35b7a5d3a2e569df78af40ce056a3712ac07ff9ab4693ca071ab4c1866a4a519d5ffeb29559a8b6926c1a99c7fe31267bb1b020000",
    ],
    [
      "ETag",
      "VZ+35chwKgvs64dTzDPbRw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:17 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "c9",
      "72",
      "82",
      "30",
      "00",
      "00",
      "d0",
      "7f",
      "c9591d59a4d01b20501625148ac0854942a02c8a1394add37fafd3f707ef072042e830e48fbea537f00e16c42b3bb2737b59e382b234d2c8eb473f4ae2a74fd633c118194d1aa82c13d9eade4c9973b88aed13f5e07d17a7b8998a360eebb70fb446b8833c4c7443e1f5ea5668892ec33df67c2568ceaa85a889b168cf383a621a946316c28040cdea0b6719b5cbb8e6b254fb95e96fc5ad683e3dfb0a792f9d7b71a8b244e031eb2459fa6aa74bdcdbe10205864f5566a5e36779158e0eecdc49051b40e77bcde890d7af997050940df86fe68fe54e5f578d224619f8fd03205e149205010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:17 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT first_name FROM test.profiles WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-4-1595717892839",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d535b4fdb30147eefaf88b2075ed6263469d2205583958c756245a4e9d078a96cf738189238d84e3784f8efb393b6a462627bf439e7bb9c8b9f7b96653fb0726d9f583666d9630de2e9c33dc7f6479301853293b9c268735b0a757de1d0dbe93712649fefb26c3269ab588396a8a872e84b5e0b02f264b9186482d715129cf73561dfef1f8fa251781c8ea3e1d88b5aa8849c5eb2f2c110dc2955c913c7d9d918649c6739a08ac901e1c53eee6c864e25f83d10259d4355470b49e75ddd4f392748315e4e968bd6432d41aca0402c372e5ec16b7c7ac83e60a81864ba7ac3082042785d2ae3aca521bca42cab4543ae999e7550871bcbfb6727602fe2cb789a5a9409a956252ac0fa925c7db7144835d0fd519683b46ebec6496c35eeac897504f75a9d33e99ec2efc69bd13f6a0c34e46b0d666563214538878eb0ce6ea736fbcbbef61486042924615bb60add001d8fdd08531c123af64698ba80f1188723e46197443ef86b0ca8cba08c768b47252f21a41159bb91ef05e1c81b7b21f17d9f0411c54100438f52b20e3019faf696e165dfcf2fc1149c335971c9b673b56f92591aafd264399f9ea571b7778aea5c9db7ee0f3b3f68c94cb8ebf6bdb1bc715409c6b5a96683b3791a2767d374f6a363439fd32564883c2d1ecd4151944be875386c7d94e9536556635f2fe3e4a7d1687226930005012579dddc7f6ccd00dbf4bfbf9caedefd0003d09f602f2f950eebfb21f2559c0868af89158de33d61a82977841a28d49b8ab1eb7bbb8a37bfc0684101a5da8da2fd0dedbc5f0e2cd51d3b0dcc94ebedcf67f38bc67cefa5f707f267fb8cc8040000",
    ],
    [
      "ETag",
      "ObavZnrtQG/fZCJc6gBhgg==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:18 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-4-1595717892839"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "0002ff4d514d6f824010bdf32bc8f62a076d8dd2c48336a43531c6a2f4d0c6342b0e742d307477684b0cffdddd053f2eecbef76676e63d8e8eebb26f51ecd9a3cb7622fda940d67729d0abb984a0aa8c943e4a2c14b09ea906e2a9a9fe8fc4e68dfc280836b3f76289ab9aaffce964d256a9f80b72aeeb8e1a699c08c8f64ae30f8bdd8eb75ac173302f26422afab4a87755a92eadbade84f3e5f3ad92e3de2acb68b198ce1601eba4c69e5bfd6dec2e07dc859080842286eb46a5c403c434b7d615cfcb0c3c85958c4175434c632ba712ab924b444f53de83d71ffac3517f34f607e37bff5c9d61cc4960611aa235bb8c27249e85f867dcb37e1b8f6c611bc6390a96dce4739b90967e4d732005b00bdb74b7ad7346dbebbc594da05612b51b05d6c3c06f3735ae9ed0d8259306c90a2c1d73fdcb5e04692ee19902a7714e0e0864f71e020000",
    ],
    [
      "ETag",
      "xUiTVt9UEETBZnNoPyaP9A==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:18 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "1d",
      "cf",
      "db",
      "6e",
      "82",
      "30",
      "00",
      "00",
      "d0",
      "7f",
      "e9b31a706cb47b1344e50e5247d80b2950c3454a471b0298fdfbccce1f9c2720654985c8e5d051063ec142f66857eedc011a6a5c36a7ce5f79a87ad31ca4d3e3166756e8ee4d7f5bdbb24f204155d32d8ad3186ddadfcf12c9fde87d8c8ab6d4985f185af52a24012ed46f551d0ec71b828713b16aa2b658ebae95c8e65ea497fa4bd41073764ce0d9c6d543e6168c57785722f3ea6f050b0b3d70b43ab18bf6c7f7f2d491a1c15a5c5489ee60371a4a2df2118f3393854deff56ce2c2d37d013680cebc19a9c89bd7eced1da10df86fe672e1f475352819e9087eff000d13110505010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:18 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ltv FROM test.profiles WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-5-1595717892839",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d",
      "53",
      "5b",
      "4f",
      "db",
      "30147eefaf88b2071e589b94344d52a91a08b2ad52e9469a0ef1846cf72418d238d84e1942fcf7d94e2fa93ab13dfa9cf35dcec56f1dcbb29f68b9b447968d69fe5c037ffdf4c8b0fd596740a25c67ae4ed3979fe51dc7d7e529f2736ff9b008d637e37153450d5aa055554057b09a1310a3c5bc977356578833d655845dbfdbf7233fe8076174167a5103155064535a3e698207292b31729cad8d5ece585e00aaa8e811b6dac59df5995371f608440ae750d55142c2f950f74bc108929495e3c5bcf1500be0f7b042b4d02ef6e0253e3f64ef51b4eae5aa7a4d092042585d4aedaca121accc685e7343ae98de5450858de5ddb315b0e7f134be4cad42aeadafc98f6b4b82903dd558460b10d6edf738892d63cb1a5b27f0a8641915ee39fc36a6b4f0895136ac4b05a6a5d14e112ea0a5a8b29b714dfeb2a81d8526411209d894dd07ee10f54337c2190e48167a3ece5cc038c4818f3cec926800832506d466905abbc1a39295c4f39651e045fd6130ccc01bba837ee04721710738f3f0190aa2613850497bc3f0beebe78553095754544cd0cd40eddb6492c6f769b2985d5ea471bbf70cd585bc6adc1f767ed0929e70dbed476339725471ca9429b3bac92c8d938bcb74f2ab6543ddd11472445ee7cffa92325408e8b4386c758de96ba55763df2ce2e44e6b989cce2490018792ec37f71f5bd3c026fdefbfa6aab7a7af01eafa77f242aab0ba1f22f6e28443734d74651cef08437f4fa8805c1e570cc3705b7174fe5a0b5650caed289a6fd0ccfbfdc052ddb26360ba5c6d7f36997d33e63bef9d3fb35f6c08c1040000",
    ],
    [
      "ETag",
      "D+TwPnYrbMn+a5g3dhU7vQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:18 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-5-1595717892839"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "0002ff4d51cb6e833010bcf315c83db6b485942654ca8154ad5a09f5419253958343160a312cb54da228e2df6b1b4872b13d33bb5ecff868d936d9e6d5863cd9649d677f0df0c35506f25b1f62100d93426d355602c88dae0649335d7db70cc07f0ccb92ceb7d7f3fa61ec15de623f9d765522f98592aabaa3420aa739b08d50f8c760bbe78d56d112f48d4cee4c734fcb436de8d7e8335c5c0a256e8cf0b18ca27016bd905e6acdbe526b6bde50e03a86143854099c5f52732c2091efc6b2a065cdc011d8f004443f44377672c6b1a929477414e5f88eeb07fed81d4f026f320a866a8609953956ba613927a7f112256531eeb56be276b1f00e76210c1190f42297cb6494b4d3cd9e1fdcba1e39f16d7f5a59035a9d27ce0e12c41747e547807131baf7c910c8336ac352e7217903864ea8faacb75c2a2ea54c80d55aff8d099bef18020000",
    ],
    [
      "ETag",
      "/U9e56AmmaSk+Sp472j2Tw==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:19 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://www.googleapis.com:443", { encodedQueryParams: true })
  .post("/oauth2/v4/token", {
    grant_type: "urn:ietf:params:oauth:grant-type:jwt-bearer",
    assertion: /.+/g,
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00000002ff1dcfdb6e82300000d07fe9b318074ee9deb82882806085b0be10ac1d10044a815030fbf7999d3f382f901142fb3e1dda8a36e00bcc990cd7647d6e55fd237c44f654dce6054926666eb31104334e4283f35eccbd7913de4ff05cbafcb98f2d5b24b23149519e1ccfd050fd02757e47b3b4bb620715633b513d8976365361ec66dec9a6f810d55e6784f3b4c8218aaaad7940b660aafb70eedf35e2d64656c8c5518edae2c5f862b06b53384a2073ab4dd56dabcda880c5804f66056b490f967024a57fe7f16eaf2562b472b00254b092d33e2ddf33e513c215f86fa6c3cce8fbaad38c530e7eff00900468d905010000",
    ],
    [
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:19 GMT",
      "Server",
      "scaffolding on HTTPServer2",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Connection",
      "close",
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .post("/bigquery/v2/projects/sample-sources/jobs", {
    configuration: {
      query: {
        useLegacySql: false,
        query:
          "SELECT ios_app FROM test.profiles WHERE email = 'ejervois0@example.com'",
        defaultDataset: { datasetId: "test" },
      },
    },
    jobReference: {
      projectId: "sample-sources",
      jobId: "grouparoo-job-6-1595717892839",
    },
  })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "8d535b6fda30147ee75744d9431f364820842495d05ad17443634c0d61559f906d4e324388d3d8e98a2afefb6c07d2a04edd1e7dcef92ee7e2978e61985b9aafcd4bc3c4347daca0dc7fd8306c7e52191028559924dcf61ffcdc82c1c7e77c73e77fbb0d8793bbf1b8aea21acdd1aec8a0cb595512e097cb452f2d5955a092b1ae24ec8eba7d3770bdbee70703df096a28872c99d17cab087e0951f04bcb3ad9e8a58ca519a082f21e61bb266e3d0daca2641b20825be7aa9614e2d6bbba9f334690a02c1f2f17b5878a43b9821da29972f10a5ee3ab73f61e45bb5e2aab9f28014408ab72a19cd53484e5094dab52934ba6171994616db979b602e6229c8593d8a08caf505118b7d18fef86002e7ab2b98466c08dfbaf61141ada9a31362e6023a519e5f6153c6b634afc42ab6be6b504d35cebc70867d05295d9e3c8a67f595643a14890401c8e652bcf1ea1be6f0738c11e497cc7c5890d18fbd87391836d120c61b8c680da0c4269d77894b31cd903db237d1b3b09721d771d04d8e9638206289143745d04c491a19179643834fdfc2ea9801bca0bc6e971a8e67d348dc3551c2de793eb386cf79ea02a1337b5fbf3cecf5a52136ebb7d6f2c6f1c152565d2945edf741e87d1f5249efe6cd990b734831491fde2515d5382320e9d1687292f32de176a35e6dd328c1e9486cea94c0409949093d7cdfdc7d614b04efffbbfc9ead3f92b80fc018d3c17322cef87f0577152427d4d74a71d3784813b6a0825b0146f2b3cd73d55bcf9024a0b76908bd328eaaf50cffb7066a96ad9d130552eb73f9fcebf68f39d43e70f2ed22f67c5040000",
    ],
    [
      "ETag",
      "fEk1Y8n/e2+xnjQ8KFE4CQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:19 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
nock("https://bigquery.googleapis.com:443", { encodedQueryParams: true })
  .get(
    "/bigquery/v2/projects/sample-sources/queries/grouparoo-job-6-1595717892839"
  )
  .query({ location: "US" })
  .once()
  .reply(
    200,
    [
      "1f",
      "8b",
      "08",
      "00",
      "00",
      "00",
      "00",
      "00",
      "02",
      "ff",
      "4d",
      "51",
      "c9",
      "6e",
      "83",
      "3014bcf315c8bd960389b255ca218922b515ca428a7aa8a2ca711e146a78d436ad92887faf6d20c9057b66dee2192e8eeb92efb4389227971cd2e4a702717a48406dcd2504597125f5516221813c9a6a503431d5e7e1ee8dbffa3d16c50b9e85cbf3f63ddb6ca7d3a64ab22fc8a9aebb68a4719c023f4a8d3f2c765bde6a05cdc14c4c517ed2b2b4035a499d4a2bcdd7eb60395bdd4b391eadb48a8260360f96a4956a7beef5b7b62fc9f010420c020a06b7f794023360eac51a97342f3978122bc140b64b4c63232702ab920a444f53ded0f30793c1c81f8d27bd717fd255736454a55898866847aeeb152aca43fc33de89df84231ad844d10541e2bb74eef3d1d2af6956a2027265ebf6b6773ab4bfed9b9f14c88d40ed4682f5d0eb0f4817c7028d5d65d230332dcda8fe61cfa9d25c4cb904a776fe01a65d40251c020000",
    ],
    [
      "ETag",
      "z6STlJ12cUfCljREzQWjPQ==",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Vary",
      "Origin",
      "Vary",
      "X-Origin",
      "Vary",
      "Referer",
      "Content-Encoding",
      "gzip",
      "Date",
      "Sat, 25 Jul 2020 22:58:20 GMT",
      "Server",
      "ESF",
      "Cache-Control",
      "private",
      "X-XSS-Protection",
      "0",
      "X-Frame-Options",
      "SAMEORIGIN",
      "X-Content-Type-Options",
      "nosniff",
      "Alt-Svc",
      'h3-29=":443"; ma=2592000,h3-27=":443"; ma=2592000,h3-T050=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"',
      "Transfer-Encoding",
      "chunked",
    ]
  );
