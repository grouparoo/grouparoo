const nock = require("nock");

nock("https://d3v-grouparoo.zendesk.com:443", { encodedQueryParams: true })
  .get("/api/v2/user_fields.json")
  .matchHeader("content-type", "application/json")
  .matchHeader("accept", "application/json")
  .matchHeader(
    "authorization",
    "Basic ZXhhbXBsZS51c2VyQGdyb3VwYXJvby5jb20vdG9rZW46VGRSclYxZm9CTm9RMXRKUlVoQnNhN3dKQThoT05CSHdWMXJPODdDYw=="
  )
  .matchHeader("x-zendesk-marketplace-name", "Grouparoo")
  .matchHeader("x-zendesk-marketplace-organization-id", 5084)
  .matchHeader("x-zendesk-marketplace-app-id", 577390)
  .matchHeader("host", "d3v-grouparoo.zendesk.com")
  .once()
  .reply(
    200,
    {
      user_fields: [
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266052.json",
          id: 360001266052,
          type: "text",
          key: "text_field",
          title: "Text Field",
          description: "",
          raw_title: "Text Field",
          raw_description: "",
          position: 0,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:08Z",
          updated_at: "2020-08-15T01:33:08Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266072.json",
          id: 360001266072,
          type: "textarea",
          key: "multiline_field",
          title: "Multiline Field",
          description: "",
          raw_title: "Multiline Field",
          raw_description: "",
          position: 1,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:30Z",
          updated_at: "2020-08-15T01:33:30Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266092.json",
          id: 360001266092,
          type: "integer",
          key: "numeric_field",
          title: "Numeric Field",
          description: "",
          raw_title: "Numeric Field",
          raw_description: "",
          position: 2,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:39Z",
          updated_at: "2020-08-15T01:33:39Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274351.json",
          id: 360001274351,
          type: "decimal",
          key: "decimal_field",
          title: "Decimal Field",
          description: "",
          raw_title: "Decimal Field",
          raw_description: "",
          position: 3,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:51Z",
          updated_at: "2020-08-15T01:33:51Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274371.json",
          id: 360001274371,
          type: "checkbox",
          key: "checkbox_field",
          title: "Checkbox Field",
          description: "",
          raw_title: "Checkbox Field",
          raw_description: "",
          position: 4,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:34:33Z",
          updated_at: "2020-08-15T01:34:33Z",
          tag: "checkedbox",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274391.json",
          id: 360001274391,
          type: "date",
          key: "date_field",
          title: "Date Field",
          description: "",
          raw_title: "Date Field",
          raw_description: "",
          position: 5,
          active: true,
          system: false,
          regexp_for_validation:
            "\\A([0-9]{4})-(1[0-2]|0[1-9])-(3[01]|[12][0-9]|0[1-9])\\z",
          created_at: "2020-08-15T01:34:55Z",
          updated_at: "2020-08-15T01:34:55Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274411.json",
          id: 360001274411,
          type: "regexp",
          key: "regex_field",
          title: "Regex Field",
          description: "",
          raw_title: "Regex Field",
          raw_description: "",
          position: 6,
          active: true,
          system: false,
          regexp_for_validation: "[a-z]",
          created_at: "2020-08-15T01:35:27Z",
          updated_at: "2020-08-15T01:35:27Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266112.json",
          id: 360001266112,
          type: "dropdown",
          key: "dropdown_field",
          title: "Dropdown Field",
          description: "",
          raw_title: "Dropdown Field",
          raw_description: "",
          position: 7,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:36:22Z",
          updated_at: "2020-08-15T01:36:22Z",
          custom_field_options: [
            {
              id: 360002500372,
              name: "apple",
              raw_name: "apple",
              value: "apple",
            },
            { id: 360002500392, name: "pear", raw_name: "pear", value: "pear" },
            {
              id: 360002500412,
              name: "banana",
              raw_name: "banana",
              value: "banana",
            },
          ],
        },
      ],
      next_page: null,
      previous_page: null,
      count: 8,
    },
    [
      "Date",
      "Wed, 20 Oct 2021 22:51:56 GMT",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "keep-alive",
      "X-Zendesk-API-Version",
      "v2",
      "X-Zendesk-Application-Version",
      "v10011",
      "X-Frame-Options",
      "SAMEORIGIN",
      "ETag",
      'W/"c8499097a48a77b2adbb6338531be68e"',
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-Rate-Limit",
      "700",
      "X-Rate-Limit-Remaining",
      "692",
      "Strict-Transport-Security",
      "max-age=31536000;",
      "X-Zendesk-Origin-Server",
      "classic-app-server-846d896966-5d4jp",
      "X-Request-Id",
      "6a15d04def3c3b45-SJC",
      "X-Runtime",
      "0.151435",
      "X-Zendesk-Zorg",
      "yes",
      "X-Request-ID",
      "6a15d04def3c3b45-SJC",
      "X-Content-Type-Options",
      "nosniff",
      "CF-Cache-Status",
      "DYNAMIC",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Report-To",
      '{"endpoints":[{"url":"https:\\/\\/a.nel.cloudflare.com\\/report\\/v3?s=IioV%2F1MLrCtAHOfWPhVD%2FgDT%2FID%2FBmaadttOnCvLdeopwYtrr%2B%2FEnABErkDNk9fRmbIOcocSo0%2BByS6XSg5nRvQe7rXTdgtd%2FE9jpuv5gM8Av%2BMyy1E63zBaetMI4Kn9Cx4o%2BmZqBSPwQmA%3D"}],"group":"cf-nel","max_age":604800}',
      "NEL",
      '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}',
      "Set-Cookie",
      "__cfruid=f1c4ff81900f2c2a69d764464014c6c4cbaf525d-1634770316; path=/; domain=.d3v-grouparoo.zendesk.com; HttpOnly; Secure; SameSite=None",
      "Server",
      "cloudflare",
      "CF-RAY",
      "6a15d04def3c3b45-SJC",
    ]
  );
nock("https://d3v-grouparoo.zendesk.com:443", { encodedQueryParams: true })
  .get("/api/v2/user_fields.json")
  .matchHeader("content-type", "application/json")
  .matchHeader("accept", "application/json")
  .matchHeader(
    "authorization",
    "Basic ZXhhbXBsZS51c2VyQGdyb3VwYXJvby5jb20vdG9rZW46VGRSclYxZm9CTm9RMXRKUlVoQnNhN3dKQThoT05CSHdWMXJPODdDYw=="
  )
  .matchHeader("x-zendesk-marketplace-name", "Grouparoo")
  .matchHeader("x-zendesk-marketplace-organization-id", 5084)
  .matchHeader("x-zendesk-marketplace-app-id", 577390)
  .matchHeader("host", "d3v-grouparoo.zendesk.com")
  .once()
  .reply(
    200,
    {
      user_fields: [
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266052.json",
          id: 360001266052,
          type: "text",
          key: "text_field",
          title: "Text Field",
          description: "",
          raw_title: "Text Field",
          raw_description: "",
          position: 0,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:08Z",
          updated_at: "2020-08-15T01:33:08Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266072.json",
          id: 360001266072,
          type: "textarea",
          key: "multiline_field",
          title: "Multiline Field",
          description: "",
          raw_title: "Multiline Field",
          raw_description: "",
          position: 1,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:30Z",
          updated_at: "2020-08-15T01:33:30Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266092.json",
          id: 360001266092,
          type: "integer",
          key: "numeric_field",
          title: "Numeric Field",
          description: "",
          raw_title: "Numeric Field",
          raw_description: "",
          position: 2,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:39Z",
          updated_at: "2020-08-15T01:33:39Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274351.json",
          id: 360001274351,
          type: "decimal",
          key: "decimal_field",
          title: "Decimal Field",
          description: "",
          raw_title: "Decimal Field",
          raw_description: "",
          position: 3,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:33:51Z",
          updated_at: "2020-08-15T01:33:51Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274371.json",
          id: 360001274371,
          type: "checkbox",
          key: "checkbox_field",
          title: "Checkbox Field",
          description: "",
          raw_title: "Checkbox Field",
          raw_description: "",
          position: 4,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:34:33Z",
          updated_at: "2020-08-15T01:34:33Z",
          tag: "checkedbox",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274391.json",
          id: 360001274391,
          type: "date",
          key: "date_field",
          title: "Date Field",
          description: "",
          raw_title: "Date Field",
          raw_description: "",
          position: 5,
          active: true,
          system: false,
          regexp_for_validation:
            "\\A([0-9]{4})-(1[0-2]|0[1-9])-(3[01]|[12][0-9]|0[1-9])\\z",
          created_at: "2020-08-15T01:34:55Z",
          updated_at: "2020-08-15T01:34:55Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001274411.json",
          id: 360001274411,
          type: "regexp",
          key: "regex_field",
          title: "Regex Field",
          description: "",
          raw_title: "Regex Field",
          raw_description: "",
          position: 6,
          active: true,
          system: false,
          regexp_for_validation: "[a-z]",
          created_at: "2020-08-15T01:35:27Z",
          updated_at: "2020-08-15T01:35:27Z",
        },
        {
          url: "https://d3v-grouparoo.zendesk.com/api/v2/user_fields/360001266112.json",
          id: 360001266112,
          type: "dropdown",
          key: "dropdown_field",
          title: "Dropdown Field",
          description: "",
          raw_title: "Dropdown Field",
          raw_description: "",
          position: 7,
          active: true,
          system: false,
          regexp_for_validation: null,
          created_at: "2020-08-15T01:36:22Z",
          updated_at: "2020-08-15T01:36:22Z",
          custom_field_options: [
            {
              id: 360002500372,
              name: "apple",
              raw_name: "apple",
              value: "apple",
            },
            { id: 360002500392, name: "pear", raw_name: "pear", value: "pear" },
            {
              id: 360002500412,
              name: "banana",
              raw_name: "banana",
              value: "banana",
            },
          ],
        },
      ],
      next_page: null,
      previous_page: null,
      count: 8,
    },
    [
      "Date",
      "Wed, 20 Oct 2021 22:51:56 GMT",
      "Content-Type",
      "application/json; charset=UTF-8",
      "Transfer-Encoding",
      "chunked",
      "Connection",
      "keep-alive",
      "X-Zendesk-API-Version",
      "v2",
      "X-Zendesk-Application-Version",
      "v10011",
      "X-Frame-Options",
      "SAMEORIGIN",
      "ETag",
      'W/"c8499097a48a77b2adbb6338531be68e"',
      "Cache-Control",
      "max-age=0, private, must-revalidate",
      "X-Rate-Limit",
      "700",
      "X-Rate-Limit-Remaining",
      "690",
      "Strict-Transport-Security",
      "max-age=31536000;",
      "X-Zendesk-Origin-Server",
      "classic-app-server-846d896966-fsp7k",
      "X-Request-Id",
      "6a15d04fba5d3b33-SJC",
      "X-Runtime",
      "0.150451",
      "X-Zendesk-Zorg",
      "yes",
      "X-Request-ID",
      "6a15d04fba5d3b33-SJC",
      "X-Content-Type-Options",
      "nosniff",
      "CF-Cache-Status",
      "DYNAMIC",
      "Expect-CT",
      'max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"',
      "Report-To",
      '{"endpoints":[{"url":"https:\\/\\/a.nel.cloudflare.com\\/report\\/v3?s=ToiUbh8O4Q6ahPpBtGW6NadgUfjphH5W57uJQXTKS8rPymynekJI4URQx0L6m%2BgmIsW5sdgYhBMjTGv48BmhaHFhBB4RxHIhOJFVTxUyRFO%2FnrCsCv8quiElQ76IvHtwZL7aOujBf4jZABk%3D"}],"group":"cf-nel","max_age":604800}',
      "NEL",
      '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}',
      "Set-Cookie",
      "__cfruid=f1c4ff81900f2c2a69d764464014c6c4cbaf525d-1634770316; path=/; domain=.d3v-grouparoo.zendesk.com; HttpOnly; Secure; SameSite=None",
      "Server",
      "cloudflare",
      "CF-RAY",
      "6a15d04fba5d3b33-SJC",
    ]
  );
